From jules at codesourcery.com  Tue Dec  5 15:52:52 2006
From: jules at codesourcery.com (Jules Bergmann)
Date: Tue, 05 Dec 2006 10:52:52 -0500
Subject: [patch] Fix for issue #125
Message-ID: <457595D4.8060704@codesourcery.com>

While working on Ext_data for the reference implementation, I ended up 
fixing issue #125 "Fft cannot take an expression as an argument" by 
allowing Ext_data objects to be created for expression blocks (the 
ref-impl needs to use Ext_data on expression blocks to implement some of 
the matrix vector operations, such as prodh()).

The root problems are Ext_data (and Rt_ext_data)

(a) cannot be instantiated for const blocks, because it results in 
ambiguous constructors, and

(b) cannot be instantiated for blocks without a put() method, because 
the sync value is a run-time parameter.

The fixes are:

- explicitly disambiguate the constructors for non-const and const block 
types.

- make Block_copy from a pointer to a const block a runtime error.  To 
reduce duplication of code for the copy to a pointer (the other 
direction), Block_copy was split into separate classes Block_copy_to_ptr 
and Block_copy_from_ptr.


The patch also includes a regression test for the issue, and some 
additional argument checking for Fft to help debug the regression test :).

I'm currently running the regression suite to make sure the Block_copy 
change did not affect other code.  I will apply after that looks good.

				-- Jules

-- 
Jules Bergmann
CodeSourcery
jules at codesourcery.com
(650) 331-3385 x705
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: 125.diff
URL: <http://sourcerytools.com/pipermail/vsipl++/attachments/20061205/d937e0eb/attachment.ksh>

From jules at codesourcery.com  Tue Dec  5 16:55:52 2006
From: jules at codesourcery.com (Jules Bergmann)
Date: Tue, 05 Dec 2006 11:55:52 -0500
Subject: [patch] Fix missing accessor for Par_expr_block
Message-ID: <4575A498.9050600@codesourcery.com>

Patch applied.

-- 
Jules Bergmann
CodeSourcery
jules at codesourcery.com
(650) 331-3385 x705
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: pe-size.diff
URL: <http://sourcerytools.com/pipermail/vsipl++/attachments/20061205/aef7fd61/attachment.ksh>

From jules at codesourcery.com  Wed Dec  6 06:32:58 2006
From: jules at codesourcery.com (Jules Bergmann)
Date: Wed, 06 Dec 2006 01:32:58 -0500
Subject: [patch] Ext_data for reference implementation
Message-ID: <4576641A.6020301@codesourcery.com>

This patch updates Ext_data for the reference implementation as follows:

  - basic compile-time extdata access (direct access and copy access)
    goes into core/extdata.
  - advanced compile-time extdata access (flexible access) stays in
    opt/extdata.
  - run-time extdata access stays in opt/rt_extdata.

All the core bits using Ext_data (such as solvers, matvec, signal 
processing other than Fft) should work with core/extdata.

Since Fft uses Rt_ext_data, this patch adds a simplified workspace that 
uses Ext_data instead.  This does not query the backend to find out what 
format it supports, rather it just gives the data as is.  This requires 
the backend to support arbitrary stride, which the C-VSIPL BE now does.

This patch will move two files (I haven't moved them in svn yet to 
minimize the time between moving and committing):
  - move opt/block_copy into core
  - move core/fft/workspace into opt

This patch also
  - Splits Block_fill out of block_copy into its own header.

  - Renames the VISP_IMPL_CVSIP_HAS_{TYPE} macros to _HAVE_.  We
    were using both names (HAS and HAVE), but only defining one.

  - Defines macros VSIP_IMPL_PROVIDE_FFT_{FLOAT, DOUBLE, LONGDOUBLE} in
    configure.ac to indicate for which types FFT should be tested.

  - Fixes other minor bits with the ref-impl.

With this patch,

  * most tests pass with the optimized library using C-VSIP has a backend
     - we're getting miscompares for convolution, correlation, and fir
     - the solver tests don't pass because they've either not been
       checked in (QR, Cholesky), they're broken (LU), or C-VSIP doesn't
       implement them (SVD).

  * most of the ref-impl tests pass with the ref-impl library
     - the solver tests don't pass for reasons above.

  * nearly all tests pass with the optimized library using other backends
     - fir is failing with IPP ... need to look into that.

Stefan, can you review the Fft related changes in particular?

				thanks,
				-- Jules

-- 
Jules Bergmann
CodeSourcery
jules at codesourcery.com
(650) 331-3385 x705
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: ried.diff
URL: <http://sourcerytools.com/pipermail/vsipl++/attachments/20061206/89e94589/attachment.ksh>

From jules at codesourcery.com  Thu Dec  7 19:30:06 2006
From: jules at codesourcery.com (Jules Bergmann)
Date: Thu, 07 Dec 2006 14:30:06 -0500
Subject: [patch] C-VSIP Solver cleanup
Message-ID: <45786BBE.6060800@codesourcery.com>

This patch

  - adds Is_{solver}_impl_avail specializations so that C-VSIPL solvers
    are found by dispatch when used in the optimized impl.

  - adds coverage events to the solver front-ends to make it possible to
    determine what backend was used when coverage is turned on.

  - Centralizes implementation tags used by the different dispatchers
    into a single file (impl_tags.hpp).

  - Adds a variant of Compile_time_assert called
    'Compile_time_assert_msg' that takes an extra type for purposes of
    encoding an error message.

    This is used by the CVSIP Convolution backend to signal an error
    when the backend doesn't support a particular value type:

    class Convolution_impl<const_Matrix, S, R, T, N, H, Cvsip_tag>
      : public cvsip::Convolution_impl<2, T, S, R>
      , Compile_time_assert_msg<cvsip::Conv_traits<2, T>::valid,
			  Conv_cvsip_backend_does_not_support_type<T> >
    {

    If a program attempts to perform a convolution with a type not
    supported by the backend (such as 'int'), the following error
    message gets emitted:

/home/jules/csl/src/vpp/work-ref-impl/tests/../src/vsip/core/signal/conv_common.hpp:69: 

    error: invalid use of undefined type '

    struct vsip::impl::Compile_time_assert_msg<
       false,
       vsip::impl::Conv_cvsip_backend_does_not_support_type<int>
    >

    This message is of course buried deep within the template call stack.

With this patch, all tests pass when using the C-VSIP backends as part 
of the optimized library, except

  - convolution, correlation, fir, and regressions/conv_to_subview
    all of which get a miscompare,

  - solver-lu: uses functionality not provided by C-VSIP BE,
    resulting in a nice unimplemented exception.

All ref-impl tests pass with the ref-impl library.

Patch applied.

				-- Jules

-- 
Jules Bergmann
CodeSourcery
jules at codesourcery.com
(650) 331-3385 x705
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: solvers.diff
URL: <http://sourcerytools.com/pipermail/vsipl++/attachments/20061207/db9bfdbb/attachment.ksh>

From stefan at codesourcery.com  Thu Dec  7 19:32:43 2006
From: stefan at codesourcery.com (Stefan Seefeld)
Date: Thu, 07 Dec 2006 14:32:43 -0500
Subject: [vsipl++] [patch] C-VSIP Solver cleanup
In-Reply-To: <45786BBE.6060800@codesourcery.com>
References: <45786BBE.6060800@codesourcery.com>
Message-ID: <45786C5B.5070303@codesourcery.com>

Jules Bergmann wrote:
> This patch

>  - Adds a variant of Compile_time_assert called
>    'Compile_time_assert_msg' that takes an extra type for purposes of
>    encoding an error message.

Awesome !!

We should try to use this and similar techniques as much as we can.
It's hard enough to wade through template-related compiler error messages.

Thanks,
		Stefan

-- 
Stefan Seefeld
CodeSourcery
stefan at codesourcery.com
(650) 331-3385 x718


From jules at codesourcery.com  Thu Dec  7 19:57:55 2006
From: jules at codesourcery.com (Jules Bergmann)
Date: Thu, 07 Dec 2006 14:57:55 -0500
Subject: [vsipl++] [patch] Ext_data for reference implementation
In-Reply-To: <4576641A.6020301@codesourcery.com>
References: <4576641A.6020301@codesourcery.com>
Message-ID: <45787243.2010801@codesourcery.com>

> This patch will move two files (I haven't moved them in svn yet to 
> minimize the time between moving and committing):
>  - move opt/block_copy into core
>  - move core/fft/workspace into opt

I moved these files, and adjusted references to them.

Moved files excluded from the emailed patch for brevity.

Patch applied.


-- 
Jules Bergmann
CodeSourcery
jules at codesourcery.com
(650) 331-3385 x705
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: move.diff
URL: <http://sourcerytools.com/pipermail/vsipl++/attachments/20061207/72a018ce/attachment.ksh>

From jules at codesourcery.com  Mon Dec 11 17:55:21 2006
From: jules at codesourcery.com (Jules Bergmann)
Date: Mon, 11 Dec 2006 12:55:21 -0500
Subject: C-VSIP reduction BE
Message-ID: <457D9B89.60806@codesourcery.com>

This patch implements evaluators for using the C-VSIP reduction functions.

It also changes the VSIPL++ reduction functions to directly call the 
C-VSIP evaluators when used in the reference implementation, avoiding 
the requirement for dispatch.

The C-VSIP evaluators use Extdata_local, which can handle both local and 
distributed blocks.  Currently this is handled with either a special 
parallel evaluator, or with distributed get/put.  Neither of these will 
work for the C-VSIP evaluators.  Extdata_local will need to be moved 
from opt/ to core/.

With this patch:
  - all ref-impl tests pass for ref-impl library
  - all reduction tests should pass for optimized library
    (currently re-confirming this).

				-- Jules

-- 
Jules Bergmann
CodeSourcery
jules at codesourcery.com
(650) 331-3385 x705
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: cvsip-rdx.diff
URL: <http://sourcerytools.com/pipermail/vsipl++/attachments/20061211/b7927f13/attachment.ksh>

From jules at codesourcery.com  Mon Dec 11 20:48:10 2006
From: jules at codesourcery.com (Jules Bergmann)
Date: Mon, 11 Dec 2006 15:48:10 -0500
Subject: [patch] Assertion checking for get, put, row, and col
Message-ID: <457DC40A.5060309@codesourcery.com>

patch applied. -- Jules
-- 
Jules Bergmann
CodeSourcery
jules at codesourcery.com
(650) 331-3385 x705
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: assert.diff
URL: <http://sourcerytools.com/pipermail/vsipl++/attachments/20061211/bd0ada87/attachment.ksh>

From jules at codesourcery.com  Tue Dec 12 20:43:54 2006
From: jules at codesourcery.com (Jules Bergmann)
Date: Tue, 12 Dec 2006 15:43:54 -0500
Subject: [patch] Support for arbitrary distributed subset subviews
Message-ID: <457F148A.4090505@codesourcery.com>

This patch adds support for (nearly) arbitrary distributed subset 
subviews, i.e.

    Matrix<> A(...), B(...);
    A = B(Domain<2>(...));

Previously, only subsets that included either 1 element or all the 
elements of distributed dimensions were allowed.

This allows the fftshift operation to work on distributed matrices.

The support is "nearly" arbitrary because subviews of cyclic 
distributions have not been tested yet.  This should work, but may 
require some additional work.  Currently, attempts to take a distributed 
subview of a view with a cyclic distribution result in an unimplemented 
exception.

This patch also includes unit tests for:
  - various 1D and 2D distributed subset cases.
  - the matrix fftshift function.
  - several existing and new functions in domain_utils.hpp.


-- 
Jules Bergmann
CodeSourcery
jules at codesourcery.com
(650) 331-3385 x705
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: subset.diff
URL: <http://sourcerytools.com/pipermail/vsipl++/attachments/20061212/09c221cf/attachment.ksh>

From jules at codesourcery.com  Fri Dec 15 03:45:22 2006
From: jules at codesourcery.com (Jules Bergmann)
Date: Thu, 14 Dec 2006 22:45:22 -0500
Subject: [patch] Extend load_view_as to work with distributed views
Message-ID: <45821A52.4090400@codesourcery.com>

Patch applied.
-- 
Jules Bergmann
CodeSourcery
jules at codesourcery.com
(650) 331-3385 x705
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: lv.diff
URL: <http://sourcerytools.com/pipermail/vsipl++/attachments/20061214/92f675e0/attachment.ksh>

From jules at codesourcery.com  Tue Dec 19 15:34:51 2006
From: jules at codesourcery.com (Jules Bergmann)
Date: Tue, 19 Dec 2006 10:34:51 -0500
Subject: [patch] Misc fixes
Message-ID: <4588069B.8010507@codesourcery.com>

This patch:

* Adds 'Proper_type_of' trait to add const back to expression block 
types.  The const is stripped off by dispatch when calling the C-VSIP 
reduction BE with the optimized library.  This is intended as a work 
around until we remove the requirement that expression block types be const.

* Fix vmmul to work with vectors distributed via a replicated map.

* Install opt/diag and opt/fft directories and headers

* Move examples installation into pkgdatadir/examples
   (in preparation for installation of benchmarks and tutorial
   examples).

Also, I'm planning to move extdata_local.hpp from opt/ to core/.

				-- Jules

-- 
Jules Bergmann
CodeSourcery
jules at codesourcery.com
(650) 331-3385 x705


From jules at codesourcery.com  Tue Dec 19 17:16:50 2006
From: jules at codesourcery.com (Jules Bergmann)
Date: Tue, 19 Dec 2006 12:16:50 -0500
Subject: [vsipl++] [patch] Misc fixes
In-Reply-To: <4588069B.8010507@codesourcery.com>
References: <4588069B.8010507@codesourcery.com>
Message-ID: <45881E82.3050601@codesourcery.com>

Oops, I forgot to attach the patch.  -- Jules

Jules Bergmann wrote:
> This patch:
> 
> * Adds 'Proper_type_of' trait to add const back to expression block 
> types.  The const is stripped off by dispatch when calling the C-VSIP 
> reduction BE with the optimized library.  This is intended as a work 
> around until we remove the requirement that expression block types be 
> const.
> 
> * Fix vmmul to work with vectors distributed via a replicated map.
> 
> * Install opt/diag and opt/fft directories and headers
> 
> * Move examples installation into pkgdatadir/examples
>   (in preparation for installation of benchmarks and tutorial
>   examples).
> 
> Also, I'm planning to move extdata_local.hpp from opt/ to core/.
> 
>                 -- Jules
> 


-- 
Jules Bergmann
CodeSourcery
jules at codesourcery.com
(650) 331-3385 x705
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: misc.diff
URL: <http://sourcerytools.com/pipermail/vsipl++/attachments/20061219/f68c77b2/attachment.ksh>

From jules at codesourcery.com  Tue Dec 19 18:46:57 2006
From: jules at codesourcery.com (Jules Bergmann)
Date: Tue, 19 Dec 2006 13:46:57 -0500
Subject: [patch] PowerPC timebase timer
Message-ID: <458833A1.1040704@codesourcery.com>

This patch adds support for using the PowerPC timebase cycle counter.

This counter is available on PowerPC systems, such as the Cell PPE and 
PowerPC 970 (belgarath).

Patch applied.

				-- Jules

-- 
Jules Bergmann
CodeSourcery
jules at codesourcery.com
(650) 331-3385 x705
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: prof.diff
URL: <http://sourcerytools.com/pipermail/vsipl++/attachments/20061219/1282c10b/attachment.ksh>

From jules at codesourcery.com  Wed Dec 20 12:47:24 2006
From: jules at codesourcery.com (Jules Bergmann)
Date: Wed, 20 Dec 2006 07:47:24 -0500
Subject: [vsipl++] [patch] Misc fixes
In-Reply-To: <4588069B.8010507@codesourcery.com>
References: <4588069B.8010507@codesourcery.com>
Message-ID: <458930DC.5030902@codesourcery.com>

> Also, I'm planning to move extdata_local.hpp from opt/ to core/.

... and rename it to something more sensible.  Ext_data_local is now 
called Ext_data_dist, in the sense that it provides direct data access 
to distributed views (it also handles local views).

Patch applied.

				-- Jules


-- 
Jules Bergmann
CodeSourcery
jules at codesourcery.com
(650) 331-3385 x705
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: edd.diff
URL: <http://sourcerytools.com/pipermail/vsipl++/attachments/20061220/92f03f96/attachment.ksh>

From jules at codesourcery.com  Wed Dec 20 13:57:25 2006
From: jules at codesourcery.com (Jules Bergmann)
Date: Wed, 20 Dec 2006 08:57:25 -0500
Subject: [patch] Guard optimized includes
Message-ID: <45894145.7060909@codesourcery.com>

Adds a check to the optimized headers to make sure they're not 
accidentally included in the reference impl.

This identified three headers that need to be moved from opt to core:
  - proxy_local_block
  - view_cast
  - us_block

I'll move those shortly.

With this patch:
  - all expected tests pass for optimized library (using IPP/MKL)
  - all expected ref-impl tests pass for ref-impl library

Patch applied.

-- 
Jules Bergmann
CodeSourcery
jules at codesourcery.com
(650) 331-3385 x705
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: guard.diff
URL: <http://sourcerytools.com/pipermail/vsipl++/attachments/20061220/4d56e4e4/attachment.ksh>

From jules at codesourcery.com  Wed Dec 20 14:12:19 2006
From: jules at codesourcery.com (Jules Bergmann)
Date: Wed, 20 Dec 2006 09:12:19 -0500
Subject: [patch] Final ref-impl moves
In-Reply-To: <45894145.7060909@codesourcery.com>
References: <45894145.7060909@codesourcery.com>
Message-ID: <458944C3.3010504@codesourcery.com>


> This identified three headers that need to be moved from opt to core:
>  - proxy_local_block
>  - view_cast
>  - us_block
> 
> I'll move those shortly.

Patch applied.

-- 
Jules Bergmann
CodeSourcery
jules at codesourcery.com
(650) 331-3385 x705


From jules at codesourcery.com  Wed Dec 20 21:51:45 2006
From: jules at codesourcery.com (Jules Bergmann)
Date: Wed, 20 Dec 2006 16:51:45 -0500
Subject: [patch] clone_view specializations
Message-ID: <4589B071.5010401@codesourcery.com>

This patch adds specializations of clone_view that take a map object for 
constructing the view.  This allows a view's distribution to be cloned 
as well as it's size, if desired.

Patch applied.

				-- Jules


-- 
Jules Bergmann
CodeSourcery
jules at codesourcery.com
(650) 331-3385 x705
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: clone_view.diff
URL: <http://sourcerytools.com/pipermail/vsipl++/attachments/20061220/48a4ec5c/attachment.ksh>

From don at codesourcery.com  Thu Dec 21 15:49:27 2006
From: don at codesourcery.com (Don McCoy)
Date: Thu, 21 Dec 2006 08:49:27 -0700
Subject: [patch] Parallel version of Scalable SAR application
Message-ID: <458AAD07.7000102@codesourcery.com>

The attached patch modifies the SSAR application to run in parallel.  
Note that a temporary version of fftshift() that works correctly with 
distributed views has been added to kernel1.hpp.   A more efficient 
method of dealing with that is in planning.

To run, make sure LAM is started and type 'make parallel'.  This runs 
the parallel equivalent of 'make check'.

Regards,

-- 
Don McCoy
don (at) CodeSourcery
(888) 776-0262 / (650) 331-3385, x712

-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: ps.changes
URL: <http://sourcerytools.com/pipermail/vsipl++/attachments/20061221/bb8a34df/attachment.ksh>
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: ps.diff
URL: <http://sourcerytools.com/pipermail/vsipl++/attachments/20061221/bb8a34df/attachment-0001.ksh>

From don at codesourcery.com  Fri Dec 22 22:34:28 2006
From: don at codesourcery.com (Don McCoy)
Date: Fri, 22 Dec 2006 15:34:28 -0700
Subject: [patch] Updated copyright notices for optimized implementation
Message-ID: <458C5D74.2030705@codesourcery.com>

This patch mostly affects files in the optimized implementation, 
available under our commercial license and the GPL (i.e.  non-BSD licenses).

A few cases where the @file descriptor was wrong were corrected as well.

Ok to commit?

-- 
Don McCoy
don (at) CodeSourcery
(888) 776-0262 / (650) 331-3385, x712

-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: cn.changes
URL: <http://sourcerytools.com/pipermail/vsipl++/attachments/20061222/24557ac5/attachment.ksh>
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: cn.diff
URL: <http://sourcerytools.com/pipermail/vsipl++/attachments/20061222/24557ac5/attachment-0001.ksh>

From mark at codesourcery.com  Fri Dec 22 22:40:15 2006
From: mark at codesourcery.com (Mark Mitchell)
Date: Fri, 22 Dec 2006 14:40:15 -0800
Subject: [vsipl++] [patch] Updated copyright notices for optimized implementation
In-Reply-To: <458C5D74.2030705@codesourcery.com>
References: <458C5D74.2030705@codesourcery.com>
Message-ID: <458C5ECF.9090807@codesourcery.com>

Don McCoy wrote:

> Ok to commit?

OK, thanks!  Please update the top-level file that Jules created as well.

-- 
Mark Mitchell
CodeSourcery
mark at codesourcery.com
(650) 331-3385 x713


From don at codesourcery.com  Fri Dec 22 23:01:58 2006
From: don at codesourcery.com (Don McCoy)
Date: Fri, 22 Dec 2006 16:01:58 -0700
Subject: [patch] Renamed GPL license
Message-ID: <458C63E6.5020203@codesourcery.com>

Committed.

-- 
Don McCoy
don (at) CodeSourcery
(888) 776-0262 / (650) 331-3385, x712

-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: license.diff
URL: <http://sourcerytools.com/pipermail/vsipl++/attachments/20061222/9f2b2de1/attachment.ksh>

From don at codesourcery.com  Fri Dec 22 23:07:34 2006
From: don at codesourcery.com (Don McCoy)
Date: Fri, 22 Dec 2006 16:07:34 -0700
Subject: [patch] New license file
Message-ID: <458C6536.9070706@codesourcery.com>

This patch contains the new license file, replacing the previous one, 
which is now renamed LICENSE.GPL.

I committed the last change in order to keep SVN from getting confused, 
but I will wait for confirmation before committing this change.

-- 
Don McCoy
don (at) CodeSourcery
(888) 776-0262 / (650) 331-3385, x712

-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: license2.diff
URL: <http://sourcerytools.com/pipermail/vsipl++/attachments/20061222/48da1bb2/attachment.ksh>

From mark at codesourcery.com  Sat Dec 23 01:41:06 2006
From: mark at codesourcery.com (Mark Mitchell)
Date: Fri, 22 Dec 2006 17:41:06 -0800
Subject: [vsipl++] [patch] New license file
In-Reply-To: <458C6536.9070706@codesourcery.com>
References: <458C6536.9070706@codesourcery.com>
Message-ID: <458C8932.5030108@codesourcery.com>

Don McCoy wrote:
> This patch contains the new license file, replacing the previous one,
> which is now renamed LICENSE.GPL.
> 
> I committed the last change in order to keep SVN from getting confused,
> but I will wait for confirmation before committing this change.

OK, thanks.

-- 
Mark Mitchell
CodeSourcery
mark at codesourcery.com
(650) 331-3385 x713


From don at codesourcery.com  Sat Dec 23 17:46:18 2006
From: don at codesourcery.com (Don McCoy)
Date: Sat, 23 Dec 2006 10:46:18 -0700
Subject: [patch] Include files in tests/
Message-ID: <458D6B6A.1070102@codesourcery.com>

This patch fixes the only two errors in the test suite for 
ParallelBuiltin64.

Committed.

-- 
Don McCoy
don (at) CodeSourcery
(888) 776-0262 / (650) 331-3385, x712

-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: th.diff
URL: <http://sourcerytools.com/pipermail/vsipl++/attachments/20061223/1cc9e144/attachment.ksh>

From sonho4 at comcast.net  Thu Dec 28 21:09:21 2006
From: sonho4 at comcast.net (sonho4 at comcast.net)
Date: Thu, 28 Dec 2006 21:09:21 +0000
Subject: I'm having trouble using Sourcery VSIPL++
Message-ID: <122820062109.23725.4594328100098A8900005CAD2207000953CB010802019C@comcast.net>


1) I downloaded the VSIPL++ Binary package (IA32 Microsoft Windows XP), sourceryvsipl++-1.2-win-x86 (WinZip file), from http://www.codesourcery.com/vsiplplusplus/1.2/download.html to my WinXP laptop computer. 

2) Also, I installed the Intel(R) C++ Compiler for 32-bit applications, Version 9.1 (evaluation copy) on my laptop computer.

3) I unzipped the VSIPL++ binary package.

4) I tried to compile and run /share/sourceryvsipl++/example1.cpp without success.

Please look at the following compilation output and tell me what's wrong. 

The last error showed the header file, mkl_cblas.h, was not found. 
The VSIPL++ binary package does not contain mkl_cblas.h. Should I go somewhere else to get this missing header file?

C:\SourceryVSIPL++\share\sourceryvsipl++>make
icl -DVSIP_IMPL_PAR_SERVICE=0 -DVSIP_IMPL_IPP_FFT=1 -DVSIP_IMPL_USE_CBLAS=2 -I.
  /Qcxx-features /Qvc8   -c -o example1.o example1.cpp
Intel(R) C++ Compiler for 32-bit applications, Version 9.1    Build 20060706Z Pa
ckage ID: W_CC_C_9.1.028
Copyright (C) 1985-2006 Intel Corporation.  All rights reserved.
icl: Command line warning: overriding '/Qvc6' with '/Qvc8'
30 DAY EVALUATION LICENSE
example1.cpp
icl: NOTE: The evaluation period for this product ends on 25-jan-2007 UTC.
.\vsip/impl/aligned_allocator.hpp(49): error: namespace "std" has no member "size_t"
    typedef std::size_t    size_type;
                 ^
.\vsip/impl/aligned_allocator.hpp(50): error: namespace "std" has no member "ptrdiff_t"
    typedef std::ptrdiff_t difference_type;
                 ^
.\vsip/impl/domain-utils.hpp(198): error: namespace "std" has no member "max"
    index_type first = std::max(dom1.first(),     dom2.first());
                            ^
.\vsip/impl/domain-utils.hpp(199): error: namespace "std" has no member "min"
    index_type last  = std::min(dom1.impl_last(), dom2.impl_last());
                            ^
.\vsip/impl/fns_scalar.hpp(42): error: namespace "std" has no member "acos"
  using std::acos;
             ^
.\vsip/impl/fns_scalar.hpp(44): error: namespace "std" has no member "asin"
  using std::asin;
             ^
.\vsip/impl/fns_scalar.hpp(45): error: namespace "std" has no member "atan"
  using std::atan;
             ^
.\vsip/impl/fns_scalar.hpp(51): error: namespace "std" has no member "ceil"
  using std::ceil;
             ^
.\vsip/impl/fns_scalar.hpp(74): error: no instance of function template "std::lo
g" matches the argument list
            argument types are: (double)
    return exp(d * log(10.0));
                   ^
.\vsip/impl/fns_scalar.hpp(74): error: no instance of function template "std::ex
p" matches the argument list
            argument types are: (<error-type>)
    return exp(d * log(10.0));
           ^
.\vsip/impl/fns_scalar.hpp(97): error: no instance of function template "std::lo
g" matches the argument list
            argument types are: (long double)
    return exp(ld * log(10.0l));
                    ^
.\vsip/impl/fns_scalar.hpp(97): error: no instance of function template "std::ex
p" matches the argument list
            argument types are: (<error-type>)
    return exp(ld * log(10.0l));
           ^
.\vsip/impl/fns_scalar.hpp(112): error: namespace "std" has no member "floor"
  using std::floor;
             ^
.\vsip/impl/fns_scalar.hpp(170): error: namespace "std" has no member "tan"
  using std::tan;
             ^
.\vsip/impl/fns_scalar.hpp(171): error: namespace "std" has no member "tanh"
  using std::tanh;
             ^
.\vsip/impl/fns_scalar.hpp(177): error: namespace "std" has no member "atan2"
  using std::atan2;
             ^
.\vsip/impl/fns_scalar.hpp(187): error: namespace "std" has no member "div"
  using std::div;
             ^
.\vsip/impl/fns_scalar.hpp(188): error: namespace "std" has no member "fmod"
  using std::fmod;
             ^
.\vsip/impl/fns_scalar.hpp(239): error: namespace "std" has no member "max"
  using std::max;
             ^
.\vsip/impl/fns_scalar.hpp(253): error: namespace "std" has no member "min"
  using std::min;
             ^
.\vsip/impl/lapack.hpp(83): catastrophic error: could not open source file "mkl_cblas.h"
  #  include <mkl_cblas.h>
                          ^
compilation aborted for example1.cpp (code 4)
make: *** [example1.o] Error 4


Thanks,

Son Ho
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://sourcerytools.com/pipermail/vsipl++/attachments/20061228/3d632a99/attachment.html>

From sonho4 at comcast.net  Thu Dec 28 22:24:56 2006
From: sonho4 at comcast.net (sonho4 at comcast.net)
Date: Thu, 28 Dec 2006 22:24:56 +0000
Subject: I'm having trouble using Sourcery VSIPL++ - with Cygwin GNU g++ compiler 3.4.4
Message-ID: <122820062224.2383.459444380001E9B70000094F2206998499CB010802019C@comcast.net>

Earlier I tried to comiple and build VSIPL++ example1.cpp with Intel Compiler without sucess.

Now, I use Cygwin GNU g++ compiler and ran into different problems.
 
1) I downloaded the VSIPL++ Binary package (IA32 Microsoft Windows XP), sourceryvsipl++-1.2-win-x86 (WinZip file), from http://www.codesourcery.com/vsiplplusplus/1.2/download.html to my WinXP laptop computer. 
 
2) Also, I installed the Cygwin g++ compiler version 3.4.4  on my laptop computer.
 
3) I unzipped the VSIPL++ binary package.
 
4) I tried to compile and run /share/sourceryvsipl++/example1.cpp without success.
 
Please look at the following compilation output and tell me what's wrong (got example1.o ok but encountered the linker error (see below.)

bash-3.2$ pwd
/cygdrive/c/SourceryVSIPL++/share/sourceryvsipl++
bash-3.2$ pwd
/cygdrive/c/SourceryVSIPL++/share/sourceryvsipl++
bash-3.2$ ls
Copy of Makefile  Makefile  Makefile.bak  example1.cpp  fft.cpp  vsip  vsip_csl
bash-3.2$ g++ -c -I. example1.cpp
bash-3.2$ ls *.o
example1.o
bash-3.2$ g++ -o example1 -L/cygdrive/c/SourceryVSIPL++/lib -llibvsip_csl -llibsvpp
/usr/lib/gcc/i686-pc-cygwin/3.4.4/../../../libcygwin.a(libcmain.o):(.text+0xab):
 undefined reference to `_WinMain at 16'
collect2: ld returned 1 exit status

Thanks,

Son Ho
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://sourcerytools.com/pipermail/vsipl++/attachments/20061228/5720b974/attachment.html>

From stefan at codesourcery.com  Thu Dec 28 22:42:37 2006
From: stefan at codesourcery.com (Stefan Seefeld)
Date: Thu, 28 Dec 2006 17:42:37 -0500
Subject: [vsipl++] I'm having trouble using Sourcery VSIPL++
In-Reply-To: <122820062109.23725.4594328100098A8900005CAD2207000953CB010802019C@comcast.net>
References: <122820062109.23725.4594328100098A8900005CAD2207000953CB010802019C@comcast.net>
Message-ID: <4594485D.9070105@codesourcery.com>

sonho4 at comcast.net wrote:
>  
> 1) I downloaded the VSIPL++ Binary package (IA32 Microsoft Windows XP),
> sourceryvsipl++-1.2-win-x86 (WinZip file), from
> http://www.codesourcery.com/vsiplplusplus/1.2/download.html to my WinXP
> laptop computer.
>  
> 2) Also, I installed the Intel(R) C++ Compiler for 32-bit applications,
> Version 9.1 (evaluation copy) on my laptop computer.
>  
> 3) I unzipped the VSIPL++ binary package.
>  
> 4) I tried to compile and run /share/sourceryvsipl++/example1.cpp
> *without success.*

The Makefile in that directory assumes a UNIX-like environment with
tools such as pkg-config to extract build parameters from pre-built
and packaged configuration files. Unfortunately, that strategy isn't
supported on Windows, where these tools don't exist.

Instead, it is assumed that you use some platform-specific build
environment (such as the MSVC IDE), where you manually add build
parameters, such as installation paths for third-party libraries
that are used in conjunction with Sourcery VSIPL++.

We are working on ways to enhance this for future releases.

> Please look at the following compilation output and tell me what's wrong.
>  
> The last error showed the header file, mkl_cblas.h, was not found.
> The *VSIPL++ binary package does not contain mkl_cblas.h*. Should I go
> somewhere else to get this missing header file?

The Windows version of Sourcery VSIPL++ is built using Intel's
IPP and MKL libraries (see
http://www.codesourcery.com/public/vsiplplusplus/sourceryvsipl++-1.2/quickstart/chap-installation.html#id287819
for more information on these).
We are looking into how to remove that restriction, i.e. to make IPP and MKL
optional, like they are on other platforms.

Regards,
		Stefan

-- 
Stefan Seefeld
CodeSourcery
stefan at codesourcery.com
(650) 331-3385 x718


From sonho4 at comcast.net  Fri Dec 29 05:02:05 2006
From: sonho4 at comcast.net (sonho4 at comcast.net)
Date: Fri, 29 Dec 2006 05:02:05 +0000
Subject: [vsipl++] I'm having trouble using Sourcery VSIPL++ - UNIX-like environment with Intel(R) C++ Compiler 9.1
Message-ID: <122920060502.18855.4594A14D00036864000049A72209229927CB010802019C@comcast.net>

Thanks for the response to my VSIPL++ questions.

But I also tried to compile and build /share/sourceryvsipl++/example1.cpp in  a UNIX-like environment (i.e. Cygwin/X installed on WinXP laptop computer) and ran into the same problems.

Method 1: Using pkg-config via UNIX-like command line failed. Any ideas?
Method 2: Using pkg-config via Makefile in a UNIX-like environment failed. Any ideas?

Results( Method 1): Using pkg-config via UNIX-like command line

bash-3.2$ export PKG_CONFIG_PATH=/cygdrive/c/SourceryVSIPL++/lib/pkgconfig
bash-3.2$ echo $PKG_CONFIG_PATH
/cygdrive/c/SourceryVSIPL++/lib/pkgconfig
bash-3.2$ pwd
/cygdrive/c/SourceryVSIPL++/share/sourceryvsipl++
bash-3.2$ ls
Copy of Makefile  Makefile.bak  example1.o  vsip
Makefile          example1.cpp  fft.cpp     vsip_csl
bash-3.2$ which pkg-config      
/usr/bin/pkg-config
bash-3.2$ pkg-config --cflags vsipl++
-DVSIP_IMPL_PAR_SERVICE=0 -DVSIP_IMPL_IPP_FFT=1 -DVSIP_IMPL_USE_CBLAS=2 -I.
bash-3.2$ pkg-config --variable=cxx vsipl++
icl
bash-3.2$ `pkg-config --variable=cxx vsipl++` -c `pkg-config --cflags vsipl++`
 -I. example1.cpp
Intel(R) C++ Compiler for 32-bit applications, Version 9.1    Build 20060706Z Pa
ckage ID: W_CC_C_9.1.028
Copyright (C) 1985-2006 Intel Corporation.  All rights reserved.
30 DAY EVALUATION LICENSE
example1.cpp
icl: NOTE: The evaluation period for this product ends on 25-jan-2007 UTC.
.\vsip/impl/aligned_allocator.hpp(49): error: namespace "std" has no member "size_t"
    typedef std::size_t    size_type;
                 ^
.\vsip/impl/aligned_allocator.hpp(50): error: namespace "std" has no member "ptrdiff_t"
    typedef std::ptrdiff_t difference_type;
                 ^
.\vsip/impl/copy_chain.hpp(72): error: identifier "back_inserter" is undefined
              back_inserter(this->chain_));
              ^
.\vsip/impl/domain-utils.hpp(198): error: namespace "std" has no member "max"
    index_type first = std::max(dom1.first(),     dom2.first());
                            ^
.\vsip/impl/domain-utils.hpp(199): error: namespace "std" has no member "min"
    index_type last  = std::min(dom1.impl_last(), dom2.impl_last());
                            ^
.\vsip/impl/fns_scalar.hpp(42): error: namespace "std" has no member "acos"
  using std::acos;
             ^
.\vsip/impl/fns_scalar.hpp(44): error: namespace "std" has no member "asin"
  using std::asin;
             ^
.\vsip/impl/fns_scalar.hpp(45): error: namespace "std" has no member "atan"
  using std::atan;
             ^
.\vsip/impl/fns_scalar.hpp(51): error: namespace "std" has no member "ceil"
  using std::ceil;
             ^
.\vsip/impl/fns_scalar.hpp(74): error: no instance of function template "std::lo
g" matches the argument list
            argument types are: (double)
    return exp(d * log(10.0));
                   ^
.\vsip/impl/fns_scalar.hpp(74): error: no instance of function template "std::ex
p" matches the argument list
            argument types are: (<error-type>)
    return exp(d * log(10.0));
           ^
.\vsip/impl/fns_scalar.hpp(97): error: no instance of function template "std::lo
g" matches the argument list
            argument types are: (long double)
    return exp(ld * log(10.0l));
                    ^
.\vsip/impl/fns_scalar.hpp(97): error: no instance of function template "std::ex
p" matches the argument list
            argument types are: (<error-type>)
    return exp(ld * log(10.0l));
           ^
.\vsip/impl/fns_scalar.hpp(112): error: namespace "std" has no member "floor"
  using std::floor;
             ^
.\vsip/impl/fns_scalar.hpp(170): error: namespace "std" has no member "tan"
  using std::tan;
             ^
.\vsip/impl/fns_scalar.hpp(171): error: namespace "std" has no member "tanh"
  using std::tanh;
             ^
.\vsip/impl/fns_scalar.hpp(177): error: namespace "std" has no member "atan2"
  using std::atan2;
             ^
.\vsip/impl/fns_scalar.hpp(187): error: namespace "std" has no member "div"
  using std::div;
             ^
.\vsip/impl/fns_scalar.hpp(188): error: namespace "std" has no member "fmod"
  using std::fmod;
             ^
.\vsip/impl/fns_scalar.hpp(239): error: namespace "std" has no member "max"
  using std::max;
             ^
.\vsip/impl/fns_scalar.hpp(253): error: namespace "std" has no member "min"
  using std::min;
             ^
.\vsip/impl/lapack.hpp(83): catastrophic error: could not open source file "mkl_
cblas.h"
  #  include <mkl_cblas.h>
                          ^
compilation aborted for example1.cpp (code 4)

Results (Method 2): Using pkg-config via Makefile in a UNIX-like environment 

bash-3.2$ pwd
/cygdrive/c/SourceryVSIPL++/share/sourceryvsipl++
bash-3.2$ make
icl -DVSIP_IMPL_PAR_SERVICE=0 -DVSIP_IMPL_IPP_FFT=1 -DVSIP_IMPL_USE_CBLAS=2 -I.
  /Qcxx-features /Qvc8   -c -o example1.o example1.cpp
Intel(R) C++ Compiler for 32-bit applications, Version 9.1    Build 20060706Z Pa
ckage ID: W_CC_C_9.1.028
Copyright (C) 1985-2006 Intel Corporation.  All rights reserved.
icl: Command line warning: overriding '/Qvc6' with '/Qvc8'
30 DAY EVALUATION LICENSE
example1.cpp
icl: NOTE: The evaluation period for this product ends on 25-jan-2007 UTC.
.\vsip/impl/aligned_allocator.hpp(49): error: namespace "std" has no member "size_t"
    typedef std::size_t    size_type;
                 ^
.\vsip/impl/aligned_allocator.hpp(50): error: namespace "std" has no member "ptrdiff_t"
    typedef std::ptrdiff_t difference_type;
                 ^
.\vsip/impl/domain-utils.hpp(198): error: namespace "std" has no member "max"
    index_type first = std::max(dom1.first(),     dom2.first());
                            ^
.\vsip/impl/domain-utils.hpp(199): error: namespace "std" has no member "min"
    index_type last  = std::min(dom1.impl_last(), dom2.impl_last());
                            ^
.\vsip/impl/fns_scalar.hpp(42): error: namespace "std" has no member "acos"
  using std::acos;
             ^
.\vsip/impl/fns_scalar.hpp(44): error: namespace "std" has no member "asin"
  using std::asin;
             ^
.\vsip/impl/fns_scalar.hpp(45): error: namespace "std" has no member "atan"
  using std::atan;
             ^
.\vsip/impl/fns_scalar.hpp(51): error: namespace "std" has no member "ceil"
  using std::ceil;
             ^
.\vsip/impl/fns_scalar.hpp(74): error: no instance of function template "std::lo
g" matches the argument list
            argument types are: (double)
    return exp(d * log(10.0));
                   ^
.\vsip/impl/fns_scalar.hpp(74): error: no instance of function template "std::ex
p" matches the argument list
            argument types are: (<error-type>)
    return exp(d * log(10.0));
           ^
.\vsip/impl/fns_scalar.hpp(97): error: no instance of function template "std::lo
g" matches the argument list
            argument types are: (long double)
    return exp(ld * log(10.0l));
                    ^
.\vsip/impl/fns_scalar.hpp(97): error: no instance of function template "std::ex
p" matches the argument list
            argument types are: (<error-type>)
    return exp(ld * log(10.0l));
           ^
.\vsip/impl/fns_scalar.hpp(112): error: namespace "std" has no member "floor"
  using std::floor;
             ^
.\vsip/impl/fns_scalar.hpp(170): error: namespace "std" has no member "tan"
  using std::tan;
             ^
.\vsip/impl/fns_scalar.hpp(171): error: namespace "std" has no member "tanh"
  using std::tanh;
             ^
.\vsip/impl/fns_scalar.hpp(177): error: namespace "std" has no member "atan2"
  using std::atan2;
             ^
.\vsip/impl/fns_scalar.hpp(187): error: namespace "std" has no member "div"
  using std::div;
             ^
.\vsip/impl/fns_scalar.hpp(188): error: namespace "std" has no member "fmod"
  using std::fmod;
             ^
.\vsip/impl/fns_scalar.hpp(239): error: namespace "std" has no member "max"
  using std::max;
             ^
.\vsip/impl/fns_scalar.hpp(253): error: namespace "std" has no member "min"
  using std::min;
             ^
.\vsip/impl/lapack.hpp(83): catastrophic error: could not open source file "mkl_
cblas.h"
  #  include <mkl_cblas.h>
                          ^
compilation aborted for example1.cpp (code 4)
make: *** [example1.o] Error 4


Thanks,

Son Ho


-------------- Original message -------------- 
From: Stefan Seefeld <stefan at codesourcery.com> 

> sonho4 at comcast.net wrote: 
> > 
> > 1) I downloaded the VSIPL++ Binary package (IA32 Microsoft Windows XP), 
> > sourceryvsipl++-1.2-win-x86 (WinZip file), from 
> > http://www.codesourcery.com/vsiplplusplus/1.2/download.html to my WinXP 
> > laptop computer. 
> > 
> > 2) Also, I installed the Intel(R) C++ Compiler for 32-bit applications, 
> > Version 9.1 (evaluation copy) on my laptop computer. 
> > 
> > 3) I unzipped the VSIPL++ binary package. 
> > 
> > 4) I tried to compile and run /share/sourceryvsipl++/example1.cpp 
> > *without success.* 
> 
> The Makefile in that directory assumes a UNIX-like environment with 
> tools such as pkg-config to extract build parameters from pre-built 
> and packaged configuration files. Unfortunately, that strategy isn't 
> supported on Windows, where these tools don't exist. 
> 
> Instead, it is assumed that you use some platform-specific build 
> environment (such as the MSVC IDE), where you manually add build 
> parameters, such as installation paths for third-party libraries 
> that are used in conjunction with Sourcery VSIPL++. 
> 
> We are working on ways to enhance this for future releases. 
> 
> > Please look at the following compilation output and tell me what's wrong. 
> > 
> > The last error showed the header file, mkl_cblas.h, was not found. 
> > The *VSIPL++ binary package does not contain mkl_cblas.h*. Should I go 
> > somewhere else to get this missing header file? 
> 
> The Windows version of Sourcery VSIPL++ is built using Intel's 
> IPP and MKL libraries (see 
> http://www.codesourcery.com/public/vsiplplusplus/sourceryvsipl++-1.2/quickstart/ 
> chap-installation.html#id287819 
> for more information on these). 
> We are looking into how to remove that restriction, i.e. to make IPP and MKL 
> optional, like they are on other platforms. 
> 
> Regards, 
> Stefan 
> 
> -- 
> Stefan Seefeld 
> CodeSourcery 
> stefan at codesourcery.com 
> (650) 331-3385 x718 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://sourcerytools.com/pipermail/vsipl++/attachments/20061229/05f50ddc/attachment.html>

