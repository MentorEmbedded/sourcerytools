Index: tests/GNUmakefile.inc.in
===================================================================
RCS file: /home/cvs/Repository/vpp/tests/GNUmakefile.inc.in,v
retrieving revision 1.5
diff -u -r1.5 GNUmakefile.inc.in
--- tests/GNUmakefile.inc.in	1 Dec 2005 14:43:17 -0000	1.5
+++ tests/GNUmakefile.inc.in	23 Dec 2005 03:14:30 -0000
@@ -12,6 +12,11 @@
 # Variables
 ########################################################################
 
+pkgconfig:= PKG_CONFIG_PATH=$(prefix)/lib/pkgconfig \
+              pkg-config vsipl++$(suffix) \
+              --define-variable=prefix=$(prefix)
+
+
 tests_qmtest_extensions = \
 	tests/QMTest/vpp_database.py \
 	tests/QMTest/classes.qmc
@@ -23,5 +28,13 @@
 check::	libs $(tests_qmtest_extensions)
 	cd tests && qmtest run
 
+check-installed::
+	cat tests/context-installed.pre | \
+          sed -e "s|@CXX_@|`$(pkgconfig) --variable=cxx`|" | \
+          sed -e "s|@CPPFLAGS_@|`$(pkgconfig) --variable=cppflags`|" | \
+          sed -e "s|@CXXFLAGS_@|`$(pkgconfig) --variable=cxxflags`|" | \
+          sed -e "s|@LIBS_@|`$(pkgconfig) --libs`|" > tests/context-installed
+	cd tests && qmtest run -C context-installed
+
 tests/QMTest/%: $(srcdir)/tests/QMTest/%
 	cp $< $@
Index: tests/context-installed.pre.in
===================================================================
RCS file: tests/context-installed.pre.in
diff -N tests/context-installed.pre.in
--- /dev/null	1 Jan 1970 00:00:00 -0000
+++ tests/context-installed.pre.in	23 Dec 2005 03:14:30 -0000
@@ -0,0 +1,8 @@
+CompilerTable.languages= cxx
+CompilerTable.cxx_kind= GCC
+CompilerTable.cxx_path= @CXX_@
+CompilerTable.cxx_options= @CPPFLAGS_@ @CXXFLAGS_@
+CompilerTable.cxx_ldflags= @LIBS_@
+GPPInit.options=
+GPPInit.library_directories= 
+DejaGNUTest.target= @host@
