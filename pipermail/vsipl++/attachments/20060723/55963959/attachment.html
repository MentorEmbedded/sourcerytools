<tt>
&lt;html&gt;&lt;head&gt;&lt;meta&nbsp;http-equiv=&quot;Content-Type&quot;&nbsp;content=&quot;text/html;&nbsp;charset=ISO-8859-1&quot;&gt;&lt;title&gt;Chapter 4. Performance&lt;/title&gt;&lt;link&nbsp;rel=&quot;stylesheet&quot;&nbsp;href=&quot;cs.css&quot;&nbsp;type=&quot;text/css&quot;&gt;&lt;meta&nbsp;name=&quot;generator&quot;&nbsp;content=&quot;DocBook&nbsp;XSL&nbsp;Stylesheets&nbsp;V1.69.1&quot;&gt;&lt;link&nbsp;rel=&quot;start&quot;&nbsp;href=&quot;index.html&quot;&nbsp;title=&quot;Sourcery&nbsp;VSIPL++&quot;&gt;&lt;link&nbsp;rel=&quot;up&quot;&nbsp;href=&quot;index.html&quot;&nbsp;title=&quot;Sourcery&nbsp;VSIPL++&quot;&gt;&lt;link&nbsp;rel=&quot;prev&quot;&nbsp;href=&quot;user-defined-blocks.html&quot;&nbsp;title=&quot;User-defined&nbsp;blocks&quot;&gt;&lt;link&nbsp;rel=&quot;next&quot;&nbsp;href=&quot;application-profiling.html&quot;&nbsp;title=&quot;Application&nbsp;Profiling&quot;&gt;&lt;/head&gt;&lt;body&nbsp;bgcolor=&quot;white&quot;&nbsp;text=&quot;black&quot;&nbsp;link=&quot;#0000FF&quot;&nbsp;vlink=&quot;#840084&quot;&nbsp;alink=&quot;#0000FF&quot;&gt;&lt;div&nbsp;class=&quot;navheader&quot;&gt;&lt;table&nbsp;width=&quot;100%&quot;&nbsp;summary=&quot;Navigation&nbsp;header&quot;&gt;&lt;tr&gt;&lt;th&nbsp;colspan=&quot;3&quot;&nbsp;align=&quot;center&quot;&gt;Chapter 4. Performance&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&nbsp;width=&quot;20%&quot;&nbsp;align=&quot;left&quot;&gt;&lt;a&nbsp;accesskey=&quot;p&quot;&nbsp;href=&quot;user-defined-blocks.html&quot;&gt;Prev&lt;/a&gt; &lt;/td&gt;&lt;th&nbsp;width=&quot;60%&quot;&nbsp;align=&quot;center&quot;&gt; &lt;/th&gt;&lt;td&nbsp;width=&quot;20%&quot;&nbsp;align=&quot;right&quot;&gt; &lt;a&nbsp;accesskey=&quot;n&quot;&nbsp;href=&quot;application-profiling.html&quot;&gt;Next&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;hr&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;chapter&quot;&nbsp;lang=&quot;en&quot;&gt;&lt;div&nbsp;class=&quot;titlepage&quot;&gt;&lt;div&gt;&lt;div&gt;&lt;h2&nbsp;class=&quot;title&quot;&gt;&lt;a&nbsp;name=&quot;id312459&quot;&gt;&lt;/a&gt;Chapter 4. Performance&lt;/h2&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;toc&quot;&gt;&lt;p&gt;&lt;b&gt;Table&nbsp;of&nbsp;Contents&lt;/b&gt;&lt;/p&gt;&lt;dl&gt;&lt;dt&gt;&lt;span&nbsp;class=&quot;section&quot;&gt;&lt;a&nbsp;href=&quot;ch04.html#library-profiling&quot;&gt;Library&nbsp;Profiling&lt;/a&gt;&lt;/span&gt;&lt;/dt&gt;&lt;dd&gt;&lt;dl&gt;&lt;dt&gt;&lt;span&nbsp;class=&quot;section&quot;&gt;&lt;a&nbsp;href=&quot;ch04.html#configuration&quot;&gt;Configuration&nbsp;Options&lt;/a&gt;&lt;/span&gt;&lt;/dt&gt;&lt;dt&gt;&lt;span&nbsp;class=&quot;section&quot;&gt;&lt;a&nbsp;href=&quot;ch04.html#accumulating-profile-data&quot;&gt;Accumulating&nbsp;Profile&nbsp;Data&lt;/a&gt;&lt;/span&gt;&lt;/dt&gt;&lt;dt&gt;&lt;span&nbsp;class=&quot;section&quot;&gt;&lt;a&nbsp;href=&quot;ch04.html#trace-profile-data&quot;&gt;Trace&nbsp;Profile&nbsp;Data&lt;/a&gt;&lt;/span&gt;&lt;/dt&gt;&lt;dt&gt;&lt;span&nbsp;class=&quot;section&quot;&gt;&lt;a&nbsp;href=&quot;ch04.html#performance-api&quot;&gt;Performance&nbsp;API&lt;/a&gt;&lt;/span&gt;&lt;/dt&gt;&lt;/dl&gt;&lt;/dd&gt;&lt;dt&gt;&lt;span&nbsp;class=&quot;section&quot;&gt;&lt;a&nbsp;href=&quot;application-profiling.html&quot;&gt;Application&nbsp;Profiling&lt;/a&gt;&lt;/span&gt;&lt;/dt&gt;&lt;/dl&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;section&quot;&nbsp;lang=&quot;en&quot;&gt;&lt;div&nbsp;class=&quot;titlepage&quot;&gt;&lt;div&gt;&lt;div&gt;&lt;h2&nbsp;class=&quot;title&quot;&nbsp;style=&quot;clear:&nbsp;both&quot;&gt;&lt;a&nbsp;name=&quot;library-profiling&quot;&gt;&lt;/a&gt;Library&nbsp;Profiling&lt;/h2&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sourcery&nbsp;VSIPL++&nbsp;provides&nbsp;some&nbsp;features&nbsp;that&nbsp;help&nbsp;speed&nbsp;application&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;development&nbsp;by&nbsp;helping&nbsp;you&nbsp;locate&nbsp;and&nbsp;quantify&nbsp;the&nbsp;expensive&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;computations&nbsp;in&nbsp;your&nbsp;algorithm.&nbsp;&nbsp;Built-in&nbsp;profiling&nbsp;capabilities,&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;when&nbsp;enabled,&nbsp;provide&nbsp;timing&nbsp;data&nbsp;for&nbsp;many&nbsp;signal&nbsp;processing&nbsp;functions,&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;such&nbsp;as&nbsp;FFT's,&nbsp;as&nbsp;well&nbsp;as&nbsp;common&nbsp;linear&nbsp;algebra&nbsp;computations&nbsp;like&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matrix&nbsp;multiplication&nbsp;and&nbsp;addition.&nbsp;&nbsp;A&nbsp;full&nbsp;listing&nbsp;of&nbsp;functions&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;covered&nbsp;is&nbsp;shown&nbsp;in&nbsp;the&nbsp;table&nbsp;below.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/p&gt;&lt;p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;profiler&nbsp;operates&nbsp;in&nbsp;two&nbsp;modes.&nbsp;&nbsp;In&nbsp;'trace'&nbsp;mode,&nbsp;the&nbsp;time&nbsp;spent&nbsp;in<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;each&nbsp;function&nbsp;is&nbsp;stored&nbsp;separately&nbsp;and&nbsp;presented&nbsp;in&nbsp;chronological&nbsp;order.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;mode&nbsp;is&nbsp;preferred&nbsp;when&nbsp;a&nbsp;highly&nbsp;detailed&nbsp;view&nbsp;of&nbsp;program&nbsp;execution<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;is&nbsp;desired.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;In&nbsp;'accumulate'&nbsp;mode,&nbsp;the&nbsp;times&nbsp;and&nbsp;opcounts&nbsp;are&nbsp;summed&nbsp;so&nbsp;that&nbsp;an&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;average&nbsp;runtime&nbsp;and&nbsp;MFLOP/s&nbsp;for&nbsp;the&nbsp;function&nbsp;can&nbsp;be&nbsp;computed.&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;is&nbsp;desirable&nbsp;when&nbsp;investigating&nbsp;a&nbsp;specific&nbsp;function's&nbsp;performance.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/p&gt;&lt;div&nbsp;class=&quot;table&quot;&gt;&lt;a&nbsp;name=&quot;id305515&quot;&gt;&lt;/a&gt;&lt;p&nbsp;class=&quot;title&quot;&gt;&lt;b&gt;Table 4.1. Functions&nbsp;Profiled&lt;/b&gt;&lt;/p&gt;&lt;table&nbsp;summary=&quot;Functions&nbsp;Profiled&quot;&nbsp;border=&quot;0&quot;&gt;&lt;colgroup&gt;&lt;col&gt;&lt;col&gt;&lt;/colgroup&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Section&lt;/th&gt;&lt;th&gt;Object/Function&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;code&nbsp;class=&quot;code&quot;&gt;signal&lt;/code&gt;&lt;/td&gt;&lt;td&gt;Convolution&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&nbsp;class=&quot;code&quot;&gt;signal&lt;/code&gt;&lt;/td&gt;&lt;td&gt;Correlation&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&nbsp;class=&quot;code&quot;&gt;signal&lt;/code&gt;&lt;/td&gt;&lt;td&gt;Fft&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&nbsp;class=&quot;code&quot;&gt;signal&lt;/code&gt;&lt;/td&gt;&lt;td&gt;Fir&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&nbsp;class=&quot;code&quot;&gt;signal&lt;/code&gt;&lt;/td&gt;&lt;td&gt;Iir&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/div&gt;&lt;p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;See&nbsp;the&nbsp;file&nbsp;&quot;profiling.txt&quot;&nbsp;for&nbsp;a&nbsp;detailed&nbsp;explanation&nbsp;of&nbsp;the&nbsp;profiler<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;output&nbsp;for&nbsp;each&nbsp;of&nbsp;the&nbsp;functions&nbsp;above.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/p&gt;&lt;div&nbsp;class=&quot;section&quot;&nbsp;lang=&quot;en&quot;&gt;&lt;div&nbsp;class=&quot;titlepage&quot;&gt;&lt;div&gt;&lt;div&gt;&lt;h3&nbsp;class=&quot;title&quot;&gt;&lt;a&nbsp;name=&quot;configuration&quot;&gt;&lt;/a&gt;Configuration&nbsp;Options&lt;/h3&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A&nbsp;timer&nbsp;is&nbsp;required&nbsp;to&nbsp;obtain&nbsp;the&nbsp;profile&nbsp;data.&nbsp;&nbsp;For&nbsp;profiling&nbsp;to&nbsp;be<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;useful,&nbsp;the&nbsp;timer&nbsp;should&nbsp;have&nbsp;high&nbsp;resolution&nbsp;and&nbsp;low&nbsp;overhead,&nbsp;such<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;as&nbsp;the&nbsp;Pentium&nbsp;and&nbsp;x86_64&nbsp;time-stamp&nbsp;counters.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;When&nbsp;building&nbsp;the&nbsp;library&nbsp;from&nbsp;source,&nbsp;you&nbsp;should&nbsp;enable&nbsp;a&nbsp;timer&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;suitable&nbsp;for&nbsp;your&nbsp;particular&nbsp;platform&nbsp;along&nbsp;with&nbsp;the&nbsp;profiler&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;itself.&nbsp;&nbsp;These&nbsp;may&nbsp;be&nbsp;subsequently&nbsp;disabled&nbsp;for&nbsp;the&nbsp;production<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;version&nbsp;of&nbsp;the&nbsp;code&nbsp;without&nbsp;altering&nbsp;the&nbsp;source&nbsp;code.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;For&nbsp;64-bit&nbsp;Intel&nbsp;and&nbsp;AMD&nbsp;processors,&nbsp;use:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/p&gt;&lt;pre&nbsp;class=&quot;screen&quot;&gt;--enable-timer=x86_64_tsc&lt;/pre&gt;&lt;p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/p&gt;&lt;pre&nbsp;class=&quot;screen&quot;&gt;--enable-profiler&lt;/pre&gt;&lt;p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If&nbsp;you&nbsp;are&nbsp;using&nbsp;a&nbsp;binary&nbsp;package&nbsp;on&nbsp;either&nbsp;of&nbsp;these&nbsp;platforms,&nbsp;then<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;you&nbsp;need&nbsp;take&nbsp;no&nbsp;special&nbsp;steps,&nbsp;as&nbsp;the&nbsp;timer&nbsp;and&nbsp;profiler&nbsp;are&nbsp;already&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;enabled&nbsp;for&nbsp;you.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/p&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;section&quot;&nbsp;lang=&quot;en&quot;&gt;&lt;div&nbsp;class=&quot;titlepage&quot;&gt;&lt;div&gt;&lt;div&gt;&lt;h3&nbsp;class=&quot;title&quot;&gt;&lt;a&nbsp;name=&quot;accumulating-profile-data&quot;&gt;&lt;/a&gt;Accumulating&nbsp;Profile&nbsp;Data&lt;/h3&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Using&nbsp;this&nbsp;feature&nbsp;is&nbsp;very&nbsp;easy.&nbsp;&nbsp;Simply&nbsp;pass&nbsp;the&nbsp;path&nbsp;to&nbsp;a&nbsp;log&nbsp;file&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to&nbsp;the&nbsp;constructor&nbsp;of&nbsp;the&nbsp;Profile&nbsp;object&nbsp;as&nbsp;follows:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/p&gt;&lt;pre&nbsp;class=&quot;screen&quot;&gt;Profile&nbsp;profile(&quot;/dev/stdout&quot;);&lt;/pre&gt;&lt;p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Profiled&nbsp;library&nbsp;functions&nbsp;will&nbsp;store&nbsp;timing&nbsp;data&nbsp;in&nbsp;memory&nbsp;while&nbsp;this&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;object&nbsp;is&nbsp;in&nbsp;scope.&nbsp;&nbsp;The&nbsp;profile&nbsp;data&nbsp;is&nbsp;written&nbsp;to&nbsp;the&nbsp;log&nbsp;file&nbsp;when&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;object&nbsp;is&nbsp;destroyed.&nbsp;&nbsp;Note&nbsp;that&nbsp;for&nbsp;this&nbsp;reason,&nbsp;only&nbsp;one&nbsp;object&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;of&nbsp;this&nbsp;type&nbsp;may&nbsp;be&nbsp;created&nbsp;at&nbsp;any&nbsp;given&nbsp;time.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/p&gt;&lt;p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;examples/&nbsp;subdirectory&nbsp;provided&nbsp;with&nbsp;the&nbsp;source&nbsp;distribution&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;demonstrates&nbsp;this&nbsp;profiling&nbsp;mode&nbsp;using&nbsp;a&nbsp;2048-point&nbsp;forward&nbsp;FFT&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;followed&nbsp;by&nbsp;an&nbsp;inverse&nbsp;FFT&nbsp;scaled&nbsp;by&nbsp;the&nbsp;length.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;profiler&nbsp;uses&nbsp;the&nbsp;timer&nbsp;to&nbsp;measure&nbsp;each&nbsp;FFT&nbsp;call&nbsp;and&nbsp;uses&nbsp;the&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;size&nbsp;to&nbsp;compute&nbsp;an&nbsp;estimate&nbsp;of&nbsp;the&nbsp;performance.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;For&nbsp;each&nbsp;unique&nbsp;event,&nbsp;the&nbsp;profiler&nbsp;outputs&nbsp;an&nbsp;indentifying&nbsp;tag,&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;accumulated&nbsp;time&nbsp;spent&nbsp;'in&nbsp;scope'&nbsp;(in&nbsp;&quot;ticks&quot;),&nbsp;the&nbsp;number&nbsp;of&nbsp;times&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;called,&nbsp;the&nbsp;total&nbsp;number&nbsp;of&nbsp;floating&nbsp;point&nbsp;operations&nbsp;performed&nbsp;per&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;call&nbsp;and&nbsp;the&nbsp;computed&nbsp;performance&nbsp;in&nbsp;millions&nbsp;of&nbsp;flops&nbsp;per&nbsp;second.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;time&nbsp;value&nbsp;may&nbsp;be&nbsp;converted&nbsp;to&nbsp;seconds&nbsp;by&nbsp;dividing&nbsp;it&nbsp;by&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'clocks_per_second'&nbsp;constant.&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/p&gt;&lt;pre&nbsp;class=&quot;programlisting&quot;&gt;#&nbsp;mode:&nbsp;pm_accum<br>
#&nbsp;timer:&nbsp;x86_64_tsc_time<br>
#&nbsp;clocks_per_sec:&nbsp;3591371008<br>
#&nbsp;<br>
#&nbsp;tag&nbsp;:&nbsp;total&nbsp;ticks&nbsp;:&nbsp;num&nbsp;calls&nbsp;:&nbsp;op&nbsp;count&nbsp;:&nbsp;mflops<br>
Fwd&nbsp;FFT&nbsp;C-C&nbsp;by_val&nbsp;2048x1&nbsp;:&nbsp;208089&nbsp;:&nbsp;1&nbsp;:&nbsp;112640&nbsp;:&nbsp;1944.03<br>
Inv&nbsp;FFT&nbsp;C-C&nbsp;by_val&nbsp;2048x1&nbsp;:&nbsp;209736&nbsp;:&nbsp;1&nbsp;:&nbsp;112640&nbsp;:&nbsp;1928.77<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/pre&gt;&lt;p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;information&nbsp;is&nbsp;important&nbsp;in&nbsp;analyzing&nbsp;total&nbsp;processing&nbsp;requirements<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;an&nbsp;algorithm.&nbsp;&nbsp;However,&nbsp;care&nbsp;should&nbsp;be&nbsp;taken&nbsp;in&nbsp;interpreting&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;results&nbsp;to&nbsp;ensure&nbsp;that&nbsp;they&nbsp;are&nbsp;representative&nbsp;of&nbsp;the&nbsp;intended&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;application.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;For&nbsp;example,&nbsp;in&nbsp;the&nbsp;above&nbsp;FFT&nbsp;the&nbsp;data&nbsp;will&nbsp;most&nbsp;likely&nbsp;not&nbsp;be&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resident&nbsp;in&nbsp;cache&nbsp;as&nbsp;it&nbsp;would&nbsp;be&nbsp;in&nbsp;some&nbsp;instances.&nbsp;&nbsp;With&nbsp;a&nbsp;well<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;designed&nbsp;pipelined&nbsp;processing&nbsp;chain&nbsp;(typical&nbsp;of&nbsp;many&nbsp;embedded&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;applications)&nbsp;the&nbsp;data&nbsp;will&nbsp;be&nbsp;in&nbsp;cache,&nbsp;yielding&nbsp;significantly&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;better&nbsp;performance.&nbsp;&nbsp;To&nbsp;obtain&nbsp;a&nbsp;good&nbsp;estimate&nbsp;of&nbsp;the&nbsp;in-cache&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;peformance,&nbsp;place&nbsp;the&nbsp;FFT&nbsp;in&nbsp;a&nbsp;loop&nbsp;so&nbsp;that&nbsp;it&nbsp;is&nbsp;called&nbsp;many&nbsp;times.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/p&gt;&lt;pre&nbsp;class=&quot;programlisting&quot;&gt;#&nbsp;mode:&nbsp;pm_accum<br>
#&nbsp;timer:&nbsp;x86_64_tsc_time<br>
#&nbsp;clocks_per_sec:&nbsp;3591371008<br>
#&nbsp;<br>
#&nbsp;tag&nbsp;:&nbsp;total&nbsp;ticks&nbsp;:&nbsp;num&nbsp;calls&nbsp;:&nbsp;op&nbsp;count&nbsp;:&nbsp;mflops<br>
Fwd&nbsp;FFT&nbsp;C-C&nbsp;by_val&nbsp;2048x1&nbsp;:&nbsp;6212808&nbsp;:&nbsp;100&nbsp;:&nbsp;112640&nbsp;:&nbsp;6511.26<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/pre&gt;&lt;p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;is&nbsp;only&nbsp;a&nbsp;portion&nbsp;of&nbsp;the&nbsp;analysis&nbsp;that&nbsp;would&nbsp;be&nbsp;necessary&nbsp;to&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;predict&nbsp;the&nbsp;performance&nbsp;of&nbsp;a&nbsp;real-world&nbsp;application.&nbsp;&nbsp;Once&nbsp;you&nbsp;are&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;able&nbsp;to&nbsp;accurately&nbsp;measure&nbsp;library&nbsp;performance,&nbsp;you&nbsp;may&nbsp;then&nbsp;extend&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;that&nbsp;to&nbsp;profile&nbsp;your&nbsp;own&nbsp;application&nbsp;code,&nbsp;using&nbsp;the&nbsp;same&nbsp;features&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;used&nbsp;internal&nbsp;to&nbsp;the&nbsp;library.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/p&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;section&quot;&nbsp;lang=&quot;en&quot;&gt;&lt;div&nbsp;class=&quot;titlepage&quot;&gt;&lt;div&gt;&lt;div&gt;&lt;h3&nbsp;class=&quot;title&quot;&gt;&lt;a&nbsp;name=&quot;trace-profile-data&quot;&gt;&lt;/a&gt;Trace&nbsp;Profile&nbsp;Data&lt;/h3&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;mode&nbsp;is&nbsp;used&nbsp;similarly&nbsp;to&nbsp;accumulate&nbsp;mode,&nbsp;except&nbsp;that&nbsp;an<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;extra&nbsp;parameter&nbsp;is&nbsp;passed&nbsp;to&nbsp;the&nbsp;creation&nbsp;of&nbsp;the&nbsp;Profile&nbsp;object.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/p&gt;&lt;pre&nbsp;class=&quot;screen&quot;&gt;Profile&nbsp;profile(&quot;/dev/stdout&quot;,&nbsp;pm_trace);&lt;/pre&gt;&lt;p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;mode&nbsp;is&nbsp;more&nbsp;important&nbsp;when&nbsp;investigating&nbsp;the&nbsp;execution&nbsp;sequence<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;of&nbsp;your&nbsp;program.&nbsp;&nbsp;The&nbsp;profiler&nbsp;simply&nbsp;records&nbsp;each&nbsp;library&nbsp;call&nbsp;as&nbsp;a&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pair&nbsp;of&nbsp;events,&nbsp;allowing&nbsp;you&nbsp;to&nbsp;see&nbsp;where&nbsp;it&nbsp;entered&nbsp;and&nbsp;exited&nbsp;scope<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;in&nbsp;each&nbsp;case.&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/p&gt;&lt;p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Long&nbsp;traces&nbsp;can&nbsp;result&nbsp;when&nbsp;profiling&nbsp;in&nbsp;this&nbsp;mode,&nbsp;so&nbsp;be&nbsp;sure&nbsp;to&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;avoid&nbsp;taking&nbsp;more&nbsp;data&nbsp;than&nbsp;you&nbsp;have&nbsp;memory&nbsp;to&nbsp;store&nbsp;(and&nbsp;have&nbsp;time<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to&nbsp;process&nbsp;later).&nbsp;&nbsp;The&nbsp;output&nbsp;is&nbsp;very&nbsp;similar&nbsp;to&nbsp;the&nbsp;output&nbsp;in&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;accumulate&nbsp;mode.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/p&gt;&lt;pre&nbsp;class=&quot;programlisting&quot;&gt;#&nbsp;mode:&nbsp;pm_trace<br>
#&nbsp;timer:&nbsp;x86_64_tsc_time<br>
#&nbsp;clocks_per_sec:&nbsp;3591371008<br>
#&nbsp;<br>
#&nbsp;index&nbsp;:&nbsp;tag&nbsp;:&nbsp;ticks&nbsp;:&nbsp;open&nbsp;id&nbsp;:&nbsp;op&nbsp;count<br>
1&nbsp;:&nbsp;FFT&nbsp;Fwd&nbsp;1D&nbsp;C-C&nbsp;by_val&nbsp;&nbsp;&nbsp;&nbsp;2048x1&nbsp;:&nbsp;4688163420488244&nbsp;:&nbsp;0&nbsp;:&nbsp;112640<br>
2&nbsp;:&nbsp;FFT&nbsp;Fwd&nbsp;1D&nbsp;C-C&nbsp;by_val&nbsp;&nbsp;&nbsp;&nbsp;2048x1&nbsp;:&nbsp;4688163420626385&nbsp;:&nbsp;1&nbsp;:&nbsp;0<br>
3&nbsp;:&nbsp;FFT&nbsp;Inv&nbsp;1D&nbsp;C-C&nbsp;by_val&nbsp;&nbsp;&nbsp;&nbsp;2048x1&nbsp;:&nbsp;4688163420643116&nbsp;:&nbsp;0&nbsp;:&nbsp;112640<br>
4&nbsp;:&nbsp;FFT&nbsp;Inv&nbsp;1D&nbsp;C-C&nbsp;by_val&nbsp;&nbsp;&nbsp;&nbsp;2048x1&nbsp;:&nbsp;4688163420830298&nbsp;:&nbsp;3&nbsp;:&nbsp;0<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/pre&gt;&lt;p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;For&nbsp;each&nbsp;event,&nbsp;the&nbsp;profiler&nbsp;outputs&nbsp;an&nbsp;event&nbsp;number,&nbsp;an&nbsp;indentifying<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tag,&nbsp;and&nbsp;the&nbsp;current&nbsp;timestamp&nbsp;(in&nbsp;&quot;ticks&quot;).&nbsp;&nbsp;The&nbsp;next&nbsp;two&nbsp;fields&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;differ&nbsp;depending&nbsp;on&nbsp;whether&nbsp;the&nbsp;event&nbsp;is&nbsp;coming&nbsp;into&nbsp;scope&nbsp;or&nbsp;out&nbsp;of&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;scope.&nbsp;&nbsp;When&nbsp;coming&nbsp;into&nbsp;scope,&nbsp;a&nbsp;zero&nbsp;is&nbsp;shown&nbsp;followed&nbsp;by&nbsp;the&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;estimated&nbsp;count&nbsp;of&nbsp;floating&nbsp;point&nbsp;operations&nbsp;for&nbsp;that&nbsp;function.&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;When&nbsp;exiting&nbsp;scope,&nbsp;the&nbsp;profiler&nbsp;displays&nbsp;the&nbsp;event&nbsp;number&nbsp;being&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;closed&nbsp;followed&nbsp;by&nbsp;a&nbsp;zero.&nbsp;&nbsp;In&nbsp;all&nbsp;cases,&nbsp;the&nbsp;timestamp&nbsp;(and&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;intervals)&nbsp;may&nbsp;be&nbsp;converted&nbsp;to&nbsp;seconds&nbsp;by&nbsp;dividing&nbsp;by&nbsp;the&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'clocks_per_second'&nbsp;constant.&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/p&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;section&quot;&nbsp;lang=&quot;en&quot;&gt;&lt;div&nbsp;class=&quot;titlepage&quot;&gt;&lt;div&gt;&lt;div&gt;&lt;h3&nbsp;class=&quot;title&quot;&gt;&lt;a&nbsp;name=&quot;performance-api&quot;&gt;&lt;/a&gt;Performance&nbsp;API&lt;/h3&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;An&nbsp;additional&nbsp;interface&nbsp;is&nbsp;provided&nbsp;for&nbsp;getting&nbsp;run-time&nbsp;profile&nbsp;data.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;allows&nbsp;you&nbsp;to&nbsp;selectively&nbsp;monitor&nbsp;the&nbsp;performance&nbsp;of&nbsp;a&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;particular&nbsp;instance&nbsp;of&nbsp;a&nbsp;VSIPL&nbsp;class&nbsp;such&nbsp;as&nbsp;Fft,&nbsp;Convolution&nbsp;or<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Correlation.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/p&gt;&lt;p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Classes&nbsp;with&nbsp;the&nbsp;Performance&nbsp;API&nbsp;built&nbsp;in&nbsp;contain&nbsp;a&nbsp;function<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;that&nbsp;takes&nbsp;a&nbsp;string&nbsp;parameter&nbsp;and&nbsp;returns&nbsp;single-precision&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;floating&nbsp;point&nbsp;number.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;flexible&nbsp;interface&nbsp;allows&nbsp;you&nbsp;to&nbsp;obtain&nbsp;a&nbsp;variety&nbsp;of&nbsp;useful&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;values&nbsp;all&nbsp;through&nbsp;a&nbsp;single&nbsp;function.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/p&gt;&lt;p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;For&nbsp;example,&nbsp;given&nbsp;an&nbsp;Fft&nbsp;object&nbsp;named&nbsp;&quot;fwd_fft&quot;,&nbsp;the&nbsp;following&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;call&nbsp;shows&nbsp;how&nbsp;to&nbsp;obtain&nbsp;an&nbsp;estimate&nbsp;of&nbsp;the&nbsp;number&nbsp;of&nbsp;floating&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;point&nbsp;operations&nbsp;per&nbsp;second&nbsp;performed.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/p&gt;&lt;pre&nbsp;class=&quot;screen&quot;&gt;float&nbsp;mflops&nbsp;=&nbsp;fwd_fft.impl_performance(&quot;mflops&quot;);&lt;/pre&gt;&lt;p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/p&gt;&lt;p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;table&nbsp;below&nbsp;lists&nbsp;the&nbsp;current&nbsp;types&nbsp;of&nbsp;information&nbsp;available.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/p&gt;&lt;div&nbsp;class=&quot;table&quot;&gt;&lt;a&nbsp;name=&quot;id297141&quot;&gt;&lt;/a&gt;&lt;p&nbsp;class=&quot;title&quot;&gt;&lt;b&gt;Table 4.2. Performance&nbsp;API&nbsp;Metrics&lt;/b&gt;&lt;/p&gt;&lt;table&nbsp;summary=&quot;Performance&nbsp;API&nbsp;Metrics&quot;&nbsp;border=&quot;0&quot;&gt;&lt;colgroup&gt;&lt;col&gt;&lt;col&gt;&lt;/colgroup&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Parameter&lt;/th&gt;&lt;th&gt;Description&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;code&nbsp;class=&quot;code&quot;&gt;mflops&lt;/code&gt;&lt;/td&gt;&lt;td&gt;performance&nbsp;in&nbsp;millions&nbsp;of&nbsp;floating&nbsp;point&nbsp;operations&nbsp;per&nbsp;second<br>
&nbsp;&nbsp;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&nbsp;class=&quot;code&quot;&gt;count&lt;/code&gt;&lt;/td&gt;&lt;td&gt;number&nbsp;of&nbsp;times&nbsp;invoked&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&nbsp;class=&quot;code&quot;&gt;time&lt;/code&gt;&lt;/td&gt;&lt;td&gt;total&nbsp;time&nbsp;spent&nbsp;performing&nbsp;the&nbsp;operation,&nbsp;in&nbsp;seconds&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&nbsp;class=&quot;code&quot;&gt;op_count&lt;/code&gt;&lt;/td&gt;&lt;td&gt;number&nbsp;of&nbsp;floating&nbsp;point&nbsp;operations&nbsp;per&nbsp;invocation&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;code&nbsp;class=&quot;code&quot;&gt;mbs&lt;/code&gt;&lt;/td&gt;&lt;td&gt;data&nbsp;rate&nbsp;in&nbsp;millions&nbsp;of&nbsp;bytes&nbsp;per&nbsp;second&nbsp;(not&nbsp;applicable&nbsp;in&nbsp;<br>
&nbsp;&nbsp;for&nbsp;all&nbsp;operations)&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;navfooter&quot;&gt;&lt;hr&gt;&lt;table&nbsp;width=&quot;100%&quot;&nbsp;summary=&quot;Navigation&nbsp;footer&quot;&gt;&lt;tr&gt;&lt;td&nbsp;width=&quot;40%&quot;&nbsp;align=&quot;left&quot;&gt;&lt;a&nbsp;accesskey=&quot;p&quot;&nbsp;href=&quot;user-defined-blocks.html&quot;&gt;Prev&lt;/a&gt; &lt;/td&gt;&lt;td&nbsp;width=&quot;20%&quot;&nbsp;align=&quot;center&quot;&gt; &lt;/td&gt;&lt;td&nbsp;width=&quot;40%&quot;&nbsp;align=&quot;right&quot;&gt; &lt;a&nbsp;accesskey=&quot;n&quot;&nbsp;href=&quot;application-profiling.html&quot;&gt;Next&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&nbsp;width=&quot;40%&quot;&nbsp;align=&quot;left&quot;&nbsp;valign=&quot;top&quot;&gt;User-defined&nbsp;blocks &lt;/td&gt;&lt;td&nbsp;width=&quot;20%&quot;&nbsp;align=&quot;center&quot;&gt;&lt;a&nbsp;accesskey=&quot;h&quot;&nbsp;href=&quot;index.html&quot;&gt;Home&lt;/a&gt;&lt;/td&gt;&lt;td&nbsp;width=&quot;40%&quot;&nbsp;align=&quot;right&quot;&nbsp;valign=&quot;top&quot;&gt; Application&nbsp;Profiling&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;<br>

</tt>
