<tt>
&lt;html&gt;&lt;head&gt;&lt;meta&nbsp;http-equiv=&quot;Content-Type&quot;&nbsp;content=&quot;text/html;&nbsp;charset=ISO-8859-1&quot;&gt;&lt;title&gt;Application&nbsp;Profiling&lt;/title&gt;&lt;link&nbsp;rel=&quot;stylesheet&quot;&nbsp;href=&quot;cs.css&quot;&nbsp;type=&quot;text/css&quot;&gt;&lt;meta&nbsp;name=&quot;generator&quot;&nbsp;content=&quot;DocBook&nbsp;XSL&nbsp;Stylesheets&nbsp;V1.69.1&quot;&gt;&lt;link&nbsp;rel=&quot;start&quot;&nbsp;href=&quot;index.html&quot;&nbsp;title=&quot;Sourcery&nbsp;VSIPL++&quot;&gt;&lt;link&nbsp;rel=&quot;up&quot;&nbsp;href=&quot;ch04.html&quot;&nbsp;title=&quot;Chapter 4. Performance&quot;&gt;&lt;link&nbsp;rel=&quot;prev&quot;&nbsp;href=&quot;ch04.html&quot;&nbsp;title=&quot;Chapter 4. Performance&quot;&gt;&lt;link&nbsp;rel=&quot;next&quot;&nbsp;href=&quot;glossary.html&quot;&nbsp;title=&quot;Glossary&quot;&gt;&lt;/head&gt;&lt;body&nbsp;bgcolor=&quot;white&quot;&nbsp;text=&quot;black&quot;&nbsp;link=&quot;#0000FF&quot;&nbsp;vlink=&quot;#840084&quot;&nbsp;alink=&quot;#0000FF&quot;&gt;&lt;div&nbsp;class=&quot;navheader&quot;&gt;&lt;table&nbsp;width=&quot;100%&quot;&nbsp;summary=&quot;Navigation&nbsp;header&quot;&gt;&lt;tr&gt;&lt;th&nbsp;colspan=&quot;3&quot;&nbsp;align=&quot;center&quot;&gt;Application&nbsp;Profiling&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&nbsp;width=&quot;20%&quot;&nbsp;align=&quot;left&quot;&gt;&lt;a&nbsp;accesskey=&quot;p&quot;&nbsp;href=&quot;ch04.html&quot;&gt;Prev&lt;/a&gt; &lt;/td&gt;&lt;th&nbsp;width=&quot;60%&quot;&nbsp;align=&quot;center&quot;&gt;Chapter 4. Performance&lt;/th&gt;&lt;td&nbsp;width=&quot;20%&quot;&nbsp;align=&quot;right&quot;&gt; &lt;a&nbsp;accesskey=&quot;n&quot;&nbsp;href=&quot;glossary.html&quot;&gt;Next&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;hr&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;section&quot;&nbsp;lang=&quot;en&quot;&gt;&lt;div&nbsp;class=&quot;titlepage&quot;&gt;&lt;div&gt;&lt;div&gt;&lt;h2&nbsp;class=&quot;title&quot;&nbsp;style=&quot;clear:&nbsp;both&quot;&gt;&lt;a&nbsp;name=&quot;application-profiling&quot;&gt;&lt;/a&gt;Application&nbsp;Profiling&lt;/h2&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;When&nbsp;knowing&nbsp;detailed&nbsp;run-time&nbsp;information&nbsp;regarding&nbsp;the&nbsp;library<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;functions&nbsp;used&nbsp;by&nbsp;your&nbsp;algorithm&nbsp;is&nbsp;not&nbsp;enough,&nbsp;you&nbsp;may&nbsp;want&nbsp;to<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;add&nbsp;profiling&nbsp;capabilities&nbsp;to&nbsp;some&nbsp;of&nbsp;your&nbsp;own&nbsp;code.&nbsp;&nbsp;Here,&nbsp;we<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;introduce&nbsp;a&nbsp;new&nbsp;object,&nbsp;the&nbsp;Scope_event&nbsp;class,&nbsp;and&nbsp;show&nbsp;you&nbsp;how&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to&nbsp;use&nbsp;it&nbsp;in&nbsp;your&nbsp;application.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/p&gt;&lt;p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;To&nbsp;create&nbsp;a&nbsp;Scope_event,&nbsp;simply&nbsp;call&nbsp;the&nbsp;constructor,&nbsp;passing&nbsp;it<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;string&nbsp;that&nbsp;will&nbsp;become&nbsp;the&nbsp;event&nbsp;tag&nbsp;and,&nbsp;optionally,&nbsp;an&nbsp;integer<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value&nbsp;expressing&nbsp;the&nbsp;number&nbsp;of&nbsp;floating&nbsp;point&nbsp;operations&nbsp;that&nbsp;will<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;be&nbsp;performed&nbsp;by&nbsp;the&nbsp;time&nbsp;the&nbsp;Scope_event&nbsp;object&nbsp;is&nbsp;destroyed.&nbsp;&nbsp;For<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;example,&nbsp;to&nbsp;&nbsp;measure&nbsp;the&nbsp;time&nbsp;taken&nbsp;to&nbsp;compute&nbsp;a&nbsp;simple&nbsp;running&nbsp;sum&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;of&nbsp;squares&nbsp;over&nbsp;a&nbsp;C&nbsp;array:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/p&gt;&lt;pre&nbsp;class=&quot;programlisting&quot;&gt;#include&nbsp;&lt;vsip/initfin.hpp&gt;<br>
#include&nbsp;&lt;vsip/support.hpp&gt;<br>
#include&nbsp;&lt;vsip/impl/profile.hpp&gt;<br>
<br>
using&nbsp;namespace&nbsp;vsip;<br>
using&nbsp;namespace&nbsp;impl;<br>
<br>
int<br>
main()<br>
{<br>
&nbsp;&nbsp;vsipl&nbsp;init;<br>
<br>
&nbsp;&nbsp;int&nbsp;data[1024];<br>
&nbsp;&nbsp;for&nbsp;(int&nbsp;i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;1024;&nbsp;++i)<br>
&nbsp;&nbsp;&nbsp;&nbsp;data[i]&nbsp;=&nbsp;i;<br>
<br>
&nbsp;&nbsp;profile::Scope_enable&nbsp;scope(&quot;/dev/stdout&quot;&nbsp;);<br>
<br>
&nbsp;&nbsp;//&nbsp;This&nbsp;computation&nbsp;will&nbsp;be&nbsp;timed&nbsp;and&nbsp;included&nbsp;in&nbsp;the&nbsp;profiler&nbsp;output.<br>
&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;profile::Scope_event&nbsp;user_event(&quot;sum&nbsp;of&nbsp;squares&quot;,&nbsp;2&nbsp;*&nbsp;1024);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;sum&nbsp;=&nbsp;0;<br>
&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(int&nbsp;i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&lt;&nbsp;1024;&nbsp;++i)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sum&nbsp;+=&nbsp;data[i]&nbsp;*&nbsp;data[i];<br>
&nbsp;&nbsp;}<br>
<br>
&nbsp;&nbsp;return&nbsp;0;<br>
}<br>
<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/pre&gt;&lt;p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;resulting&nbsp;profile&nbsp;data&nbsp;is&nbsp;identical&nbsp;in&nbsp;format&nbsp;to&nbsp;that&nbsp;used&nbsp;for<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;profiling&nbsp;library&nbsp;functions.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/p&gt;&lt;pre&nbsp;class=&quot;programlisting&quot;&gt;#&nbsp;mode:&nbsp;pm_accum<br>
#&nbsp;timer:&nbsp;x86_64_tsc_time<br>
#&nbsp;clocks_per_sec:&nbsp;3591371008<br>
#&nbsp;<br>
#&nbsp;tag&nbsp;:&nbsp;total&nbsp;ticks&nbsp;:&nbsp;num&nbsp;calls&nbsp;:&nbsp;op&nbsp;count&nbsp;:&nbsp;mflops<br>
sum&nbsp;of&nbsp;squares&nbsp;:&nbsp;18153&nbsp;:&nbsp;1&nbsp;:&nbsp;2048&nbsp;:&nbsp;405.174<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/pre&gt;&lt;p&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Combining&nbsp;both&nbsp;application&nbsp;and&nbsp;library&nbsp;profiling&nbsp;is&nbsp;possible&nbsp;in&nbsp;either&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;trace&nbsp;or&nbsp;accumulate&nbsp;modes.&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Performance&nbsp;events&nbsp;can&nbsp;be&nbsp;nested&nbsp;to&nbsp;help&nbsp;identify&nbsp;points&nbsp;of&nbsp;interest<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;in&nbsp;your&nbsp;program.&nbsp;&nbsp;Events&nbsp;can&nbsp;be&nbsp;used&nbsp;to&nbsp;label&nbsp;different&nbsp;regions,&nbsp;such&nbsp;as&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;range&nbsp;processing&quot;&nbsp;and&nbsp;&quot;azimuth&nbsp;processing&quot;&nbsp;for&nbsp;SAR.&nbsp;&nbsp;When&nbsp;examining&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;trace&nbsp;output,&nbsp;profile&nbsp;events&nbsp;for&nbsp;library&nbsp;functions,&nbsp;such&nbsp;as&nbsp;FFTs,&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;will&nbsp;be&nbsp;nested&nbsp;within&nbsp;profile&nbsp;events&nbsp;for&nbsp;application&nbsp;regions.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/p&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;navfooter&quot;&gt;&lt;hr&gt;&lt;table&nbsp;width=&quot;100%&quot;&nbsp;summary=&quot;Navigation&nbsp;footer&quot;&gt;&lt;tr&gt;&lt;td&nbsp;width=&quot;40%&quot;&nbsp;align=&quot;left&quot;&gt;&lt;a&nbsp;accesskey=&quot;p&quot;&nbsp;href=&quot;ch04.html&quot;&gt;Prev&lt;/a&gt; &lt;/td&gt;&lt;td&nbsp;width=&quot;20%&quot;&nbsp;align=&quot;center&quot;&gt;&lt;a&nbsp;accesskey=&quot;u&quot;&nbsp;href=&quot;ch04.html&quot;&gt;Up&lt;/a&gt;&lt;/td&gt;&lt;td&nbsp;width=&quot;40%&quot;&nbsp;align=&quot;right&quot;&gt; &lt;a&nbsp;accesskey=&quot;n&quot;&nbsp;href=&quot;glossary.html&quot;&gt;Next&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&nbsp;width=&quot;40%&quot;&nbsp;align=&quot;left&quot;&nbsp;valign=&quot;top&quot;&gt;Chapter 4. Performance &lt;/td&gt;&lt;td&nbsp;width=&quot;20%&quot;&nbsp;align=&quot;center&quot;&gt;&lt;a&nbsp;accesskey=&quot;h&quot;&nbsp;href=&quot;index.html&quot;&gt;Home&lt;/a&gt;&lt;/td&gt;&lt;td&nbsp;width=&quot;40%&quot;&nbsp;align=&quot;right&quot;&nbsp;valign=&quot;top&quot;&gt; Glossary&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;<br>

</tt>
