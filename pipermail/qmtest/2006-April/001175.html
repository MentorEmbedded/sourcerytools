<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [qmtest] Wrong Exit Codes
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:qmtest%40codesourcery.com?Subject=Re%3A%20%5Bqmtest%5D%20Wrong%20Exit%20Codes&In-Reply-To=%3C444D1B60.8010701%40fastmail.fm%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001174.html">
   
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[qmtest] Wrong Exit Codes</H1>
    <B>Kelly Lucas</B> 
    <A HREF="mailto:qmtest%40codesourcery.com?Subject=Re%3A%20%5Bqmtest%5D%20Wrong%20Exit%20Codes&In-Reply-To=%3C444D1B60.8010701%40fastmail.fm%3E"
       TITLE="[qmtest] Wrong Exit Codes">lucaskeli at fastmail.fm
       </A><BR>
    <I>Mon Apr 24 18:39:28 UTC 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="001174.html">[qmtest] Wrong Exit Codes
</A></li>
        
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1175">[ date ]</a>
              <a href="thread.html#1175">[ thread ]</a>
              <a href="subject.html#1175">[ subject ]</a>
              <a href="author.html#1175">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Well, here's an exmple of a test that fails on Breezy, kernel 2.6.16.1, 
and the same exact test that passes on Redhat [kernel 2.4x] and Hoary, 
kernel 2.6.13.4:

My test is a shell script, and the shell script is simply:

touch &lt;pathname&gt;

The pathname is a place where the user running the test does not have 
permissions. On Redhat and Hoary, I get the correct exit Code from 
QMTest, which is 1. I'm using QMTest's built in checks for exit codes. I 
do get the expected standard error in all cases, which is:

touch: cannot touch &lt;pathname&gt;:  Permission denied

The system where the wrong exit code is returned is running Python 
2.4.2. The other two systems where the exit code is correct, are 
running: Python 2.4.1 and Python 2.2.2.

kdl

Kelly D. Lucas
<A HREF="http://sourcerytools.com/cgi-bin/mailman/listinfo/qmtest">lucaskeli at fastmail.fm</A>



Stefan Seefeld wrote:
&gt;<i> Kelly Lucas wrote:
</I>&gt;&gt;<i> I recently moved my test suite for another platform, which is code 
</I>&gt;&gt;<i> named Breezy, the Ubuntu Linux release.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I've previously been running my testsuite using QMTest on RedHat and 
</I>&gt;&gt;<i> Ubuntu Hoary. However, I was amazed to see that when I ran some 
</I>&gt;&gt;<i> negative tests, such as attempting to create a file or directory 
</I>&gt;&gt;<i> where I don't have permissions. On Redhat and Ubuntu Hoary [kernel 
</I>&gt;&gt;<i> 2.4x], I would always get non zero exit codes on such tests. However, 
</I>&gt;&gt;<i> now I'm getting exit codes of 0. I don't understand what happened. 
</I>&gt;&gt;<i> Code the version of python I'm using affect this? Here's an example 
</I>&gt;&gt;<i> of a test:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> A simple script that tries to touch a file in a directory where it 
</I>&gt;&gt;<i> does not have write permissions:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> touch /home/user/testfile
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> If I try the same test from a shell script, and echo the exit code, 
</I>&gt;&gt;<i> it is non zero.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I'm kind of baffled!
</I>&gt;<i>
</I>&gt;<i> I have seen situations in which a non-zero exit code of a command was not
</I>&gt;<i> correctly reported back, though I don't remember whether that was a bug
</I>&gt;<i> in the script or a problem with a particular shell.
</I>&gt;<i> However, I fear I don't have enough details to be able to make meaningful
</I>&gt;<i> suggestions. Are you sure you use the same version of QMTest in both 
</I>&gt;<i> cases ?
</I>&gt;<i> What about the test class ? Is it any of QMTest's builtin classes ? If 
</I>&gt;<i> not,
</I>&gt;<i> could you post some code ? (Especially the one that evaluates the exit 
</I>&gt;<i> code.)
</I>&gt;<i> What does your command look like ?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Regards,
</I>&gt;<i>         Stefan
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001174.html">[qmtest] Wrong Exit Codes
</A></li>
	
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1175">[ date ]</a>
              <a href="thread.html#1175">[ thread ]</a>
              <a href="subject.html#1175">[ subject ]</a>
              <a href="author.html#1175">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://sourcerytools.com/cgi-bin/mailman/listinfo/qmtest">More information about the qmtest
mailing list</a><br>
</body></html>
