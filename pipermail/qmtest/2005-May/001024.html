<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> environment variable 'targetname'
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:qmtest%40codesourcery.com?Subject=Re%3A%20environment%20variable%20%27targetname%27&In-Reply-To=%3CBAY1-F291F436B85FB83F7E88FD9C4100%40phx.gbl%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   
   <LINK REL="Next"  HREF="001025.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>environment variable 'targetname'</H1>
    <B>Richard Poppe</B> 
    <A HREF="mailto:qmtest%40codesourcery.com?Subject=Re%3A%20environment%20variable%20%27targetname%27&In-Reply-To=%3CBAY1-F291F436B85FB83F7E88FD9C4100%40phx.gbl%3E"
       TITLE="environment variable 'targetname'">rpoppe65 at hotmail.com
       </A><BR>
    <I>Wed May 11 07:15:50 UTC 2005</I>
    <P><UL>
        
        <LI>Next message: <A HREF="001025.html">[qmtest] environment variable 'targetname'
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1024">[ date ]</a>
              <a href="thread.html#1024">[ thread ]</a>
              <a href="subject.html#1024">[ subject ]</a>
              <a href="author.html#1024">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Who can help me with the following (i am not familiar with python 
programming)

I would like to use the targetname in my tested program and tried to 
retrieve it with an environment variable. When i set target_name (see 
details below) as a constant the environment variable will be available, but 
when i try to use the GetName() function the environment variable does not 
appear.

I am using Win2000 with python 2.3, and made the following changes to the 
scripts:

Add TARGET_CONTEXT_PROPERTY to 
C:\Python23\Lib\site-packages\qm\test\context.py (i put it before the 
DB_PATH_CONTEXT_PROPERTY):
    TARGET_CONTEXT_PROPERTY = &quot;qmtest.target&quot;
    DB_PATH_CONTEXT_PROPERTY = &quot;qmtest.dbpath&quot;

Add TARGET_CONTEXT_PROPERTY to 
C:\Python23\Lib\site-packages\qm\test\target.py (i put it before the 
DB_PATH_CONTEXT_PROPERTY):
            #target_name = &quot;constant&quot;
            target_name = self.GetName()
            context[context.TARGET_CONTEXT_PROPERTY] \
                = &quot;Target %s&quot; % target_name
            context[context.DB_PATH_CONTEXT_PROPERTY] \
                = descriptor.GetDatabase().GetPath()

I created a target:
qmtest.py create-target ws1 thread_target.ThreadTarget group1

And i created a test that will run on that target:
&lt;?xml version=&quot;1.0&quot; ?&gt;
&lt;!DOCTYPE extension
  PUBLIC '-//QM/2.2/Extension//EN'
  '<A HREF="http://www.codesourcery.com/qm/dtds/2.2/-//qm/2.2/extension//en.dtd">http://www.codesourcery.com/qm/dtds/2.2/-//qm/2.2/extension//en.dtd</A>'&gt;
&lt;extension class=&quot;command.ExecTest&quot; kind=&quot;test&quot;&gt;
&lt;argument name=&quot;stdin&quot;&gt;&lt;text/&gt;&lt;/argument&gt;
&lt;argument name=&quot;stderr&quot;&gt;&lt;text/&gt;&lt;/argument&gt;
&lt;argument name=&quot;stdout&quot;&gt;&lt;text/&gt;&lt;/argument&gt;
&lt;argument name=&quot;prerequisites&quot;&gt;&lt;set/&gt;&lt;/argument&gt;
&lt;argument name=&quot;target_group&quot;&gt;&lt;text&gt;group1&lt;/text&gt;&lt;/argument&gt;
&lt;argument name=&quot;exit_code&quot;&gt;&lt;integer&gt;0&lt;/integer&gt;&lt;/argument&gt;
&lt;argument name=&quot;environment&quot;&gt;&lt;set/&gt;&lt;/argument&gt;
&lt;argument name=&quot;program&quot;&gt;&lt;text&gt;C:\WINNT\system32\cmd.exe &lt;/text&gt;&lt;/argument&gt;
&lt;argument name=&quot;arguments&quot;&gt;&lt;set&gt;&lt;text&gt;/c &quot;set&lt;/text&gt;&lt;/set&gt;&lt;/argument&gt;
&lt;argument name=&quot;timeout&quot;&gt;&lt;integer&gt;-1&lt;/integer&gt;&lt;/argument&gt;
&lt;argument name=&quot;resources&quot;&gt;&lt;set/&gt;&lt;/argument&gt;&lt;/extension&gt;

After running the test (it starts a windows command box and executes the set 
command) the error details show &quot;QMV_qmtest__target=Target constant&quot; in case 
of the constant and nothing in case of the GetName().

Thanks in advance,
Richard.

_________________________________________________________________
Nieuw: Beeld en geluid met MSN Messenger 7.0 <A HREF="http://messenger.msn.nl/">http://messenger.msn.nl/</A>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	
	<LI>Next message: <A HREF="001025.html">[qmtest] environment variable 'targetname'
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1024">[ date ]</a>
              <a href="thread.html#1024">[ thread ]</a>
              <a href="subject.html#1024">[ subject ]</a>
              <a href="author.html#1024">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://sourcerytools.com/cgi-bin/mailman/listinfo/qmtest">More information about the qmtest
mailing list</a><br>
</body></html>
