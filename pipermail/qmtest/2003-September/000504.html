<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [qmtest] [b,s]dist creation
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:qmtest%40codesourcery.com?Subject=Re%3A%20%5Bqmtest%5D%20%5Bb%2Cs%5Ddist%20creation&In-Reply-To=%3C3F6341F7.9030509%40sympatico.ca%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000503.html">
   <LINK REL="Next"  HREF="000505.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[qmtest] [b,s]dist creation</H1>
    <B>Stefan Seefeld</B> 
    <A HREF="mailto:qmtest%40codesourcery.com?Subject=Re%3A%20%5Bqmtest%5D%20%5Bb%2Cs%5Ddist%20creation&In-Reply-To=%3C3F6341F7.9030509%40sympatico.ca%3E"
       TITLE="[qmtest] [b,s]dist creation">seefeld at sympatico.ca
       </A><BR>
    <I>Sat Sep 13 16:12:39 UTC 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="000503.html">[qmtest] [b,s]dist creation
</A></li>
        <LI>Next message: <A HREF="000505.html">[qmtest] [b,s]dist creation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#504">[ date ]</a>
              <a href="thread.html#504">[ thread ]</a>
              <a href="subject.html#504">[ subject ]</a>
              <a href="author.html#504">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Nathaniel Smith wrote:
&gt;<i> On Fri, Sep 12, 2003 at 05:46:15PM -0700, Mark Mitchell wrote:
</I>&gt;<i> 
</I>&gt;&gt;<i>OK, so that means that the idea of writing out QM_HOME in install_data
</I>&gt;&gt;<i>doesn't work.  We have to be able to autodetect QM_HOME -- but we wanted
</I>&gt;&gt;<i>to do that anyhow.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>Now, on UNIX, we (used to) use the logic in the &quot;qmtest&quot; shell script to
</I>&gt;&gt;<i>find QM_HOME.  Now that we're invoking &quot;qmtest.py&quot; directly, this might
</I>&gt;&gt;<i>be even easier.  Presumably, sys.argv[0] contains the path to qmtest.py
</I>&gt;&gt;<i>(possibly relative to the current directory).  So, maybe now is the time
</I>&gt;&gt;<i>to get rid of QM_HOME?  Instead, deduce it in qmtest.py, based on
</I>&gt;&gt;<i>sys.argv[0].
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> It may be slightly better to use __file__ rather than sys.argv[0];
</I>&gt;<i> __file__ is a global variable set inside each module to the filename
</I>&gt;<i> containing that module.  It does appear to be relative if Python is
</I>&gt;<i> invoked with a relative filename, so an os.normpath is in order before
</I>&gt;<i> any chdir's.
</I>
but __file__ tells you only about the module that uses it.
The python module path however may be more or less unrelated to
the path the data files are installed in ('/usr/local/share/' typically
on unix).

I would assume that there is a much stronger relation among the paths
of the qmtest executable and the data files than there is among the qm
modules and the data files. Therefor, if we use '__file__', it should
be that of the qmtest executable, not any module inside the qm package.

Stefan


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000503.html">[qmtest] [b,s]dist creation
</A></li>
	<LI>Next message: <A HREF="000505.html">[qmtest] [b,s]dist creation
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#504">[ date ]</a>
              <a href="thread.html#504">[ thread ]</a>
              <a href="subject.html#504">[ subject ]</a>
              <a href="author.html#504">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://sourcerytools.com/cgi-bin/mailman/listinfo/qmtest">More information about the qmtest
mailing list</a><br>
</body></html>
