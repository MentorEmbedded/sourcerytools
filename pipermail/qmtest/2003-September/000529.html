<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> PATCH: Fix qmtest summarize --help output
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:qmtest%40codesourcery.com?Subject=Re%3A%20PATCH%3A%20Fix%20qmtest%20summarize%20--help%20output&In-Reply-To=%3C1064783800.4279.29.camel%40minax.codesourcery.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000528.html">
   <LINK REL="Next"  HREF="000530.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>PATCH: Fix qmtest summarize --help output</H1>
    <B>Mark Mitchell</B> 
    <A HREF="mailto:qmtest%40codesourcery.com?Subject=Re%3A%20PATCH%3A%20Fix%20qmtest%20summarize%20--help%20output&In-Reply-To=%3C1064783800.4279.29.camel%40minax.codesourcery.com%3E"
       TITLE="PATCH: Fix qmtest summarize --help output">mark at codesourcery.com
       </A><BR>
    <I>Sun Sep 28 21:16:41 UTC 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="000528.html">PATCH: Add --help support for &quot;qmtest remote&quot;
</A></li>
        <LI>Next message: <A HREF="000530.html">PATCH: Make PickleResultReader handle StringIO files
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#529">[ date ]</a>
              <a href="thread.html#529">[ thread ]</a>
              <a href="subject.html#529">[ subject ]</a>
              <a href="author.html#529">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>This patch makes QMTest automatically generate the list of format
options generated by qmtest summarize --help.  (At present, the &quot;batch&quot;
format was omitted from the help output.)

-- 
Mark Mitchell &lt;<A HREF="http://sourcerytools.com/cgi-bin/mailman/listinfo/qmtest">mark at codesourcery.com</A>&gt;
CodeSourcery, LLC
-------------- next part --------------
2003-09-28  Mark Mitchell  &lt;<A HREF="http://sourcerytools.com/cgi-bin/mailman/listinfo/qmtest">mark at codesourcery.com</A>&gt;

	* qm/test/cmdline.py (QMTest.summary_formats): Rearrange order.
	(QMTest.commands_spec): Automatically generate lists of --format
	options.
	* qm/test/classes/text_result_stream.py
	(TextResultStream.arguments): Specify valid enumerals for format.

Index: qm/test/cmdline.py
===================================================================
RCS file: /home/sc/Repository/qm/qm/test/cmdline.py,v
retrieving revision 1.100
diff -c -5 -p -r1.100 cmdline.py
*** qm/test/cmdline.py	28 Sep 2003 18:24:27 -0000	1.100
--- qm/test/cmdline.py	28 Sep 2003 21:04:06 -0000
*************** class QMTest:
*** 94,104 ****
      &quot;&quot;&quot;A string listing the available extension kinds.&quot;&quot;&quot;
  
      db_path_environment_variable = &quot;QMTEST_DB_PATH&quot;
      &quot;&quot;&quot;The environment variable specifying the test database path.&quot;&quot;&quot;
  
!     summary_formats = (&quot;full&quot;, &quot;brief&quot;, &quot;stats&quot;, &quot;batch&quot;, &quot;none&quot;)
      &quot;&quot;&quot;Valid formats for result summaries.&quot;&quot;&quot;
  
      context_file_name = &quot;context&quot;
      &quot;&quot;&quot;The default name of a context file.&quot;&quot;&quot;
      
--- 94,104 ----
      &quot;&quot;&quot;A string listing the available extension kinds.&quot;&quot;&quot;
  
      db_path_environment_variable = &quot;QMTEST_DB_PATH&quot;
      &quot;&quot;&quot;The environment variable specifying the test database path.&quot;&quot;&quot;
  
!     summary_formats = (&quot;brief&quot;, &quot;full&quot;, &quot;stats&quot;, &quot;batch&quot;, &quot;none&quot;)
      &quot;&quot;&quot;Valid formats for result summaries.&quot;&quot;&quot;
  
      context_file_name = &quot;context&quot;
      &quot;&quot;&quot;The default name of a context file.&quot;&quot;&quot;
      
*************** suite IDs to run; omit arguments to run 
*** 431,443 ****
  
  Test results are written to &quot;results.qmr&quot;.  Use the '--output' option to
  specify a different output file, or '--no-output' to supress results.
  
  Use the '--format' option to specify the output format for the summary.
! Valid formats are &quot;full&quot;, &quot;brief&quot; (the default), &quot;stats&quot;, and &quot;none&quot;.
! The summary is written to standard output.
!          &quot;&quot;&quot;,
           (
             concurrent_option_spec,
             context_file_spec,
             context_option_spec,
             format_option_spec,
--- 431,442 ----
  
  Test results are written to &quot;results.qmr&quot;.  Use the '--output' option to
  specify a different output file, or '--no-output' to supress results.
  
  Use the '--format' option to specify the output format for the summary.
! Valid formats are %s.
!          &quot;&quot;&quot; % _make_comma_separated_string(summary_formats, &quot;and&quot;),
           (
             concurrent_option_spec,
             context_file_spec,
             context_option_spec,
             format_option_spec,
*************** Loads a test results file and summarizes
*** 461,472 ****
  to the results file.  Optionally, specify one or more test or suite IDs
  whose results are shown.  If none are specified, shows all tests that
  did not pass.
  
  Use the '--format' option to specify the output format for the summary.
! Valid formats are &quot;full&quot;, &quot;brief&quot; (the default), &quot;stats&quot;, and &quot;none&quot;.
!          &quot;&quot;&quot;,
           ( help_option_spec,
             format_option_spec,
             outcomes_option_spec,
             result_stream_spec)
           ),
--- 460,471 ----
  to the results file.  Optionally, specify one or more test or suite IDs
  whose results are shown.  If none are specified, shows all tests that
  did not pass.
  
  Use the '--format' option to specify the output format for the summary.
! Valid formats are %s.
!          &quot;&quot;&quot; % _make_comma_separated_string(summary_formats, &quot;and&quot;),
           ( help_option_spec,
             format_option_spec,
             outcomes_option_spec,
             result_stream_spec)
           ),
Index: qm/test/classes/text_result_stream.py
===================================================================
RCS file: /home/sc/Repository/qm/qm/test/classes/text_result_stream.py,v
retrieving revision 1.4
diff -c -5 -p -r1.4 text_result_stream.py
*** qm/test/classes/text_result_stream.py	12 Aug 2003 20:14:18 -0000	1.4
--- qm/test/classes/text_result_stream.py	28 Sep 2003 21:04:06 -0000
*************** class TextResultStream(FileResultStream)
*** 80,90 ****
  
              The &quot;full&quot; format is like &quot;brief&quot; except that all
              annotations are shown for tests as they are run.
  
              In the &quot;stats&quot; format only the summary statistics are
!             displayed.&quot;&quot;&quot;),
          ]
      
      def __init__(self, arguments):
          &quot;&quot;&quot;Construct a 'TextResultStream'.
  
--- 80,91 ----
  
              The &quot;full&quot; format is like &quot;brief&quot; except that all
              annotations are shown for tests as they are run.
  
              In the &quot;stats&quot; format only the summary statistics are
!             displayed.&quot;&quot;&quot;,
!             enumerals = [&quot;brief&quot;, &quot;batch&quot;, &quot;full&quot;, &quot;stats&quot;])
          ]
      
      def __init__(self, arguments):
          &quot;&quot;&quot;Construct a 'TextResultStream'.
  
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000528.html">PATCH: Add --help support for &quot;qmtest remote&quot;
</A></li>
	<LI>Next message: <A HREF="000530.html">PATCH: Make PickleResultReader handle StringIO files
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#529">[ date ]</a>
              <a href="thread.html#529">[ thread ]</a>
              <a href="subject.html#529">[ subject ]</a>
              <a href="author.html#529">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://sourcerytools.com/cgi-bin/mailman/listinfo/qmtest">More information about the qmtest
mailing list</a><br>
</body></html>
