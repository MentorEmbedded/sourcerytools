<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [qmtest] command.ShellCommandTest run directory
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:qmtest%40codesourcery.com?Subject=Re%3A%20%5Bqmtest%5D%20command.ShellCommandTest%20run%20directory&In-Reply-To=%3C1068485956.19347.18.camel%40doubledemon.codesourcery.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000575.html">
   <LINK REL="Next"  HREF="000581.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[qmtest] command.ShellCommandTest run directory</H1>
    <B>Mark Mitchell</B> 
    <A HREF="mailto:qmtest%40codesourcery.com?Subject=Re%3A%20%5Bqmtest%5D%20command.ShellCommandTest%20run%20directory&In-Reply-To=%3C1068485956.19347.18.camel%40doubledemon.codesourcery.com%3E"
       TITLE="[qmtest] command.ShellCommandTest run directory">mark at codesourcery.com
       </A><BR>
    <I>Mon Nov 10 17:39:16 UTC 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="000575.html">command.ShellCommandTest run directory
</A></li>
        <LI>Next message: <A HREF="000581.html">[qmtest] command.ShellCommandTest run directory
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#580">[ date ]</a>
              <a href="thread.html#580">[ thread ]</a>
              <a href="subject.html#580">[ subject ]</a>
              <a href="author.html#580">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sun, 2003-11-09 at 00:58, Gilles Depeyrot wrote:
&gt;<i> Hi,
</I>&gt;<i> 
</I>&gt;<i> I would like to have command.ShellCommandTest tests in a QMTest 
</I>&gt;<i> database that run shell scripts that are in the same directory as the 
</I>&gt;<i> current test. Previous QMTest releases used to change the current 
</I>&gt;<i> directory to the test directory itself which allowed commands to be 
</I>&gt;<i> specified as &quot;./someshell.sh&quot;. CVS of QMTest no longer seems to change 
</I>&gt;<i> the current directory so that the command &quot;./someshell.sh&quot; is no longer 
</I>&gt;<i> found.
</I>
The reason that QMTest no longer changes the directory is that it is not
safe to change the directory in a multi-threaded program.  In
particular, the directory change affects all of the threads, so if
QMTest were to change the directory for every test it would no longer be
able to run more than one test at once.

&gt;<i> What is the correct way to specify the directory of the current test in 
</I>&gt;<i> the command field of command.ShellCommandTest tests?
</I>
I think that the best change would be to have QMTest include the test ID
and the database path in the shell-script context, i.e., as $QMV_*
variables.

Would that work for you?

-- 
Mark Mitchell &lt;<A HREF="http://sourcerytools.com/cgi-bin/mailman/listinfo/qmtest">mark at codesourcery.com</A>&gt;
CodeSourcery, LLC


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000575.html">command.ShellCommandTest run directory
</A></li>
	<LI>Next message: <A HREF="000581.html">[qmtest] command.ShellCommandTest run directory
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#580">[ date ]</a>
              <a href="thread.html#580">[ thread ]</a>
              <a href="subject.html#580">[ subject ]</a>
              <a href="author.html#580">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://sourcerytools.com/cgi-bin/mailman/listinfo/qmtest">More information about the qmtest
mailing list</a><br>
</body></html>
