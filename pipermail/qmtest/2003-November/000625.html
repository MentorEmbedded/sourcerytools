<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> PATCH: Remove &quot;version&quot; file
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:qmtest%40codesourcery.com?Subject=Re%3A%20PATCH%3A%20Remove%20%22version%22%20file&In-Reply-To=%3C200311241933.hAOJXF5m017289%40doubledemon.codesourcery.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000624.html">
   <LINK REL="Next"  HREF="000626.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>PATCH: Remove &quot;version&quot; file</H1>
    <B>Mark Mitchell</B> 
    <A HREF="mailto:qmtest%40codesourcery.com?Subject=Re%3A%20PATCH%3A%20Remove%20%22version%22%20file&In-Reply-To=%3C200311241933.hAOJXF5m017289%40doubledemon.codesourcery.com%3E"
       TITLE="PATCH: Remove &quot;version&quot; file">mark at codesourcery.com
       </A><BR>
    <I>Mon Nov 24 19:33:15 UTC 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="000624.html">PATCH: Remove qm.spec.in
</A></li>
        <LI>Next message: <A HREF="000626.html">PATCH: Additional simplifications to build process
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#625">[ date ]</a>
              <a href="thread.html#625">[ thread ]</a>
              <a href="subject.html#625">[ subject ]</a>
              <a href="author.html#625">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Now that we're using Distutils, we don't need the &quot;version&quot; text file.

--
Mark Mitchell
CodeSourcery, LLC
<A HREF="http://sourcerytools.com/cgi-bin/mailman/listinfo/qmtest">mark at codesourcery.com</A>

2003-11-24  Mark Mitchell  &lt;<A HREF="http://sourcerytools.com/cgi-bin/mailman/listinfo/qmtest">mark at codesourcery.com</A>&gt;

	* configure.in (QM_MAJOR_VER): Do not AC_SUBST it.
	(QM_MINOR_VER): Likewise.
	(QM_RELEASE_VER): Likewise.
	(QM_VERSION): Likewise.
	* configure: Regenerated.
	* version: Remove.
	* qm/__version.py.in: Likewise.
	* qm/__version.py: New file.

Index: configure.in
===================================================================
RCS file: /home/qm/Repository/qm/configure.in,v
retrieving revision 1.34
diff -c -5 -p -r1.34 configure.in
*** configure.in	24 Nov 2003 18:31:08 -0000	1.34
--- configure.in	24 Nov 2003 19:23:05 -0000
*************** AC_ARG_ENABLE(maintainer-mode, 
*** 28,48 ****
                fi,
                MAINTAINER_MODE=0)
  AC_SUBST(MAINTAINER_MODE)
  	     
  dnl ####################################################################
- dnl Load the version numbers.
- dnl ####################################################################
- 
- . ${srcdir}/version
- 
- AC_SUBST(QM_MAJOR_VER)
- AC_SUBST(QM_MINOR_VER)
- AC_SUBST(QM_RELEASE_VER)
- AC_SUBST(QM_VERSION)
- 
- dnl ####################################################################
  dnl Find the Python interpreter.  If the user specified the 
  dnl --with-python option, use its value, after checking that it exists.
  dnl Otherwise, look in the PATH.
  dnl ####################################################################
  
--- 28,37 ----
*************** dnl ####################################
*** 123,129 ****
  dnl Generate results
  dnl ####################################################################
  
  AC_OUTPUT(
    GNUmakefile
-   qm/__version.py
  )
--- 112,117 ----
Index: version
===================================================================
RCS file: version
diff -N version
*** version	24 Jul 2003 17:26:18 -0000	1.3
--- /dev/null	1 Jan 1970 00:00:00 -0000
***************
*** 1,6 ****
- # This file is automatically generated.  Do not edit.
- 
- QM_VERSION=2.1.0
- QM_MAJOR_VER=2
- QM_MINOR_VER=1
- QM_RELEASE_VER=0
--- 0 ----
Index: qm/__version.py
===================================================================
RCS file: qm/__version.py
diff -N qm/__version.py
*** /dev/null	1 Jan 1970 00:00:00 -0000
--- qm/__version.py	24 Nov 2003 19:23:05 -0000
***************
*** 0 ****
--- 1,34 ----
+ ########################################################################
+ #
+ # File:   __version.py.in
+ # Author: Nathaniel Smith
+ # Date:   2003-08-10
+ #
+ # Contents:
+ #   Variables to query the version of QM in use.
+ #
+ # Copyright (c) 2003 by CodeSourcery, LLC.  All rights reserved. 
+ #
+ # For license terms see the file COPYING.
+ #
+ ########################################################################
+ 
+ ########################################################################
+ # Variables
+ ########################################################################
+ 
+ version_info = (2, 1, 0)
+ &quot;&quot;&quot;The version of QM as a tuple of (major, minor, release).&quot;&quot;&quot;
+ 
+ version = &quot;%d.%d&quot; % version_info[:-1]
+ &quot;&quot;&quot;The version of QM as a string suitable for printing.&quot;&quot;&quot;
+ 
+ if version_info[-1]:
+     version += &quot;.%d&quot; % version_info[-1]
+ 
+ ########################################################################
+ # Local Variables:
+ # mode: python
+ # indent-tabs-mode: nil
+ # fill-column: 72
+ # End:
Index: qm/__version.py.in
===================================================================
RCS file: qm/__version.py.in
diff -N qm/__version.py.in
*** qm/__version.py.in	10 Aug 2003 21:32:49 -0000	1.1
--- /dev/null	1 Jan 1970 00:00:00 -0000
***************
*** 1,34 ****
- ########################################################################
- #
- # File:   __version.py.in
- # Author: Nathaniel Smith
- # Date:   2003-08-10
- #
- # Contents:
- #   Variables to query the version of QM in use.
- #
- # Copyright (c) 2003 by CodeSourcery, LLC.  All rights reserved. 
- #
- # For license terms see the file COPYING.
- #
- ########################################################################
- 
- ########################################################################
- # Variables
- ########################################################################
- 
- version_info = (@QM_MAJOR_VER@, @QM_MINOR_VER@, @QM_RELEASE_VER@)
- &quot;&quot;&quot;The version of QM as a tuple of (major, minor, release).&quot;&quot;&quot;
- 
- version = &quot;%d.%d&quot; % version_info[:-1]
- &quot;&quot;&quot;The version of QM as a string suitable for printing.&quot;&quot;&quot;
- 
- if version_info[-1]:
-     version += &quot;.%d&quot; % version_info[-1]
- 
- ########################################################################
- # Local Variables:
- # mode: python
- # indent-tabs-mode: nil
- # fill-column: 72
- # End:
--- 0 ----

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000624.html">PATCH: Remove qm.spec.in
</A></li>
	<LI>Next message: <A HREF="000626.html">PATCH: Additional simplifications to build process
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#625">[ date ]</a>
              <a href="thread.html#625">[ thread ]</a>
              <a href="subject.html#625">[ subject ]</a>
              <a href="author.html#625">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://sourcerytools.com/cgi-bin/mailman/listinfo/qmtest">More information about the qmtest
mailing list</a><br>
</body></html>
