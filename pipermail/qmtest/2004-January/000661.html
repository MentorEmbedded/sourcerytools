<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [qmtest] Patch 2.0.3 or use latest CVS?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:qmtest%40codesourcery.com?Subject=Re%3A%20%5Bqmtest%5D%20Patch%202.0.3%20or%20use%20latest%20CVS%3F&In-Reply-To=%3C20040103024240.GA15675%40njs.dhis.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000664.html">
   <LINK REL="Next"  HREF="000662.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[qmtest] Patch 2.0.3 or use latest CVS?</H1>
    <B>Nathaniel Smith</B> 
    <A HREF="mailto:qmtest%40codesourcery.com?Subject=Re%3A%20%5Bqmtest%5D%20Patch%202.0.3%20or%20use%20latest%20CVS%3F&In-Reply-To=%3C20040103024240.GA15675%40njs.dhis.org%3E"
       TITLE="[qmtest] Patch 2.0.3 or use latest CVS?">njs at pobox.com
       </A><BR>
    <I>Sat Jan  3 02:42:41 UTC 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="000664.html">[qmtest] Upgrading tests
</A></li>
        <LI>Next message: <A HREF="000662.html">[qmtest] Patch 2.0.3 or use latest CVS?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#661">[ date ]</a>
              <a href="thread.html#661">[ thread ]</a>
              <a href="subject.html#661">[ subject ]</a>
              <a href="author.html#661">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Tue, Dec 30, 2003 at 04:42:17PM -0500, Scott Lowrey wrote:
&gt;<i>    In running 2.0.3 from the website, I came across a small bug that shows up
</I>&gt;<i>    during a simple test on a remote target.  The bug is in
</I>&gt;<i>    qm/test/classes/rsh_target.py.  I was able to hack it and get the test to
</I>&gt;<i>    work.
</I>&gt;<i> 
</I>&gt;<i>    Today, I built a version of QMTest from the CVS repository and it blew up
</I>&gt;<i>    a bit more violently for the same test:
</I>&gt;<i> 
</I>&gt;<i>     File &quot;/opt/nextest/lib/qm/qm/test/qmtest.py&quot;, line 78, in ?
</I>&gt;<i>        exit_code = command.Execute()
</I>&gt;<i>      File &quot;/lib/qm/qm/test/cmdline.py&quot;, line 569, in Execute
</I>&gt;<i>      File &quot;/lib/qm/qm/test/cmdline.py&quot;, line 1099, in __ExecuteRemote
</I>&gt;<i>      File &quot;/opt/nextest/lib/python2.3/copy_reg.py&quot;, line 50, in
</I>&gt;<i>    _reconstructor
</I>&gt;<i>        obj = base.__new__(cls, state)
</I>&gt;<i>    TypeError: ('dict.__new__(X): X is not a type object (classobj)',
</I>&gt;<i>    &lt;function _reconstructor at 0x81827d4&gt;, (&lt;class qm.test.context.Context at
</I>&gt;<i>    0x833477c&gt;, &lt;type 'dict'&gt;, {}))
</I>
I think QMTest is talking to an old version of itself on the remote
host; you need to install CVS QMTest on the remote host as well.  (Or
if the problem is that CVS QMTest is installed at different locations
on the local and remote hosts, then you should set the 'qmtest'
attribute of your remote target to the full path to an appropriate
qmtest executable on the remote host.)

Evidence?  There were incompatible changes to the Context object, and
this should cause exactly this problem when the local host tries to
send a pickled Context across to the remote host.  Also, the line
numbers in the exception are wrong for any CVS version from at least
the past 6 months.

-- Nathaniel

-- 
.i dei jitfa fanmo xatra

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000664.html">[qmtest] Upgrading tests
</A></li>
	<LI>Next message: <A HREF="000662.html">[qmtest] Patch 2.0.3 or use latest CVS?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#661">[ date ]</a>
              <a href="thread.html#661">[ thread ]</a>
              <a href="subject.html#661">[ subject ]</a>
              <a href="author.html#661">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://sourcerytools.com/cgi-bin/mailman/listinfo/qmtest">More information about the qmtest
mailing list</a><br>
</body></html>
