Index: qm/web.py
===================================================================
RCS file: /home/qm/Repository/qm/qm/web.py,v
retrieving revision 1.77
diff -u -r1.77 web.py
--- qm/web.py	15 Jan 2004 06:11:46 -0000	1.77
+++ qm/web.py	12 Feb 2005 03:33:06 -0000
@@ -43,7 +43,7 @@
 import types
 import urllib
 import user
-import whrandom
+import random
 
 import qm.external.DocumentTemplate as DocumentTemplate
 
@@ -1418,13 +1418,11 @@
         # Extract the client's IP address from the request.
         self.__client_address = request.client_address
 
-        # Now create a session ID.  Start with a new random number
-        # generator.
-        generator = whrandom.whrandom()
-        # Seed it with the system time.
-        generator.seed()
+        # Now create a session ID.
+        # Seed the random number generator with the system time.
+        random.seed()
         # FIXME: Security: Is this OK?
-        digest = md5.new("%f" % generator.random()).digest()
+        digest = md5.new("%f" % random.random()).digest()
         # Convert the digest, which is a 16-character string,
         # to a sequence hexadecimal bytes.
         digest = map(lambda ch: hex(ord(ch))[2:], digest)
Index: qm/external/DocumentTemplate/DT_Util.py
===================================================================
RCS file: /home/qm/Repository/qm/qm/external/DocumentTemplate/DT_Util.py,v
retrieving revision 1.1
diff -u -r1.1 DT_Util.py
--- qm/external/DocumentTemplate/DT_Util.py	16 Apr 2003 02:53:49 -0000	1.1
+++ qm/external/DocumentTemplate/DT_Util.py	12 Feb 2005 03:33:06 -0000
@@ -201,7 +201,7 @@
     if iLen >= RANGELIMIT: raise ValueError, 'range() too large'
     return range(iStart, iEnd, iStep)
 
-import string, math, whrandom
+import string, math, random
 
 try:
     import ExtensionClass
@@ -215,7 +215,7 @@
     d[name]=__builtins__[name]
 d['string']=string
 d['math']=math
-d['whrandom']=whrandom
+d['random']=random
 
 def careful_pow(self, x, y, z):
     if not z: raise ValueError, 'pow(x, y, z) with z==0'
@@ -428,7 +428,7 @@
 
   - Special security-aware versions of 'getattr' and 'hasattr',
   
-  - The Python 'string', 'math', and 'whrandom' modules, and
+  - The Python 'string', 'math', and 'random' modules, and
   
   - A special function, 'test', that supports if-then expressions.
     The 'test' function accepts any number of arguments.  If the
