<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [mips-tls] A couple of potential changes to the MIPS TLS ABI
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:mips-tls%40codesourcery.com?Subject=Re%3A%20%5Bmips-tls%5D%20A%20couple%20of%20potential%20changes%20to%20the%20MIPS%20TLS%20ABI&In-Reply-To=%3C005b01c50fb7%240285c480%240c02a8c0%40MIPS.COM%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000041.html">
   <LINK REL="Next"  HREF="000049.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mips-tls] A couple of potential changes to the MIPS TLS ABI</H1>
    <B>Michael Uhler</B> 
    <A HREF="mailto:mips-tls%40codesourcery.com?Subject=Re%3A%20%5Bmips-tls%5D%20A%20couple%20of%20potential%20changes%20to%20the%20MIPS%20TLS%20ABI&In-Reply-To=%3C005b01c50fb7%240285c480%240c02a8c0%40MIPS.COM%3E"
       TITLE="[mips-tls] A couple of potential changes to the MIPS TLS ABI">uhler at mips.com
       </A><BR>
    <I>Thu Feb 10 21:25:13 UTC 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="000041.html">[mips-tls] A couple of potential changes to the MIPS TLS ABI
</A></li>
        <LI>Next message: <A HREF="000049.html">[mips-tls] A couple of potential changes to the MIPS TLS ABI
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#48">[ date ]</a>
              <a href="thread.html#48">[ thread ]</a>
              <a href="subject.html#48">[ subject ]</a>
              <a href="author.html#48">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
&gt;<i> If this is OK with you, I'd appreciate it if you could get 
</I>&gt;<i> back to us about the choice of register number.  I've got at 
</I>&gt;<i> least a couple more days worth of work before the port will 
</I>&gt;<i> be ready.  It won't cripple me to sit on it for a couple 
</I>&gt;<i> weeks after that, but I'd love to have it submitted - I've 
</I>&gt;<i> already started to get requests for the code.
</I>
I wouldn't exactly say that it's OK with us.  The impression that I get is
that it's too late to change, and even if it weren't we'd have to prove that
the trap-and-emulate approach had performance problems.  We have to trade
that off with our own desire to get NPTL supported, even if we have a
feeling that the implementation may cause problems in the future.

So, I have allocated RDHWR register 29 (decimal) for use as the pseudo-TLS
pointer.  What this means is that we have changed the architecture documents
to indicate that this register is used for an ABI-related activity such that
it will never be re-allocated for another purpose.  At this point, we do not
intend to implement this as a hardware register, nor will other MIPS
implementations be doing so.  We'll revisit this (as an architecture change)
once we measure the performance impact of the proposal and compare that with
other potential changes to the ABI.

Based on the email thread, I'm not sure if Mark's suggestion of a compromise
by marking the RDHWR with a relocation has benefit or not.  If it does, it
would be nice to have some hedge in the future.

/gmu

---
Michael Uhler, Chief Technology Officer
MIPS Technologies, Inc.   Email: <A HREF="http://sourcerytools.com/cgi-bin/mailman/listinfo/mips-tls">uhler at mips.com</A>
1225 Charleston Road      Voice:  (650)567-5025   FAX:   (650)567-5225
Mountain View, CA 94043   Mobile: (650)868-6870   Admin: (650)567-5085


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000041.html">[mips-tls] A couple of potential changes to the MIPS TLS ABI
</A></li>
	<LI>Next message: <A HREF="000049.html">[mips-tls] A couple of potential changes to the MIPS TLS ABI
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#48">[ date ]</a>
              <a href="thread.html#48">[ thread ]</a>
              <a href="subject.html#48">[ subject ]</a>
              <a href="author.html#48">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://sourcerytools.com/cgi-bin/mailman/listinfo/mips-tls">More information about the mips-tls
mailing list</a><br>
</body></html>
