<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [autoconf-conversion] Re: Toplevel configury, multilibs, new autoconf versions
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:autoconf-conversion%40codesourcery.com?Subject=Re%3A%20%5Bautoconf-conversion%5D%20Re%3A%20Toplevel%20configury%2C%20multilibs%2C%20new%20autoconf%20versions&In-Reply-To=%3C20030728195414.GA6633%40disaster.jaj.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000059.html">
   <LINK REL="Next"  HREF="000061.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[autoconf-conversion] Re: Toplevel configury, multilibs, new autoconf versions</H1>
    <B>Phil Edwards</B> 
    <A HREF="mailto:autoconf-conversion%40codesourcery.com?Subject=Re%3A%20%5Bautoconf-conversion%5D%20Re%3A%20Toplevel%20configury%2C%20multilibs%2C%20new%20autoconf%20versions&In-Reply-To=%3C20030728195414.GA6633%40disaster.jaj.com%3E"
       TITLE="[autoconf-conversion] Re: Toplevel configury, multilibs, new autoconf versions">phil at jaj.com
       </A><BR>
    <I>Mon Jul 28 19:54:14 UTC 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="000059.html">[autoconf-conversion] Re: Toplevel configury, multilibs, new autoconf versions
</A></li>
        <LI>Next message: <A HREF="000061.html">[autoconf-conversion] Re: Toplevel configury, multilibs, new autoconf versions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#60">[ date ]</a>
              <a href="thread.html#60">[ thread ]</a>
              <a href="subject.html#60">[ subject ]</a>
              <a href="author.html#60">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sun, Jul 27, 2003 at 07:33:13PM -0400, Phil Edwards wrote:
&gt;<i> 
</I>&gt;<i> When configure examines the command line and sees variable assignments,
</I>&gt;<i> it performs them without examining the current environment.  It does this
</I>&gt;<i> for safety, because it thinks the user is rerunning configure.
</I>&gt;<i> 
</I>&gt;<i> That sound you hear is configure wailing, &quot;MY PRECIOUSSSSSSSS!&quot; as it
</I>&gt;<i> overwrites Multilib with Primary.
</I>&gt;<i> 
</I>&gt;<i> I've made a couple of half-hearted attempts to defeat this from within
</I>&gt;<i> libstdc++'s acinclude.m4, but autoconf is too smart for me.
</I>
I wasn't being evil enough.

*cackle*  I have sneakily removed the bit of shell code in configure which
treats CXX as a &quot;precious&quot; variable.  Other precious variables are still
passed around but CXX is correctly inherited from the environment like we
want it to be.

(Since libstdc++ is no longer shipped on its own, I'm not worried about
end-users making the reconfigure mistake.  The library is /always/
configured via the toplevel.)

This works, and unless somebody has better suggestions, I'm probably going
to use it for a short-term fix.  How short?  Long enough to complete the
transition to the new tools and check things in, where other people can
begin hacking on them.

Moving multilib knowledge to the toplevel is sounding better and better
as the proper solution, at which point the evil can be removed.


Phil

-- 
If ye love wealth greater than liberty, the tranquility of servitude greater
than the animating contest for freedom, go home and leave us in peace.  We seek
not your counsel, nor your arms.  Crouch down and lick the hand that feeds you;
and may posterity forget that ye were our countrymen.            - Samuel Adams

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000059.html">[autoconf-conversion] Re: Toplevel configury, multilibs, new autoconf versions
</A></li>
	<LI>Next message: <A HREF="000061.html">[autoconf-conversion] Re: Toplevel configury, multilibs, new autoconf versions
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#60">[ date ]</a>
              <a href="thread.html#60">[ thread ]</a>
              <a href="subject.html#60">[ subject ]</a>
              <a href="author.html#60">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://sourcerytools.com/cgi-bin/mailman/listinfo/autoconf-conversion">More information about the autoconf-conversion
mailing list</a><br>
</body></html>
