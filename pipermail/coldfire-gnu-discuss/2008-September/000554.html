<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [coldfire-gnu-discuss] m68k-elf-sprite 4.2-125 crashing
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:coldfire-gnu-discuss%40codesourcery.com?Subject=Re%3A%20%5Bcoldfire-gnu-discuss%5D%20m68k-elf-sprite%204.2-125%20crashing&In-Reply-To=%3CKMS-34821861-1724%40mail.mattcohn.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000565.html">
   <LINK REL="Next"  HREF="000564.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[coldfire-gnu-discuss] m68k-elf-sprite 4.2-125 crashing</H1>
    <B>Matt Cohn</B> 
    <A HREF="mailto:coldfire-gnu-discuss%40codesourcery.com?Subject=Re%3A%20%5Bcoldfire-gnu-discuss%5D%20m68k-elf-sprite%204.2-125%20crashing&In-Reply-To=%3CKMS-34821861-1724%40mail.mattcohn.com%3E"
       TITLE="[coldfire-gnu-discuss] m68k-elf-sprite 4.2-125 crashing">codesourcery at mymail.mattcohn.com
       </A><BR>
    <I>Sat Sep  6 20:41:32 UTC 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="000565.html">[coldfire-gnu-discuss] Debugging from flash
</A></li>
        <LI>Next message: <A HREF="000564.html">Reading back VBR from GDB
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#554">[ date ]</a>
              <a href="thread.html#554">[ thread ]</a>
              <a href="subject.html#554">[ subject ]</a>
              <a href="author.html#554">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi David,

I gave the tool a try, I had five sucesses before a failure, the last item to appear on the log in the failure was &quot;Filling memory from location $10000100 to $1000011F&quot;.  Unfourtunatley that still leaves either my computer's USB to blame (although I have used multiple ports on separate controllers) or the BDM on the board itself, but it does confirm that the problem is not with GDB or the GNU/codesourcery toolchain.  I would love to try on my laptop to narrow it down, however I've been unable to get my Vista laptop to recognize the USB Multilink.  After installing the drivers, uninstalling, reinstalling, although USBDeview shows the board connected, various tools are all unable to see the USB Multilink.

I suppose I will continue to use it as-is until later this month when I'm back in school.  My professor has the same board, so I can find out exactly what's to blame.

Thank you for all your help,
--Matt

&gt;<i> Hi Matt,
</I>&gt;<i> I'm assuming you are registered on the P&amp;E web site.  Correct?
</I>&gt;<i> If so, click on the following
</I>&gt;<i> - Support
</I>&gt;<i> - FAQs
</I>&gt;<i> - Enter FAQ# 103
</I>&gt;<i> 
</I>&gt;<i> You should have a &quot;Related Downloads&quot; that has &quot;Test_cfz&quot; link.
</I>&gt;<i> 
</I>&gt;<i> I just updated my driver and need to reboot...hoping all goes well.
</I>&gt;<i> Regards, 
</I>&gt;<i> David  
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> David E Seymour
</I>&gt;<i> 
</I>&gt;<i> <A HREF="http://www.freescale.com/coldfire">http://www.freescale.com/coldfire</A>
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> -----Original Message-----
</I>&gt;<i> From: Matt Cohn [mailto:<A HREF="http://sourcerytools.com/cgi-bin/mailman/listinfo/coldfire-gnu-discuss">codesourcery at mymail.mattcohn.com</A>] 
</I>&gt;<i> Sent: Thursday, September 04, 2008 7:33 PM
</I>&gt;<i> To: <A HREF="http://sourcerytools.com/cgi-bin/mailman/listinfo/coldfire-gnu-discuss">coldfire-gnu-discuss at codesourcery.com</A>
</I>&gt;<i> Subject: RE: [coldfire-gnu-discuss] m68k-elf-sprite 4.2-125 crashing
</I>&gt;<i> 
</I>&gt;<i> Thank you, I'm running the GNU tools via cygwin on Windows XP for
</I>&gt;<i> clarification.  I found and used USBDeview.exe to uninstall my USB
</I>&gt;<i> drivers to be reinstalled - they reinstalled fine but it did not
</I>&gt;<i> alleviate the problem.  I don't have testcfz.exe, it wasn't on the CD
</I>&gt;<i> that came with the M52233DEMO, and I wasn't able to find it anywhere on
</I>&gt;<i> pemicro.com.  Do you know where I can find a copy?  Also I connected an
</I>&gt;<i> external power supply and that had no effect.
</I>&gt;<i> 
</I>&gt;<i> What's so frustrating about this problem is I can't find any evidence of
</I>&gt;<i> anyone else having anything similar!  Most of the time when leaving code
</I>&gt;<i> executing for a couple minutes I'm simply unable to suspend again.  If
</I>&gt;<i> I'm stepping through, invariably after so many steps (anywhere from 5 to
</I>&gt;<i> 50) I recieve one of:
</I>&gt;<i> 
</I>&gt;<i> m68k-elf-sprite: error: Lost connection to hardware device Error from
</I>&gt;<i> remote target: Lost connection to hardware device
</I>&gt;<i> 
</I>&gt;<i> --or--
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> m68k-elf-sprite: error: Lost connection to hardware device
</I>&gt;<i> m68k-elf-sprite: Not closing port because of lost connection Remote
</I>&gt;<i> communication error: No error.
</I>&gt;<i> 
</I>&gt;<i> --or-- 
</I>&gt;<i> 
</I>&gt;<i> nothing on the console and m68k-elf-sprite will simply consume lots of
</I>&gt;<i> CPU while eclipse does nothing, the step buttons grayed out, pressing
</I>&gt;<i> halt or suspend grays out the corrosponding button.
</I>&gt;<i> 
</I>&gt;<i> I additionally installed XP SP3 as well as a few other Windows updates,
</I>&gt;<i> disabled as many startup programs as I could bare to be without, updated
</I>&gt;<i> Zylin Embedded Debug to its latest version, and tried using &quot;GDB
</I>&gt;<i> Hardware Debugging&quot; instead of &quot;Zylin Embedded debug&quot; today with no
</I>&gt;<i> effect.
</I>&gt;<i> 
</I>&gt;<i> Any ideas or things to try are sincerely appreciated - thank you!
</I>&gt;<i> 
</I>&gt;<i> --Matt
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> &gt; Just to test the BDM interface I have a utility (PC/Windows based) 
</I>&gt;<i> &gt; call Testcfz.exe.  With the M52233DEMO connect to PC via the USB 
</I>&gt;<i> &gt; cable, it will find the ColdFire device and run a simple test and 
</I>&gt;<i> &gt; report PASS or FAILURE.
</I>&gt;<i> &gt; I've seen weird things if the PC USB port doesn't supply the 500mA.  
</I>&gt;<i> &gt; You might try using external power supply to rule that out.
</I>&gt;<i> &gt; Does your issue happen when not using verbose mode?
</I>&gt;<i> &gt; I haven't sparked up my Linux box with CodeSourcery tools for awhile.
</I>&gt;<i> &gt; I'll try to find some time to do that.
</I>&gt;<i> &gt; I have used a utility called &quot;USBDeview.exe&quot; (again PC/Windows based) 
</I>&gt;<i> &gt; to remove/uninstall the USB drivers so that I can start fresh and new..
</I>&gt;<i> &gt; Regards,
</I>&gt;<i> &gt; David
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; David E Seymour
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; <A HREF="http://www.freescale.com/coldfire">http://www.freescale.com/coldfire</A>
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; -----Original Message-----
</I>&gt;<i> &gt; From: Matt Cohn [mailto:<A HREF="http://sourcerytools.com/cgi-bin/mailman/listinfo/coldfire-gnu-discuss">codesourcery at mymail.mattcohn.com</A>]
</I>&gt;<i> &gt; Sent: Thursday, September 04, 2008 2:18 PM
</I>&gt;<i> &gt; To: Seymour David-RA2693
</I>&gt;<i> &gt; Subject: RE: [coldfire-gnu-discuss] m68k-elf-sprite 4.2-125 crashing
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Thanks David, I gave it a shot, but I wasn't able to locate updated 
</I>&gt;<i> &gt; firmware you mentioned.  From here:
</I>&gt;<i> &gt; <A HREF="http://www.pemicro.com/support/download_processor.cfm">http://www.pemicro.com/support/download_processor.cfm</A> the only 
</I>&gt;<i> &gt; relevent updates I found were to the hardware interface drivers (which
</I>&gt;<i> 
</I>&gt;<i> &gt; I updated just to be sure).
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; The M52233DEMO board lists its onboard BDM as equivalent to USB-ML-CF,
</I>&gt;<i> &gt; here:
</I>&gt;<i> &gt; <A HREF="http://www.pemicro.com/products/product_viewDetails.cfm?product_id=163">http://www.pemicro.com/products/product_viewDetails.cfm?product_id=163</A>
</I>&gt;<i> &gt; &amp;C
</I>&gt;<i> &gt; FID=1912140&amp;CFTOKEN=57896256
</I>&gt;<i> &gt; whose downloads section doesn't list any updated firmware.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Do you have any further ideas or things for me to try?
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Thank you,
</I>&gt;<i> &gt; --Matt
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; &gt; We've been having issues with the version of P&amp;E USB BDM firmware.  
</I>&gt;<i> &gt; &gt; You might register on www.pemicro.com and download the latest BDM 
</I>&gt;<i> &gt; &gt; test
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; &gt; utility and firmware to see if that helps.
</I>&gt;<i> &gt; &gt; Regards,
</I>&gt;<i> &gt; &gt; David
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; David E Seymour
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; <A HREF="http://www.freescale.com/coldfire">http://www.freescale.com/coldfire</A>
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; -----Original Message-----
</I>&gt;<i> &gt; &gt; From: Nathan Sidwell [mailto:<A HREF="http://sourcerytools.com/cgi-bin/mailman/listinfo/coldfire-gnu-discuss">nathan at codesourcery.com</A>]
</I>&gt;<i> &gt; &gt; Sent: Tuesday, September 02, 2008 3:26 AM
</I>&gt;<i> &gt; &gt; To: Matt Cohn
</I>&gt;<i> &gt; &gt; Cc: <A HREF="http://sourcerytools.com/cgi-bin/mailman/listinfo/coldfire-gnu-discuss">coldfire-gnu-discuss at codesourcery.com</A>
</I>&gt;<i> &gt; &gt; Subject: Re: [coldfire-gnu-discuss] m68k-elf-sprite 4.2-125 crashing
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; Matt Cohn wrote:
</I>&gt;<i> &gt; &gt; &gt; Hia,
</I>&gt;<i> &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; I am debugging a M52233DEMO board using the P&amp;E USB BDM.  I 
</I>&gt;<i> &gt; &gt; &gt; connect to
</I>&gt;<i> &gt; &gt; it via m68k-elf-sprite.  I turned on the verbose console and put the
</I>&gt;<i> 
</I>&gt;<i> &gt; &gt; sprite in verbose mode, and here's the problem I'm experiencing.
</I>&gt;<i> &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; Usually debugging will work fine for a while.  I will be able to
</I>&gt;<i> &gt; &gt; continue, suspend, step, break, and continue again without problems..
</I>&gt;<i> &gt; &gt; After leaving the program running for a while (a couple minutes) or 
</I>&gt;<i> &gt; &gt; doing a lot of stepping (anywhere, not in one particular place) I 
</I>&gt;<i> &gt; &gt; will
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; &gt; experience the following.
</I>&gt;<i> &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; If the code was running and I try to do a suspend, m68k-elf-sprite
</I>&gt;<i> &gt; &gt; uses a lot of CPU and doesn't respond.  Eventually GDB times out 
</I>&gt;<i> &gt; &gt; with &quot;Target request failed: Failed to interrupt&quot;.  During this 
</I>&gt;<i> &gt; &gt; there is no
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; &gt; response on the console.
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; I should also note that occasionally (about 1/5th of the time) 
</I>&gt;<i> &gt; &gt; &gt; when
</I>&gt;<i> &gt; &gt; programming my board using CF Flasher, it will hang, timeout, fail 
</I>&gt;<i> &gt; &gt; validation and need to be flashed again.  Flashing again works fine..
</I>&gt;<i> &gt; &gt; I have tried disconnecting all of my USB devices, using a different 
</I>&gt;<i> &gt; &gt; USB port, and killing all background processes and services to no
</I>&gt;<i> &gt; avail.
</I>&gt;<i> &gt; &gt; Any advice is sincerely appreciated.
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; This sounds very much like a hardware problem, because you're 
</I>&gt;<i> &gt; &gt; getting it from two independent software tools.
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; nathan
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; -- 
</I>&gt;<i> &gt; &gt; Nathan Sidwell    ::   <A HREF="http://www.codesourcery.com">http://www.codesourcery.com</A>   ::
</I>&gt;<i> &gt; &gt; CodeSourcery
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> 
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000565.html">[coldfire-gnu-discuss] Debugging from flash
</A></li>
	<LI>Next message: <A HREF="000564.html">Reading back VBR from GDB
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#554">[ date ]</a>
              <a href="thread.html#554">[ thread ]</a>
              <a href="subject.html#554">[ subject ]</a>
              <a href="author.html#554">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://sourcerytools.com/cgi-bin/mailman/listinfo/coldfire-gnu-discuss">More information about the coldfire-gnu-discuss
mailing list</a><br>
</body></html>
