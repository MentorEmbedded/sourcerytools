<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> ColdFire Interrupts
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:coldfire-gnu-discuss%40codesourcery.com?Subject=Re%3A%20ColdFire%20Interrupts&In-Reply-To=%3CD3E384327F5C6D48AADCEA84160B7D731EF6CF%40mcbain.dw.local%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000498.html">
   <LINK REL="Next"  HREF="000500.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>ColdFire Interrupts</H1>
    <B>Corrin Meyer</B> 
    <A HREF="mailto:coldfire-gnu-discuss%40codesourcery.com?Subject=Re%3A%20ColdFire%20Interrupts&In-Reply-To=%3CD3E384327F5C6D48AADCEA84160B7D731EF6CF%40mcbain.dw.local%3E"
       TITLE="ColdFire Interrupts">Corrin.Meyer at dornerworks.com
       </A><BR>
    <I>Tue Jul  1 23:05:49 UTC 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="000498.html">[coldfire-gnu-discuss] debug library -ldbug on 4.2.-125
</A></li>
        <LI>Next message: <A HREF="000500.html">[coldfire-gnu-discuss] ColdFire Interrupts
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#499">[ date ]</a>
              <a href="thread.html#499">[ thread ]</a>
              <a href="subject.html#499">[ subject ]</a>
              <a href="author.html#499">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>According to the ColdFire datasheets, on entering of an ISR, the only
first instruction is guaranteed to run with interrupts disabled, and
therefore should modify the status register.  Since on interrupt, the
processor creates an exception stack frame in which the status register
(SR) is stored, the first instruction in an ISR should load an immediate
value into SR.  Either that, or use the 'STRLDSR' instruction.  However,
even with a function marked with &quot;__attribute__((interrupt))&quot; GCC
doesn't seem to generate these instructions.  I also noticed that none
of the CS3 default interrupts do this.

 

Is this the intended functionality?  Am I correct in assuming that the
only way to write truly correct ISRs is to do so in assembly (or at
least use assembly as a wrapper before calling C code)?

 

Corrin J. Meyer 
DornerWorks, Ltd. 
Embedded Systems Engineering 
  
T: 616.389.8336 
F: 616.245.8372 
E: <A HREF="http://sourcerytools.com/cgi-bin/mailman/listinfo/coldfire-gnu-discuss">corrin.meyer at dornerworks.com</A> &lt;mailto:<A HREF="http://sourcerytools.com/cgi-bin/mailman/listinfo/coldfire-gnu-discuss">corrin.meyer at dornerworks.com</A>&gt;  
  
3445 Lake Eastbrook Blvd. SE 
Grand Rapids, MI 49546 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://sourcerytools.com/pipermail/coldfire-gnu-discuss/attachments/20080701/1ac6887e/attachment.html">http://sourcerytools.com/pipermail/coldfire-gnu-discuss/attachments/20080701/1ac6887e/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000498.html">[coldfire-gnu-discuss] debug library -ldbug on 4.2.-125
</A></li>
	<LI>Next message: <A HREF="000500.html">[coldfire-gnu-discuss] ColdFire Interrupts
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#499">[ date ]</a>
              <a href="thread.html#499">[ thread ]</a>
              <a href="subject.html#499">[ subject ]</a>
              <a href="author.html#499">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://sourcerytools.com/cgi-bin/mailman/listinfo/coldfire-gnu-discuss">More information about the coldfire-gnu-discuss
mailing list</a><br>
</body></html>
