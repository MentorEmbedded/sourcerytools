<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [coldfire-gnu-discuss] Small data sections
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:coldfire-gnu-discuss%40codesourcery.com?Subject=Re%3A%20%5Bcoldfire-gnu-discuss%5D%20Small%20data%20sections&In-Reply-To=%3C468100D4.3040600%40codesourcery.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000348.html">
   <LINK REL="Next"  HREF="000351.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[coldfire-gnu-discuss] Small data sections</H1>
    <B>Nathan Sidwell</B> 
    <A HREF="mailto:coldfire-gnu-discuss%40codesourcery.com?Subject=Re%3A%20%5Bcoldfire-gnu-discuss%5D%20Small%20data%20sections&In-Reply-To=%3C468100D4.3040600%40codesourcery.com%3E"
       TITLE="[coldfire-gnu-discuss] Small data sections">nathan at codesourcery.com
       </A><BR>
    <I>Tue Jun 26 12:04:36 UTC 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000348.html">Small data sections
</A></li>
        <LI>Next message: <A HREF="000351.html">[coldfire-gnu-discuss] Small data sections
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#349">[ date ]</a>
              <a href="thread.html#349">[ thread ]</a>
              <a href="subject.html#349">[ subject ]</a>
              <a href="author.html#349">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>David Brown wrote:
&gt;<i> Just a passing thought...
</I>&gt;<i> 
</I>&gt;<i> Some gcc targets support the concept of &quot;small data section&quot;.  This is 
</I>&gt;<i> particularly important for 32-bit RISC cpus (like the PPC), were an 
</I>&gt;<i> addressing mode of the form &quot;Rx + 16bit&quot; can fit in one instruction, 
</I>&gt;<i> while an absolute 32-bit address takes a lot of messing around to get 
</I>&gt;<i> the address into a register and then doing the real load or store.  On a 
</I>&gt;<i> ColdFire, which has absolute long addressing modes, it is not nearly as 
</I>&gt;<i> important.
</I>
thanks for your suggestion.

As you probably realize, small data sections are a psABI design feature.  We 
would be stepping outside of the m68k ABI by adding that to ColdFire.  ABIs that 
have small data sections generally have a lot of registers -- mips and ppc have 
32 integer registers, for instance.  m68k has 8 address registers (arm has 16 
registers, and I don't think the ARM EABI has small data references).

Whether small data is a win on ColdFire is probably application-specific.  We 
may get better mileage by teaching the compiler more about instruction costs and 
using section anchors.  (The m68k port is one of the oldest gcc ports, and its 
age shows in certain places.)

nathan
-- 
Nathan Sidwell    ::   <A HREF="http://www.codesourcery.com">http://www.codesourcery.com</A>   ::         CodeSourcery
<A HREF="http://sourcerytools.com/cgi-bin/mailman/listinfo/coldfire-gnu-discuss">nathan at codesourcery.com</A>    ::     <A HREF="http://www.planetfall.pwp.blueyonder.co.uk">http://www.planetfall.pwp.blueyonder.co.uk</A>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000348.html">Small data sections
</A></li>
	<LI>Next message: <A HREF="000351.html">[coldfire-gnu-discuss] Small data sections
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#349">[ date ]</a>
              <a href="thread.html#349">[ thread ]</a>
              <a href="subject.html#349">[ subject ]</a>
              <a href="author.html#349">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://sourcerytools.com/cgi-bin/mailman/listinfo/coldfire-gnu-discuss">More information about the coldfire-gnu-discuss
mailing list</a><br>
</body></html>
