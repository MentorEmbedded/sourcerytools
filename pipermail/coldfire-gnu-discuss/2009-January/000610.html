<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> Coldfire application/compiler problem
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:coldfire-gnu-discuss%40codesourcery.com?Subject=Re%3A%20Coldfire%20application/compiler%20problem&In-Reply-To=%3C49838E28.5080809%40meadorresearch.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000609.html">
   
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>Coldfire application/compiler problem</H1>
    <B>Dave Meador</B> 
    <A HREF="mailto:coldfire-gnu-discuss%40codesourcery.com?Subject=Re%3A%20Coldfire%20application/compiler%20problem&In-Reply-To=%3C49838E28.5080809%40meadorresearch.com%3E"
       TITLE="Coldfire application/compiler problem">dave at meadorresearch.com
       </A><BR>
    <I>Fri Jan 30 23:32:56 UTC 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="000609.html">Compiled shared uClibc with another shared lib
</A></li>
        
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#610">[ date ]</a>
              <a href="thread.html#610">[ thread ]</a>
              <a href="subject.html#610">[ subject ]</a>
              <a href="author.html#610">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

I have a c++ application using Freescale 547x_548x 2007 BSP which
compiles runs using compiler version:
g++ version 4.1.1 (CodeSourcery Sourcery G++ 4.1-30).

However, I needed to upgrade to the latest Freescale 2008 BSP fix
corruptions which were caused by a flaw in the CPU cache handling of the
kernel -- the release notes claim this issue is fixed in the latest 2008
BSP.

My application (same exact code) now crashes with a strange problem when
compiled with the 2008 BSP compiler:
g++ version 4.2.3 (Sourcery G++ Lite 4.2-125)

I also tried upgrading to the latest CodeSourcery compiler:
gcc version 4.3.2 (Sourcery G++ Lite 4.3-43)  - but I get the same crash
behaviour as the Lite-4.2-125 version.

The problem I am getting is my application starts up and runs, but then
it crashes as soon as it calls &quot;new&quot; to allocate a specific class.   No
constructor code is executed before the crash.  I have tried the
following to determine where the crash could be happening, but it
appears as though the breakage is in the code executed just prior to
calling the constructor (sorry I don't know the compiler terminology here):

* Tried logging first line inside the constructor - no logs are
executed, but crashes after the call to &quot;new&quot;
* Tried eliminating the body code of the constructor, no help
* Tried calling &quot;new&quot;/&quot;delete&quot; with sizeof(MyClass) just prior to the
real alloc and the test alloc/delete completes fine, but crashes upon
calling the alloc of &quot;MyClass&quot;.
* Tried moving the alloc MyClass call to various other places in the
code, it crashes upon the first call every time.

Does anyone have any ideas what this could be and how I might go about
figuring this out? 
Any help would be greatly appreciated,

Dave


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000609.html">Compiled shared uClibc with another shared lib
</A></li>
	
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#610">[ date ]</a>
              <a href="thread.html#610">[ thread ]</a>
              <a href="subject.html#610">[ subject ]</a>
              <a href="author.html#610">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://sourcerytools.com/cgi-bin/mailman/listinfo/coldfire-gnu-discuss">More information about the coldfire-gnu-discuss
mailing list</a><br>
</body></html>
