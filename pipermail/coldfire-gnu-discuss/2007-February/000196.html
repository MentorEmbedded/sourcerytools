<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [coldfire-gnu-discuss] save value at 0x1000090C with board 5485
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:coldfire-gnu-discuss%40codesourcery.com?Subject=Re%3A%20%5Bcoldfire-gnu-discuss%5D%20save%20value%20at%200x1000090C%20with%20board%205485&In-Reply-To=%3C20070201174322.GB15617%40lios%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000190.html">
   <LINK REL="Next"  HREF="000191.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[coldfire-gnu-discuss] save value at 0x1000090C with board 5485</H1>
    <B>Carlos O'Donell</B> 
    <A HREF="mailto:coldfire-gnu-discuss%40codesourcery.com?Subject=Re%3A%20%5Bcoldfire-gnu-discuss%5D%20save%20value%20at%200x1000090C%20with%20board%205485&In-Reply-To=%3C20070201174322.GB15617%40lios%3E"
       TITLE="[coldfire-gnu-discuss] save value at 0x1000090C with board 5485">carlos at codesourcery.com
       </A><BR>
    <I>Thu Feb  1 17:43:27 UTC 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000190.html">[coldfire-gnu-discuss] save value at 0x1000090C with board 5485
</A></li>
        <LI>Next message: <A HREF="000191.html">Problem with m68k-elf-ar and absolute Cygwin paths
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#196">[ date ]</a>
              <a href="thread.html#196">[ thread ]</a>
              <a href="subject.html#196">[ subject ]</a>
              <a href="author.html#196">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Thu, Feb 01, 2007 at 04:37:42AM -0600, Ha Luong wrote:
&gt;<i>    #define SLT_SSR0   (*(unsigned long *)(void*)(0x1000090C))
</I>&gt;<i>    int main (void)
</I>&gt;<i>    {
</I>&gt;<i>     int i=0;
</I>&gt;<i>     SLT_SSR0=i;
</I>&gt;<i>     i=1;
</I>&gt;<i>     SLT_SSR0=i;
</I>&gt;<i>     printf(&quot;%lu&quot;,SLT_SSR0);
</I>&gt;<i>     i=2;
</I>&gt;<i>     SLT_SSR0=i;
</I>&gt;<i>     printf(&quot;%lu&quot;,SLT_SSR0);
</I>&gt;<i>     i=3;
</I>&gt;<i>     SLT_SSR0=i;
</I>&gt;<i>     printf(&quot;%lu&quot;,SLT_SSR0);
</I>&gt;<i>     i=4;
</I>&gt;<i>     SLT_SSR0=i;
</I>&gt;<i>     printf(&quot;%lu&quot;,SLT_SSR0);
</I>&gt;<i> 
</I>&gt;<i>     return 0;
</I>&gt;<i>    }
</I>&gt;<i> 
</I>&gt;<i>    and receive 0034 . I don't know why 2 first values didn't receive 1,2 .
</I>
Thank you for using Sourcery G++!

At the highest optimization I get &quot;1234&quot; when I run this on real
hardware. The assembly output from the compiler looks correct.

As another poster has mentioned, if you expect SLT_SSR0 to change
unexpectedly then you should mark the data or accesses as &quot;volatile.&quot;

In order to recreate the problem on our end we need you to provide us
with the following information: 

1. The compiler command line that causes the failure.

e.g. g++ -O2 -g -o test.o test.cc

2. The output of running the compiler but with &quot;-v&quot; added.

e.g. g++ -v -O2 -g -o test.o test.cc &gt; compiler.log

3. The pre-processed source output by the compiler. This is done by
adding '-save-temps' to the compiler command line. This produces a &quot;.ii&quot;
file that you can attach to an email.

e.g. g++ -save-temps -v -O2 -g -o test.o test.cc

Please attach the &quot;compiler.log&quot; and the &quot;*.ii&quot; file to an email. 

Cheers,
Carlos.
-- 
Carlos O'Donell
CodeSourcery
<A HREF="http://sourcerytools.com/cgi-bin/mailman/listinfo/coldfire-gnu-discuss">carlos at codesourcery.com</A>
(650) 331-3385 x716

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000190.html">[coldfire-gnu-discuss] save value at 0x1000090C with board 5485
</A></li>
	<LI>Next message: <A HREF="000191.html">Problem with m68k-elf-ar and absolute Cygwin paths
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#196">[ date ]</a>
              <a href="thread.html#196">[ thread ]</a>
              <a href="subject.html#196">[ subject ]</a>
              <a href="author.html#196">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://sourcerytools.com/cgi-bin/mailman/listinfo/coldfire-gnu-discuss">More information about the coldfire-gnu-discuss
mailing list</a><br>
</body></html>
