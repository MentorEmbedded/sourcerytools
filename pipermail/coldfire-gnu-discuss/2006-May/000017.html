<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> Issues with ColdFire toolchain
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:coldfire-gnu-discuss%40codesourcery.com?Subject=Re%3A%20Issues%20with%20ColdFire%20toolchain&In-Reply-To=%3C20060511100651.91302353BE7%40atlas.denx.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   
   <LINK REL="Next"  HREF="000018.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>Issues with ColdFire toolchain</H1>
    <B>Wolfgang Denk</B> 
    <A HREF="mailto:coldfire-gnu-discuss%40codesourcery.com?Subject=Re%3A%20Issues%20with%20ColdFire%20toolchain&In-Reply-To=%3C20060511100651.91302353BE7%40atlas.denx.de%3E"
       TITLE="Issues with ColdFire toolchain">wd at denx.de
       </A><BR>
    <I>Thu May 11 10:06:51 UTC 2006</I>
    <P><UL>
        
        <LI>Next message: <A HREF="000018.html">[coldfire-gnu-discuss] Issues with ColdFire toolchain
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17">[ date ]</a>
              <a href="thread.html#17">[ thread ]</a>
              <a href="subject.html#17">[ subject ]</a>
              <a href="author.html#17">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

we try to use the GCC-4.1 based toolchain for ColdFire to  build  the
U-Boot boot loader, the Linux kernel and some applications.

We ran into some problems:

(1) It seems that this configuration lacks  -fPIC  support  which  is
    crucial  for  U-Boot  building. [I am aware that -fpic support is
    present, but this is unfortunately not sufficient, too small  GOT
    size available.]

    Are there plans to support -fPIC ?

(2) We can build applications, but they don't run. For example,  when
    building OpenVPN we get:

	# ./openvpn
	Allocation of length 1136352 from process 46 failed
	DMA per-cpu: empty
	Normal per-cpu:
	cpu 0 hot: low 2, high 6, batch 1
	cpu 0 cold: low 0, high 2, batch 1
	HighMem per-cpu: empty

	Free pages:        5728kB (0kB HighMem)
	Active:571 inactive:1147 dirty:0 writeback:0 unstable:0 free:1432 slab:541 mapped:0
	pagetables:0
	DMA free:0kB min:0kB low:0kB high:0kB active:0kB inactive:0kB present:0kB 
	pages_scanned:0
	all_unreclaimable? no
	lowmem_reserve[]: 0 16 16
	Normal free:5728kB min:512kB low:640kB high:768kB active:2284kB inactive:4588kB
	present:16384kB pages_scanned:0 all_unreclaimable? no
	lowmem_reserve[]: 0 0 0
	HighMem free:0kB min:128kB low:160kB high:192kB active:0kB inactive:0kB present:0kB
	pages_scanned:0 all_unreclaimable? no
	lowmem_reserve[]: 0 0 0
	DMA: empty
	Normal: 4*4kB 4*8kB 5*16kB 1*32kB 1*64kB 1*128kB 1*256kB 2*512kB 2*1024kB 1*2048kB
	0*4096kB = 5728kB
	HighMem: empty
	Unable to allocate RAM for process text/data, errno 12
	pid 46: failed 4

    Using the old uCLinux GCC-2.95 toolchain  this  works  fine.  For
    this working image, &quot;file&quot; reports

	openvpn: BFLT executable - version 4 gotpic

    Your GC-4.1 toolchain gives:

	openvpn: BFLT executable - version 4 ram

    Is this a problem? Any other idea what might be wrong?

Best regards,

Wolfgang Denk

-- 
Software Engineering:  Embedded and Realtime Systems,  Embedded Linux
Phone: (+49)-8142-66989-10 Fax: (+49)-8142-66989-80 Email: <A HREF="http://sourcerytools.com/cgi-bin/mailman/listinfo/coldfire-gnu-discuss">wd at denx.de</A>
Imagination is more important than knowledge.      -- Albert Einstein

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	
	<LI>Next message: <A HREF="000018.html">[coldfire-gnu-discuss] Issues with ColdFire toolchain
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#17">[ date ]</a>
              <a href="thread.html#17">[ thread ]</a>
              <a href="subject.html#17">[ subject ]</a>
              <a href="author.html#17">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://sourcerytools.com/cgi-bin/mailman/listinfo/coldfire-gnu-discuss">More information about the coldfire-gnu-discuss
mailing list</a><br>
</body></html>
