<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> FreeRTOS with CodeSourcery G++
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:coldfire-gnu-discuss%40codesourcery.com?Subject=Re%3A%20FreeRTOS%20with%20CodeSourcery%20G%2B%2B&In-Reply-To=%3C1187050858.23881.70.camel%40jd-mobile.sigma.local%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000368.html">
   <LINK REL="Next"  HREF="000370.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>FreeRTOS with CodeSourcery G++</H1>
    <B>Joshua Boyd</B> 
    <A HREF="mailto:coldfire-gnu-discuss%40codesourcery.com?Subject=Re%3A%20FreeRTOS%20with%20CodeSourcery%20G%2B%2B&In-Reply-To=%3C1187050858.23881.70.camel%40jd-mobile.sigma.local%3E"
       TITLE="FreeRTOS with CodeSourcery G++">joshb at sigmaelectronics.com
       </A><BR>
    <I>Tue Aug 14 00:26:17 UTC 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000368.html">ignore: test
</A></li>
        <LI>Next message: <A HREF="000370.html">[coldfire-gnu-discuss] FreeRTOS with CodeSourcery G++
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#369">[ date ]</a>
              <a href="thread.html#369">[ thread ]</a>
              <a href="subject.html#369">[ subject ]</a>
              <a href="author.html#369">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I've seen one or two references to people using this compiler package
and FreeRTOS.

At the moment I'm trying to target the 5235evb, but I suspect that where
I am getting stuck is not all that specific to which coldfire chip I'm
using.  Also, I am trying to develop from windows 2000.

Anyway, following the getting started guide to create a hello world
program, which is downloaded via gdb and the sprite utility functions
just fine.  However, I don't believe that freertos will be able to work
in the ram-hosted mode.

If I use the sample port to this board included in freertos version 4.4,
it takes only the modifying the system paths in the makefile to compile
the demo program.  So far so good.  However, when I download the
demo.elf file to the board using the same method used for the hello
world example, things seem to get stuck on startup.

(gdb) target remote | m68k-elf-sprite pe: m5235evb
Remote debugging using | m68k-elf-sprite pe: m5235evb
m68k-elf-sprite:Opening P&amp;E USBMultilink port 1 (USB1 : USB-ML-CF Rev C
(PE6012637))
m68k-elf-sprite: Target reset
0x00000000 in __text_start()
(gdb) load
Loading section .text, size 0xd770 lma 0x0
Loading section .data, size 0x840 lma 0xd770
Start address 0x408, load size 57264
Transfer rate: 229056 bits/sec, 7158 bytes/write.
(gdb) continue
Continuing.

Program received signal SIGTRAP, Trace/breakpoint trap.
VecDefault () at system/vector.S:293
293	bra VecDefault
Current language: auto; currently asm
(gdb)

So, a few things I wonder is whether the BDM is interfering with this
running.  Should I instead be using tftp initially, or even s-records?
I was never able to get a standalone helloworld working using either of
those methods though.

The freertos people seem to expect me to use a custom compiled
gdb/insight with a bdm patch added, and to download and run the program
that way.  I don't know to what extent that would function the same as
CodeSourcery's GDB using the m68k-elf-sprite bridge. 

FWIW, I'm not attached to FreeRTOS.  I'm only looking at it as a way to
get TCP/IP going.  If someone wanted to comment about using SourceryG++
with lwIP or uIP or something similar without an underlying OS, I'd be
eager to look at it.  Alternatively, if there is another RTOS that can
be used with SourceryG++ that can run in 32k of ram while using TCP/IP,
I'd be quite happy to look at that as well, even if it was a commercial
OS, provided that it was in my price range.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000368.html">ignore: test
</A></li>
	<LI>Next message: <A HREF="000370.html">[coldfire-gnu-discuss] FreeRTOS with CodeSourcery G++
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#369">[ date ]</a>
              <a href="thread.html#369">[ thread ]</a>
              <a href="subject.html#369">[ subject ]</a>
              <a href="author.html#369">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://sourcerytools.com/cgi-bin/mailman/listinfo/coldfire-gnu-discuss">More information about the coldfire-gnu-discuss
mailing list</a><br>
</body></html>
