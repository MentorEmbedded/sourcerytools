<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [coldfire-gnu-discuss] How to access FLASHBAR?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:coldfire-gnu-discuss%40codesourcery.com?Subject=Re%3A%20%5Bcoldfire-gnu-discuss%5D%20How%20to%20access%20%3D%3FUTF-8%3FQ%3FFLASHBAR%3D3F%3F%3D&In-Reply-To=%3Cf758b3603c7a0d5781b9b416b00ad5d6%40oxygen%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000739.html">
   <LINK REL="Next"  HREF="000742.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[coldfire-gnu-discuss] How to access FLASHBAR?</H1>
    <B>micke</B> 
    <A HREF="mailto:coldfire-gnu-discuss%40codesourcery.com?Subject=Re%3A%20%5Bcoldfire-gnu-discuss%5D%20How%20to%20access%20%3D%3FUTF-8%3FQ%3FFLASHBAR%3D3F%3F%3D&In-Reply-To=%3Cf758b3603c7a0d5781b9b416b00ad5d6%40oxygen%3E"
       TITLE="[coldfire-gnu-discuss] How to access FLASHBAR?">micke at beronius.com
       </A><BR>
    <I>Mon Oct  4 09:29:58 UTC 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="000739.html">[coldfire-gnu-discuss] How to access FLASHBAR?
</A></li>
        <LI>Next message: <A HREF="000742.html">Codesourcery support of usbdm ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#741">[ date ]</a>
              <a href="thread.html#741">[ thread ]</a>
              <a href="subject.html#741">[ subject ]</a>
              <a href="author.html#741">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, 04 Oct 2010 11:03:13 +0200, m8847 &lt;<A HREF="http://sourcerytools.com/cgi-bin/mailman/listinfo/coldfire-gnu-discuss">m8847 at abc.se</A>&gt; wrote:
&gt;<i> 
</I>&gt;<i> On Thu, 30 Sep 2010 16:07:13 +0100, Nathan Sidwell
</I>&gt;<i> &lt;<A HREF="http://sourcerytools.com/cgi-bin/mailman/listinfo/coldfire-gnu-discuss">nathan at codesourcery.com</A>&gt; wrote:
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i>     __asm__ volatile (&quot;movec %0,FLASHBAR&quot; : : &quot;r&quot;(0x21));
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> will do what you want.  You may need %% before FLASHBAR, I'm not sure.
</I>

&gt;<i> OK, 
</I>&gt;<i>      __asm__ volatile (&quot;movec %0,%%FLASHBAR&quot; : : &quot;r&quot;(0x21));
</I>&gt;<i> 
</I>&gt;<i> compiles fine, but when I look in the assember window in the debugger,
</I>it
&gt;<i> comes out as 
</I>&gt;<i>     moveq #33,%d0
</I>&gt;<i>     movec %d0,%rambar0
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> RAMBAR0?? Is there some relation here that I don't see? rambar ought to
</I>be
&gt;<i> C05, flashbar C04.
</I>&gt;<i> 
</I>&gt;<i> Looking in the &quot;registers&quot; view, flashbar still says 0x0121, that is
</I>with
&gt;<i> WP still set, and naturally my software gets a 'access' violation when
</I>&gt;<i> trying to write the first longword @ address 0. 
</I>
OK, doing a memory view gives that the address is actually C04, i.e.
FLASHBAR, so the debugger probably has some old references to another
device (wild guess), which has rambar0 on this adddress.

Now I have to understand why in the world, the FLASHBAR does not get
written as it ought to..


- Micael

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000739.html">[coldfire-gnu-discuss] How to access FLASHBAR?
</A></li>
	<LI>Next message: <A HREF="000742.html">Codesourcery support of usbdm ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#741">[ date ]</a>
              <a href="thread.html#741">[ thread ]</a>
              <a href="subject.html#741">[ subject ]</a>
              <a href="author.html#741">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://sourcerytools.com/cgi-bin/mailman/listinfo/coldfire-gnu-discuss">More information about the coldfire-gnu-discuss
mailing list</a><br>
</body></html>
