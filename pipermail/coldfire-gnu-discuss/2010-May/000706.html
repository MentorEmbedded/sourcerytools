<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [coldfire-gnu-discuss] NPTL on 547x cpus
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:coldfire-gnu-discuss%40codesourcery.com?Subject=Re%3A%20%5Bcoldfire-gnu-discuss%5D%20NPTL%20on%20547x%20cpus&In-Reply-To=%3C201005141539.11283.luigi.mantellini%40idf-hit.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000709.html">
   <LINK REL="Next"  HREF="000710.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[coldfire-gnu-discuss] NPTL on 547x cpus</H1>
    <B>Luigi 'Comio' Mantellini</B> 
    <A HREF="mailto:coldfire-gnu-discuss%40codesourcery.com?Subject=Re%3A%20%5Bcoldfire-gnu-discuss%5D%20NPTL%20on%20547x%20cpus&In-Reply-To=%3C201005141539.11283.luigi.mantellini%40idf-hit.com%3E"
       TITLE="[coldfire-gnu-discuss] NPTL on 547x cpus">luigi.mantellini at idf-hit.com
       </A><BR>
    <I>Fri May 14 13:39:05 UTC 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="000709.html">[coldfire-gnu-discuss] NPTL on 547x cpus
</A></li>
        <LI>Next message: <A HREF="000710.html">How to activate TLB mapping on m548x ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#706">[ date ]</a>
              <a href="thread.html#706">[ thread ]</a>
              <a href="subject.html#706">[ subject ]</a>
              <a href="author.html#706">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>venerd&#236; 14 maggio 2010 15:20 Maxim Kuvyrkov &lt;<A HREF="http://sourcerytools.com/cgi-bin/mailman/listinfo/coldfire-gnu-discuss">maxim at codesourcery.com</A>&gt; ha 
scritto:
&gt;<i> On 5/14/10 5:08 PM, Luigi 'Comio' Mantellini wrote:
</I>&gt;<i> &gt; Now, I'm interested to use the last 4.4-217 in order to use the nptl
</I>&gt;<i> &gt; implementation, but unfortunately the pthread seems to be broken.
</I>&gt;<i> 
</I>&gt;<i> What do you mean by &quot;broken&quot;?
</I>
I have an heavy threaded application that uses mutexes, semaphores. The code 
generated by compiler, keeps some constants (for optimization reason) in 
registers, then are used in a infinite loop.

Using the lauterbach debugger, I noticed that the registers are not correctly 
restored returning by signal.

CONST1=...
CONST2=...
for (;;) {
 &lt;---------- interrupted by signal ----------&gt;
  use CONST1 
  use CONST2
  ...
}

I'm sorry but I cannot provide a better description now because I haven't 
access to debug facilities for the next days.


&gt;<i> 
</I>&gt;<i> Did you apply the kernel patch that the Getting Started Guide mentions?
</I>&gt;<i> 
</I>
I applied the requested patch for the 4.4-217 and kernel 2.6.25

&gt;<i> To add NPTL support to current ColdFire kernels one needs to apply one
</I>&gt;<i> of the patches linked in this knowledge base entry:
</I>&gt;<i> <A HREF="https://support.codesourcery.com/GNUToolchain/kbentry52">https://support.codesourcery.com/GNUToolchain/kbentry52</A> .
</I>&gt;<i> 
</I>&gt;<i> ...
</I>&gt;<i> 
</I>&gt;<i> &gt; Has anyone used and tested the 4.4-x toolchains? I would like to have
</I>&gt;<i> &gt; feedback from cf developers
</I>&gt;<i> 
</I>&gt;<i> We at CodeSourcery run thousands, if not not millions, tests for each
</I>&gt;<i> release.  Testing of 4.4-217 release included GLIBC testsuite which has
</I>&gt;<i> many tests for libpthread.
</I>
I know the CS releases high quality toolchains. I'm supposing that somethins 
is wrong in my kernel (I started with the 2.6.10 and I ported by hand to 
2.6.23 and .25).

I can provide my patchset for the kernel if you are interested.

best regards,

luigi

-- 


Luigi 'Comio' Mantellini
R&amp;D - Software

Industrie Dial Face S.p.A.
Via Canzo, 4
20068 Peschiera Borromeo (MI) Italy
Tel.: +39 02 5167 2813
Fax: +39 02 5167 2459 
E-mail: <A HREF="http://sourcerytools.com/cgi-bin/mailman/listinfo/coldfire-gnu-discuss">luigi.mantellini at idf-hit.com</A> 
Website: <A HREF="http://www.idf-hit.com">http://www.idf-hit.com</A>


Questo messaggio e i suoi allegati sono indirizzati esclusivamente alle 
persone indicate. La diffusione, copia o qualsiasi altra azione derivante dalla 
conoscenza di queste informazioni sono rigorosamente vietate. Qualora abbiate 
ricevuto questo documento per errore siete cortesemente pregati di darne 
immediata comunicazione al mittente e di provvedere alla sua distruzione, 
Grazie.

Rispetta l'ambiente. Non stampare questa mail se non &#232; realmente necessario.

This e-mail and any attachments is confidential and may contain privileged 
information intended for the addressee(s) only. Dissemination, copying, 
printing or use by anybody else is unauthorized. If you are not the intended 
recipient, please delete this message and any attachments and advise the 
sender by return e-mail, Thanks.

Help the environment. Please do not print this email unless it is absolutely 
necessary.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 198 bytes
Desc: This is a digitally signed message part.
URL: &lt;<A HREF="http://sourcerytools.com/pipermail/coldfire-gnu-discuss/attachments/20100514/50713628/attachment.pgp">http://sourcerytools.com/pipermail/coldfire-gnu-discuss/attachments/20100514/50713628/attachment.pgp</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000709.html">[coldfire-gnu-discuss] NPTL on 547x cpus
</A></li>
	<LI>Next message: <A HREF="000710.html">How to activate TLB mapping on m548x ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#706">[ date ]</a>
              <a href="thread.html#706">[ thread ]</a>
              <a href="subject.html#706">[ subject ]</a>
              <a href="author.html#706">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://sourcerytools.com/cgi-bin/mailman/listinfo/coldfire-gnu-discuss">More information about the coldfire-gnu-discuss
mailing list</a><br>
</body></html>
