<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [coldfire-gnu-discuss] gcc-4.1-30 &amp; SRAM
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:coldfire-gnu-discuss%40codesourcery.com?Subject=Re%3A%20%5Bcoldfire-gnu-discuss%5D%20gcc-4.1-30%20%26%20SRAM&In-Reply-To=%3C45AFB76F.6010008%40gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000163.html">
   <LINK REL="Next"  HREF="000165.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[coldfire-gnu-discuss] gcc-4.1-30 &amp; SRAM</H1>
    <B>Eric BENARD</B> 
    <A HREF="mailto:coldfire-gnu-discuss%40codesourcery.com?Subject=Re%3A%20%5Bcoldfire-gnu-discuss%5D%20gcc-4.1-30%20%26%20SRAM&In-Reply-To=%3C45AFB76F.6010008%40gmail.com%3E"
       TITLE="[coldfire-gnu-discuss] gcc-4.1-30 &amp; SRAM">elbenard at gmail.com
       </A><BR>
    <I>Thu Jan 18 18:07:43 UTC 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000163.html">[coldfire-gnu-discuss] gcc-4.1-30 &amp; SRAM
</A></li>
        <LI>Next message: <A HREF="000165.html">[coldfire-gnu-discuss] gcc-4.1-30 &amp; SRAM
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#164">[ date ]</a>
              <a href="thread.html#164">[ thread ]</a>
              <a href="subject.html#164">[ subject ]</a>
              <a href="author.html#164">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Nathan Sidwell wrote :
&gt;<i> Thanks for using our downloads. 
</I>
Thanks for your work on these tools ;-)

&gt;<i> What you're trying to do is not
</I>&gt;<i> supported in this way.  The FLT binary has to consist of text and data
</I>&gt;<i> segments, along with a relocation table.  You cannot add additional
</I>&gt;<i> segments.  All the relocations must be to symbols within the text or
</I>&gt;<i> data (or bss) segments.  This is a fundamental design of the FLT format.
</I>&gt;<i> 
</I>That's what I was afraid of ...

&gt;<i> If you want to place code into sram, you will need to copy it there
</I>&gt;<i> explicitly from within your application.  The management of the SRAM is
</I>&gt;<i> straying into OS issues that I am unfamiliar with -- perhaps uclinux has
</I>&gt;<i> a mechanism to avoid multiple applications using that memory.
</I>&gt;<i> 
</I>uClinux doesn't use the internal SRAM. In my case I already manage to
use 4kB for data with malloc/free functions reworked by Gerg Ungerer in
it's mp3player. For code, there will be only one application using it so
the management of thje SRAM should be pretty simple ... once I manage to
link code into it !

&gt;<i> Accessing objects in the sram region you define is going to be tricky. 
</I>&gt;<i> The most straight forward mechanism will be via a pointer to that
</I>&gt;<i> memory.  You may be able to produce a linker script that loads the sram
</I>&gt;<i> image into the data segment, but keeps it's VMA as you desire.  You'll
</I>&gt;<i> have to adjust the FLT file creation to remove relocations against that
</I>&gt;<i> segment (normally relocations are kept). I've not thought hard about
</I>&gt;<i> this though.
</I>&gt;<i> 
</I>OK, I'll let you know if I find a way to do this.

Many thanks and best regards
Eric

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000163.html">[coldfire-gnu-discuss] gcc-4.1-30 &amp; SRAM
</A></li>
	<LI>Next message: <A HREF="000165.html">[coldfire-gnu-discuss] gcc-4.1-30 &amp; SRAM
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#164">[ date ]</a>
              <a href="thread.html#164">[ thread ]</a>
              <a href="subject.html#164">[ subject ]</a>
              <a href="author.html#164">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://sourcerytools.com/cgi-bin/mailman/listinfo/coldfire-gnu-discuss">More information about the coldfire-gnu-discuss
mailing list</a><br>
</body></html>
