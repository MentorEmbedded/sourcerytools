<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [power-gnu-discuss] Support for the MPC5554 (e200z6 core)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:power-gnu-discuss%40codesourcery.com?Subject=Re%3A%20%5Bpower-gnu-discuss%5D%20Support%20for%20the%20MPC5554%20%28e200z6%20core%29&In-Reply-To=%3C54823def0906020437xdc2a918n70521a4c6ea05d74%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000030.html">
   <LINK REL="Next"  HREF="000032.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[power-gnu-discuss] Support for the MPC5554 (e200z6 core)</H1>
    <B>Andrew Dennison</B> 
    <A HREF="mailto:power-gnu-discuss%40codesourcery.com?Subject=Re%3A%20%5Bpower-gnu-discuss%5D%20Support%20for%20the%20MPC5554%20%28e200z6%20core%29&In-Reply-To=%3C54823def0906020437xdc2a918n70521a4c6ea05d74%40mail.gmail.com%3E"
       TITLE="[power-gnu-discuss] Support for the MPC5554 (e200z6 core)">andrewd.lists at gmail.com
       </A><BR>
    <I>Tue Jun  2 11:37:56 UTC 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="000030.html">[power-gnu-discuss] Support for the MPC5554 (e200z6 core)
</A></li>
        <LI>Next message: <A HREF="000032.html">[power-gnu-discuss] Support for the MPC5554 (e200z6 core)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31">[ date ]</a>
              <a href="thread.html#31">[ thread ]</a>
              <a href="subject.html#31">[ subject ]</a>
              <a href="author.html#31">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Tue, Jun 2, 2009 at 4:44 PM, David Brown &lt;<A HREF="http://sourcerytools.com/cgi-bin/mailman/listinfo/power-gnu-discuss">david at westcontrol.com</A>&gt; wrote:
&gt;<i> Andrew Dennison wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Works for my 5554 code.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> What -mcpu flag (and any other -m flags) do you use? &#160;I can't find any that
</I>&gt;<i> cause gcc (latest 4.3.3 version) to generate SPE instructions for single
</I>&gt;<i> precision floating point. &#160;It's easy to get the compiler to generate
</I>&gt;<i> standard &quot;book E&quot; floating point instructions (fmuls, etc.), but those don't
</I>&gt;<i> work on the 5554 as far as I understand.
</I>
David,

No other flags have been necessary (for floating point anyway), but
from memory powerpc-eabi-spe defaults to 8540 (e500). There are some
other issues where altivec instructions were generated in some cases!!
Another switch cleans this up. Embedded powerpc can be fun...

Earlier on (4.0, 4.1) I was using -fsingle-precision-constants (or
something like that) and this also triggered the spe single precision
instruction generation. However when I wanted to use VARGS I found
they were still promoted to double (normal c abi). The short-double
switch fixed this. We have had to browse gcc source on occasion to try
to work out how the options really work.

We are now using 4.4.0 but have used various versions of 4.0, 4.1, 4.2
and 4.3 along the way.

Hope this helps

Andrew

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000030.html">[power-gnu-discuss] Support for the MPC5554 (e200z6 core)
</A></li>
	<LI>Next message: <A HREF="000032.html">[power-gnu-discuss] Support for the MPC5554 (e200z6 core)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#31">[ date ]</a>
              <a href="thread.html#31">[ thread ]</a>
              <a href="subject.html#31">[ subject ]</a>
              <a href="author.html#31">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://sourcerytools.com/cgi-bin/mailman/listinfo/power-gnu-discuss">More information about the power-gnu-discuss
mailing list</a><br>
</body></html>
