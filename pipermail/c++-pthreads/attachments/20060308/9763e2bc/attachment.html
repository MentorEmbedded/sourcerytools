<tt>
&lt;META&nbsp;HTTP-EQUIV=&quot;Content-Type&quot;&nbsp;CONTENT=&quot;text/html;&nbsp;charset=iso-8859-1&quot;&gt;<br>
&lt;!DOCTYPE&nbsp;HTML&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;HTML&nbsp;3.2//EN&quot;&gt;<br>
&lt;HTML&gt;<br>
&lt;HEAD&gt;<br>
<br>
&lt;META&nbsp;NAME=&quot;Generator&quot;&nbsp;CONTENT=&quot;MS&nbsp;Exchange&nbsp;Server&nbsp;version&nbsp;6.5.7226.0&quot;&gt;<br>
&lt;TITLE&gt;Re:&nbsp;[c++-pthreads]&nbsp;&nbsp;Re:&nbsp;FW:&nbsp;RE:&nbsp;Re:&nbsp;I'm&nbsp;Lost&lt;/TITLE&gt;<br>
&lt;/HEAD&gt;<br>
&lt;BODY&gt;<br>
&lt;DIV&nbsp;id=idOWAReplyText11741&nbsp;dir=ltr&gt;<br>
&lt;DIV&nbsp;dir=ltr&gt;&lt;FONT&nbsp;face=Arial&nbsp;color=#000000&nbsp;size=2&gt;Sorry&nbsp;to&nbsp;be&nbsp;dense,&nbsp;or&nbsp;if&nbsp;I&nbsp;am&nbsp;<br>
covering&nbsp;old&nbsp;ground&nbsp;-&nbsp;just&nbsp;confirming&nbsp;I&nbsp;understand&nbsp;correctly:&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&nbsp;dir=ltr&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;Also&nbsp;sorry&nbsp;for&nbsp;HTML&nbsp;format&nbsp;-&nbsp;it&nbsp;is&nbsp;all&nbsp;I&nbsp;<br>
can&nbsp;get&nbsp;remotely&nbsp;from&nbsp;our&nbsp;Exchange&nbsp;server&nbsp;:¬(&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&nbsp;dir=ltr&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;&lt;/FONT&gt;&nbsp;&lt;/DIV&gt;<br>
&lt;DIV&nbsp;dir=ltr&gt;&lt;FONT&nbsp;face=Arial&nbsp;size=2&gt;i/&nbsp;&nbsp;cancellation&nbsp;will&nbsp;propogate&nbsp;as&nbsp;an&nbsp;<br>
(uncatchable?)&nbsp;exception,&nbsp;implying&nbsp;stack&nbsp;unwinding.&lt;/FONT&gt;&lt;/DIV&gt;<br>
&lt;DIV&nbsp;dir=ltr&gt;ii/&nbsp;if&nbsp;cancellation&nbsp;passes&nbsp;through&nbsp;an&nbsp;exception&nbsp;specification,&nbsp;<br>
we&nbsp;call&nbsp;unexpected&nbsp;and&nbsp;abort&nbsp;which&nbsp;pretty&nbsp;much&nbsp;achieves&nbsp;the&nbsp;same&nbsp;thing&lt;/DIV&gt;<br>
&lt;DIV&nbsp;dir=ltr&gt;iii/&nbsp;if&nbsp;cancellation&nbsp;interupts&nbsp;a&nbsp;dtor&nbsp;during&nbsp;regular&nbsp;stack&nbsp;<br>
unwinding,&nbsp;we&nbsp;call&nbsp;terminate&nbsp;which&nbsp;pretty&nbsp;much&nbsp;has&nbsp;the&nbsp;same&nbsp;effect,&nbsp;so&nbsp;everyone&nbsp;<br>
is&nbsp;still&nbsp;happy.&lt;/DIV&gt;<br>
&lt;DIV&nbsp;dir=ltr&gt;&nbsp;&lt;/DIV&gt;<br>
&lt;DIV&nbsp;dir=ltr&gt;I&nbsp;am&nbsp;still&nbsp;not&nbsp;sure&nbsp;about:&lt;/DIV&gt;<br>
&lt;DIV&nbsp;dir=ltr&gt;iv/&nbsp;if&nbsp;an&nbsp;exception&nbsp;is&nbsp;thrown&nbsp;but&nbsp;not&nbsp;caught&nbsp;in&nbsp;main,&nbsp;it&nbsp;is&nbsp;<br>
implementation&nbsp;defined&nbsp;whether&nbsp;stack&nbsp;unwinding&nbsp;occurs,&nbsp;so&nbsp;it&nbsp;will&nbsp;really&nbsp;be&nbsp;<br>
implementation&nbsp;defined&nbsp;whether&nbsp;the&nbsp;stack&nbsp;is&nbsp;unwound&nbsp;for&nbsp;thread&nbsp;cancellation&nbsp;in&nbsp;<br>
this&nbsp;scheme.&lt;/DIV&gt;<br>
&lt;DIV&nbsp;dir=ltr&gt;&nbsp;&lt;/DIV&gt;<br>
&lt;DIV&nbsp;dir=ltr&gt;I&nbsp;am&nbsp;also&nbsp;not&nbsp;clear&nbsp;whether&nbsp;unexpected&nbsp;/&nbsp;terminate&nbsp;will&nbsp;kill&nbsp;just&nbsp;<br>
the&nbsp;thread,&nbsp;or&nbsp;the&nbsp;whole&nbsp;process.&nbsp;&nbsp;I&nbsp;am&nbsp;currently&nbsp;expecting&nbsp;the&nbsp;latter&nbsp;as&nbsp;<br>
the&nbsp;status&nbsp;quo,&nbsp;although&nbsp;not&nbsp;with&nbsp;a&nbsp;strong&nbsp;opinion&nbsp;to&nbsp;fight&nbsp;for&nbsp;<br>
&lt;g&gt;&lt;/DIV&gt;<br>
&lt;DIV&nbsp;dir=ltr&gt;&nbsp;&lt;/DIV&gt;<br>
&lt;DIV&nbsp;dir=ltr&gt;AlisdairM&lt;/DIV&gt;&lt;/DIV&gt;<br>
&lt;DIV&nbsp;dir=ltr&gt;&lt;BR&gt;<br>
&lt;HR&nbsp;tabIndex=-1&gt;<br>
&lt;FONT&nbsp;face=Tahoma&nbsp;size=2&gt;&lt;B&gt;From:&lt;/B&gt;&nbsp;Mark&nbsp;Mitchell&nbsp;<br>
[mailto:mark@codesourcery.com]&lt;BR&gt;&lt;B&gt;Sent:&lt;/B&gt;&nbsp;Wed&nbsp;08/03/2006&nbsp;<br>
23:15&lt;BR&gt;&lt;B&gt;To:&lt;/B&gt;&nbsp;Jason&nbsp;Merrill&lt;BR&gt;&lt;B&gt;Cc:&lt;/B&gt;&nbsp;Wil&nbsp;Evers;&nbsp;David&nbsp;Abrahams;&nbsp;<br>
c++-pthreads@codesourcery.com&lt;BR&gt;&lt;B&gt;Subject:&lt;/B&gt;&nbsp;Re:&nbsp;[c++-pthreads]&nbsp;Re:&nbsp;FW:&nbsp;RE:&nbsp;<br>
Re:&nbsp;I'm&nbsp;Lost&lt;BR&gt;&lt;/FONT&gt;&lt;BR&gt;&lt;/DIV&gt;<br>
&lt;DIV&gt;<br>
&lt;P&gt;&lt;FONT&nbsp;size=2&gt;Jason&nbsp;Merrill&nbsp;wrote:&lt;BR&gt;&lt;BR&gt;&gt;&nbsp;If&nbsp;you&nbsp;can&nbsp;interrupt&nbsp;<br>
cancellation,&nbsp;re-cancellation&nbsp;is&nbsp;implemented&lt;BR&gt;&gt;&nbsp;trivially&nbsp;simply&nbsp;by&nbsp;just&nbsp;<br>
having&nbsp;the&nbsp;cancellation&nbsp;exception&nbsp;destructor&lt;BR&gt;&gt;&nbsp;call&nbsp;'pthread_cancel&nbsp;<br>
(pthread_self&nbsp;())'.&nbsp;&nbsp;The&nbsp;sticking&nbsp;point&nbsp;is&nbsp;being&lt;BR&gt;&gt;&nbsp;able&nbsp;to&nbsp;abort&nbsp;the&nbsp;<br>
cancellation&nbsp;in&nbsp;the&nbsp;first&nbsp;place,&nbsp;which&nbsp;is&nbsp;what&nbsp;Uli&nbsp;has&lt;BR&gt;&gt;&nbsp;been&nbsp;opposed&nbsp;<br>
to.&lt;BR&gt;&lt;BR&gt;It&nbsp;sounds&nbsp;like&nbsp;we&nbsp;really&nbsp;are&nbsp;close&nbsp;to&nbsp;a&nbsp;solution&nbsp;then;&nbsp;I&nbsp;think&nbsp;<br>
everyone&lt;BR&gt;here&nbsp;would&nbsp;be&nbsp;happy&nbsp;with&nbsp;the&nbsp;re-cancellation&nbsp;thing,&nbsp;and&nbsp;the&nbsp;<br>
destructor&lt;BR&gt;trick&nbsp;means&nbsp;that&nbsp;there's&nbsp;really&nbsp;no&nbsp;way&nbsp;the&nbsp;thread&nbsp;can&nbsp;<br>
permanently&lt;BR&gt;discard&nbsp;the&nbsp;cancellation&nbsp;request,&nbsp;short&nbsp;of&nbsp;things&nbsp;like&nbsp;longjmp&nbsp;--&nbsp;<br>
and,&lt;BR&gt;of&nbsp;course,&nbsp;if&nbsp;the&nbsp;thread&nbsp;is&nbsp;really&nbsp;determined&nbsp;not&nbsp;to&nbsp;go&nbsp;away&nbsp;it&nbsp;can&nbsp;<br>
just&lt;BR&gt;hang&nbsp;around&nbsp;anyhow.&nbsp;&nbsp;So,&nbsp;it&nbsp;seems&nbsp;like&nbsp;this&nbsp;ought&nbsp;to&nbsp;satisfy&nbsp;<br>
everyone&lt;BR&gt;from&nbsp;the&nbsp;user-level&nbsp;perspective.&lt;BR&gt;&lt;BR&gt;&gt;&nbsp;I&nbsp;don't&nbsp;think&nbsp;he's&nbsp;<br>
opposed&nbsp;to&nbsp;catching&nbsp;it,&nbsp;just&nbsp;to&nbsp;doing&nbsp;anything&nbsp;that&lt;BR&gt;&gt;&nbsp;would&nbsp;involve&nbsp;<br>
backing&nbsp;out&nbsp;of&nbsp;the&nbsp;cancellation&nbsp;once&nbsp;it's&nbsp;started.&lt;BR&gt;&lt;BR&gt;Would&nbsp;the&nbsp;above&nbsp;<br>
satisfy&nbsp;him?&lt;BR&gt;&lt;BR&gt;--&lt;BR&gt;Mark&nbsp;<br>
Mitchell&lt;BR&gt;CodeSourcery&lt;BR&gt;mark@codesourcery.com&lt;BR&gt;(650)&nbsp;331-3385&nbsp;<br>
x713&lt;BR&gt;&lt;/FONT&gt;&lt;/P&gt;&lt;/DIV&gt;<br>
<br>
&lt;pre&gt;---------------------------------------------------------------------<br>
<br>
For&nbsp;further&nbsp;information&nbsp;on&nbsp;Renault&nbsp;F1&nbsp;visit&nbsp;our&nbsp;web&nbsp;site&nbsp;at&nbsp;www.renaultf1.com.&nbsp;<br>
<br>
WARNING:&nbsp;please&nbsp;ensure&nbsp;that&nbsp;you&nbsp;have&nbsp;adequate&nbsp;virus&nbsp;protection&nbsp;in&nbsp;place&nbsp;before&nbsp;you&nbsp;open&nbsp;or&nbsp;detach&nbsp;any&nbsp;documents&nbsp;attached&nbsp;to&nbsp;this&nbsp;email.<br>
<br>
This&nbsp;e-mail&nbsp;may&nbsp;constitute&nbsp;privileged&nbsp;information.&nbsp;If&nbsp;you&nbsp;are&nbsp;not&nbsp;the&nbsp;intended&nbsp;recipient,&nbsp;you&nbsp;have&nbsp;received&nbsp;this&nbsp;confidential&nbsp;email&nbsp;and&nbsp;any&nbsp;attachments&nbsp;transmitted&nbsp;with&nbsp;it&nbsp;in&nbsp;error&nbsp;and&nbsp;you&nbsp;must&nbsp;not&nbsp;disclose,&nbsp;copy,&nbsp;circulate&nbsp;or&nbsp;in&nbsp;any&nbsp;other&nbsp;way&nbsp;use&nbsp;or&nbsp;rely&nbsp;on&nbsp;this&nbsp;information.<br>
<br>
E-mails&nbsp;to&nbsp;and&nbsp;from&nbsp;the&nbsp;Renault&nbsp;F1&nbsp;Team&nbsp;are&nbsp;monitored&nbsp;for&nbsp;operational&nbsp;reasons&nbsp;and&nbsp;in&nbsp;accordance&nbsp;with&nbsp;lawful&nbsp;business&nbsp;practices.<br>
<br>
The&nbsp;contents&nbsp;of&nbsp;this&nbsp;email&nbsp;are&nbsp;those&nbsp;of&nbsp;the&nbsp;individual&nbsp;and&nbsp;do&nbsp;not&nbsp;necessarily&nbsp;represent&nbsp;the&nbsp;views&nbsp;of&nbsp;the&nbsp;company.<br>
<br>
Please&nbsp;note&nbsp;that&nbsp;this&nbsp;e-mail&nbsp;has&nbsp;been&nbsp;created&nbsp;in&nbsp;the&nbsp;knowledge&nbsp;that&nbsp;Internet&nbsp;e-mail&nbsp;is&nbsp;not&nbsp;a&nbsp;100%&nbsp;secure&nbsp;communications&nbsp;medium.&nbsp;We&nbsp;advise&nbsp;that&nbsp;you&nbsp;understand&nbsp;and&nbsp;observe&nbsp;this&nbsp;lack&nbsp;of&nbsp;security&nbsp;when&nbsp;e-mailing&nbsp;us.<br>
<br>
If&nbsp;you&nbsp;have&nbsp;received&nbsp;this&nbsp;email&nbsp;in&nbsp;error&nbsp;please&nbsp;forward&nbsp;to:&nbsp;is.helpdesk@uk.renaultf1.com&nbsp;quoting&nbsp;the&nbsp;sender,&nbsp;then&nbsp;delete&nbsp;the&nbsp;message&nbsp;and&nbsp;any&nbsp;attached&nbsp;documents<br>
---------------------------------------------------------------------<br>
&lt;/pre&gt;&lt;/BODY&gt;<br>
&lt;/HTML&gt;
</tt>
