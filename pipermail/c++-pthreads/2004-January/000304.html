<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [c++-pthreads] Re: thread-safety definition
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:c%2B%2B-pthreads%40codesourcery.com?Subject=Re%3A%20%5Bc%2B%2B-pthreads%5D%20Re%3A%20thread-safety%20definition&In-Reply-To=%3C400E727D.5030306%40hp.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000302.html">
   <LINK REL="Next"  HREF="000306.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[c++-pthreads] Re: thread-safety definition</H1>
    <B>Dave Butenhof</B> 
    <A HREF="mailto:c%2B%2B-pthreads%40codesourcery.com?Subject=Re%3A%20%5Bc%2B%2B-pthreads%5D%20Re%3A%20thread-safety%20definition&In-Reply-To=%3C400E727D.5030306%40hp.com%3E"
       TITLE="[c++-pthreads] Re: thread-safety definition">David.Butenhof at hp.com
       </A><BR>
    <I>Wed Jan 21 12:37:17 UTC 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="000302.html">[c++-pthreads] Re: thread-safety definition
</A></li>
        <LI>Next message: <A HREF="000306.html">thread-safety definition
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#304">[ date ]</a>
              <a href="thread.html#304">[ thread ]</a>
              <a href="subject.html#304">[ subject ]</a>
              <a href="author.html#304">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>David Abrahams wrote:

&gt;<i>Dave Butenhof &lt;<A HREF="http://sourcerytools.com/cgi-bin/mailman/listinfo/c++-pthreads">David.Butenhof at hp.com</A>&gt; writes:
</I>&gt;<i>
</I>&gt;&gt;<i>We could require the language to perform some call stack analysis as
</I>&gt;&gt;<i>part of deciding whether to deliver a cancel in the first place --
</I>&gt;&gt;<i>    
</I>&gt;&gt;<i>
</I>&gt;<i>I think this falls into the same category as 2-phase EH: a nice thing
</I>&gt;<i>for implementations to provide, but not something we can mandate in a
</I>&gt;<i>standard without significantly raising the barrier-to-entry for a
</I>&gt;<i>conforming C++ implementation.  Remember that the simplest EH
</I>&gt;<i>mechanisms are based, essentially, around a very naive
</I>&gt;<i>setjmp/longjmp-like mechanism.  Granted, they suck, but traditionally
</I>&gt;<i>we on the C++ committee have shied away from legislating quality (no
</I>&gt;<i>wisecracks from the peanut gallery, please!)
</I>&gt;<i>  
</I>&gt;<i>
</I>Sure, and POSIX has always had the same philosophy. We've even done some 
things to avoid entirely precluding braindead trivial implementations 
(like pure user-mode emulation packages). But we didn't go out of our 
way to make things EASY for them, either. We don't allow the operations 
of any thread to prevent any other thread from making forward progress, 
for example. (E.g., a braindead user-mode library can't let any thread 
make a direct kernel blocking I/O call; fully implementing that on UNIX 
is actually impossible, because select() and poll() traditionally &quot;lie&quot; 
about file-based I/O operations... but even ignoring that complication 
it isn't easy.)

So whether your argument is relevant depends a lot on where this feature 
sits. If it's something that &quot;might be nice&quot; but isn't really important 
for portable applications to have, then yeah, maybe it sits above the 
bar. I know you have that opinion of 2-phase EH, for example, and as 
much as I like it I don't strongly disagree. But that's not a foregone 
conclusion for THIS feature, or any other. And if it's decided to be 
important then the fact that it makes life hard for someone who wants to 
ship a braindead implementation should be irrelevant.

At least in theory. And, in theory, there's no difference between theory 
and practice. ;-)

-- 
/--------------------[ <A HREF="http://sourcerytools.com/cgi-bin/mailman/listinfo/c++-pthreads">David.Butenhof at hp.com</A> ]--------------------\
|<i> Hewlett-Packard Company       Tru64 UNIX &amp; VMS Thread Architect |
</I>|<i>     My book: <A HREF="http://www.awl.com/cseng/titles/0-201-63392-2/">http://www.awl.com/cseng/titles/0-201-63392-2/</A>     |
</I>\----[ <A HREF="http://homepage.mac.com/dbutenhof/Threads/Threads.html">http://homepage.mac.com/dbutenhof/Threads/Threads.html</A> ]---/


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000302.html">[c++-pthreads] Re: thread-safety definition
</A></li>
	<LI>Next message: <A HREF="000306.html">thread-safety definition
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#304">[ date ]</a>
              <a href="thread.html#304">[ thread ]</a>
              <a href="subject.html#304">[ subject ]</a>
              <a href="author.html#304">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://sourcerytools.com/cgi-bin/mailman/listinfo/c++-pthreads">More information about the c++-pthreads
mailing list</a><br>
</body></html>
