<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [c++-pthreads]  Re: pthread_cancel and EH: let's try this again
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:c%2B%2B-pthreads%40codesourcery.com?Subject=Re%3A%20%5Bc%2B%2B-pthreads%5D%20%20Re%3A%20pthread_cancel%20and%20EH%3A%20let%27s%20try%20this%20again&In-Reply-To=%3C004701c592e5%24f90a1200%246501a8c0%40pdimov2%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000514.html">
   <LINK REL="Next"  HREF="000526.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[c++-pthreads]  Re: pthread_cancel and EH: let's try this again</H1>
    <B>Peter Dimov</B> 
    <A HREF="mailto:c%2B%2B-pthreads%40codesourcery.com?Subject=Re%3A%20%5Bc%2B%2B-pthreads%5D%20%20Re%3A%20pthread_cancel%20and%20EH%3A%20let%27s%20try%20this%20again&In-Reply-To=%3C004701c592e5%24f90a1200%246501a8c0%40pdimov2%3E"
       TITLE="[c++-pthreads]  Re: pthread_cancel and EH: let's try this again">pdimov at mmltd.net
       </A><BR>
    <I>Wed Jul 27 20:01:24 UTC 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="000514.html">pthread_cancel and EH: let's try this again
</A></li>
        <LI>Next message: <A HREF="000526.html">pthread_cancel and EH: let's try this again
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#524">[ date ]</a>
              <a href="thread.html#524">[ thread ]</a>
              <a href="subject.html#524">[ subject ]</a>
              <a href="author.html#524">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Alexander Terekhov wrote:
&gt;<i> Peter Dimov wrote:
</I>&gt;<i> [...]
</I>&gt;&gt;<i> int pthread_cancelenabled(void);
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> RETURN VALUE
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Nonzero if the current thread's cancelability state is
</I>&gt;&gt;<i> PTHREAD_CANCEL_ENABLE and the call is not made from within a cleanup
</I>&gt;&gt;<i> handler or a TSD destructor,
</I>&gt;<i>                                ^^^^^^^^^^^^^^^^^^^^^^^^
</I>&gt;&gt;<i> zero otherwise.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> could have been much simpler.
</I>&gt;<i>
</I>&gt;<i> With cancel request pending, mandatory cancel points are required to
</I>&gt;<i> throw within a cleanup handler invoked by pthread_cleanup_pop() [&quot;(if
</I>&gt;<i> /execute/ is non-zero)&quot;] when cancel state is PTHREAD_CANCEL_ENABLE.
</I>
An odd requirement that could've been given the appropriate attention had 
something like the above been proposed. ;-)

The specification of the hypothetical pthread_cancelenabled can be &quot;fixed&quot; 
to match this behavior, but I'm not sure that this is desirable. If you have 
two calls to 'close' in the cleanup handler and the first is canceled, the 
second will be skipped. 


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000514.html">pthread_cancel and EH: let's try this again
</A></li>
	<LI>Next message: <A HREF="000526.html">pthread_cancel and EH: let's try this again
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#524">[ date ]</a>
              <a href="thread.html#524">[ thread ]</a>
              <a href="subject.html#524">[ subject ]</a>
              <a href="author.html#524">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://sourcerytools.com/cgi-bin/mailman/listinfo/c++-pthreads">More information about the c++-pthreads
mailing list</a><br>
</body></html>
