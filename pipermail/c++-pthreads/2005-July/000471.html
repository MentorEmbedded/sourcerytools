<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [c++-pthreads]  Re: pthread_cancel and EH: let's try this again
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:c%2B%2B-pthreads%40codesourcery.com?Subject=Re%3A%20%5Bc%2B%2B-pthreads%5D%20%20Re%3A%20pthread_cancel%20and%20EH%3A%20let%27s%20try%20this%20again&In-Reply-To=%3C004501c58d78%246605df60%246501a8c0%40pdimov2%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000470.html">
   <LINK REL="Next"  HREF="000472.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[c++-pthreads]  Re: pthread_cancel and EH: let's try this again</H1>
    <B>Peter Dimov</B> 
    <A HREF="mailto:c%2B%2B-pthreads%40codesourcery.com?Subject=Re%3A%20%5Bc%2B%2B-pthreads%5D%20%20Re%3A%20pthread_cancel%20and%20EH%3A%20let%27s%20try%20this%20again&In-Reply-To=%3C004501c58d78%246605df60%246501a8c0%40pdimov2%3E"
       TITLE="[c++-pthreads]  Re: pthread_cancel and EH: let's try this again">pdimov at mmltd.net
       </A><BR>
    <I>Wed Jul 20 22:14:27 UTC 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="000470.html">pthread_cancel and EH: let's try this again
</A></li>
        <LI>Next message: <A HREF="000472.html">pthread_cancel and EH: let's try this again
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#471">[ date ]</a>
              <a href="thread.html#471">[ thread ]</a>
              <a href="subject.html#471">[ subject ]</a>
              <a href="author.html#471">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Alexander Terekhov wrote:
&gt;<i> Wil Evers wrote:
</I>
&gt;&gt;<i> * A thread's cancellation state is only affected by calls to
</I>&gt;&gt;<i> pthread_setcancelstate() originating from user code.
</I>&gt;<i>
</I>&gt;<i> Intelligent cancel delivery aside for a moment, POSIX states:
</I>&gt;<i>
</I>&gt;<i> &quot;When a cancellation request is acted upon, or when a thread calls
</I>&gt;<i> pthread_exit(), the thread first disables cancellation by setting
</I>&gt;<i> its cancelability state to PTHREAD_CANCEL_DISABLE and its
</I>&gt;<i> cancelability type to PTHREAD_CANCEL_DEFERRED.&quot;
</I>
That's one of the few places where I think that we should not do what Posix 
says and just disable cancellation during unwinding instead. It has the same 
effect and solves the only real reported problem with the Tru64/OpenVMS 
model: that eating the cancellation exception leaves the thread running with 
cancelability disabled, causing the cancellation request to be lost without 
a trace. 


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000470.html">pthread_cancel and EH: let's try this again
</A></li>
	<LI>Next message: <A HREF="000472.html">pthread_cancel and EH: let's try this again
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#471">[ date ]</a>
              <a href="thread.html#471">[ thread ]</a>
              <a href="subject.html#471">[ subject ]</a>
              <a href="author.html#471">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://sourcerytools.com/cgi-bin/mailman/listinfo/c++-pthreads">More information about the c++-pthreads
mailing list</a><br>
</body></html>
