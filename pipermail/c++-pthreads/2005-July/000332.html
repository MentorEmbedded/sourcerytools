<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [c++-pthreads]  Re: pthread_cancel and EH: let's try this again
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:c%2B%2B-pthreads%40codesourcery.com?Subject=Re%3A%20%5Bc%2B%2B-pthreads%5D%20%20Re%3A%20pthread_cancel%20and%20EH%3A%20let%27s%20try%20this%20again&In-Reply-To=%3Cufyuk26gj.fsf%40boost-consulting.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000331.html">
   <LINK REL="Next"  HREF="000333.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[c++-pthreads]  Re: pthread_cancel and EH: let's try this again</H1>
    <B>David Abrahams</B> 
    <A HREF="mailto:c%2B%2B-pthreads%40codesourcery.com?Subject=Re%3A%20%5Bc%2B%2B-pthreads%5D%20%20Re%3A%20pthread_cancel%20and%20EH%3A%20let%27s%20try%20this%20again&In-Reply-To=%3Cufyuk26gj.fsf%40boost-consulting.com%3E"
       TITLE="[c++-pthreads]  Re: pthread_cancel and EH: let's try this again">dave at boost-consulting.com
       </A><BR>
    <I>Tue Jul 12 00:50:20 UTC 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="000331.html">[c++-pthreads]  Re: pthread_cancel and EH: let's try this again
</A></li>
        <LI>Next message: <A HREF="000333.html">pthread_cancel and EH: let's try this again
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#332">[ date ]</a>
              <a href="thread.html#332">[ thread ]</a>
              <a href="subject.html#332">[ subject ]</a>
              <a href="author.html#332">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Jakub Jelinek &lt;<A HREF="http://sourcerytools.com/cgi-bin/mailman/listinfo/c++-pthreads">jakub at redhat.com</A>&gt; writes:

&gt;<i> On Mon, Jul 11, 2005 at 06:34:13PM -0400, David Abrahams wrote:
</I>&gt;&gt;<i> Nathan Sidwell &lt;<A HREF="http://sourcerytools.com/cgi-bin/mailman/listinfo/c++-pthreads">nathan at codesourcery.com</A>&gt; writes:
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> &gt; IMHO #1 is better, for it also allows us to say 'thread cancellation is
</I>&gt;&gt;<i> &gt; *exactly* like exception handling'.
</I>&gt;&gt;<i> 
</I>&gt;&gt;<i> It's more than that.  #2 changes the exception handling model.
</I>&gt;&gt;<i> Simplicity of definition and programming model is crucial.  People
</I>&gt;&gt;<i> already have enough trouble coming to grips with exception safety.
</I>&gt;&gt;<i> Introducing #2 complicates the EH model, so I oppose it on those
</I>&gt;&gt;<i> grounds also.
</I>&gt;<i>
</I>&gt;<i> Can you explain why?  Nothing says that what pthread_cancel does is throwing
</I>&gt;<i> an exception.  So what exactly it does is outside of the scope of the
</I>&gt;<i> current C++ standard.
</I>
Of course it's outside of the scope of the current C++ standard, but I
don't see how that's relevant.  All the proposals in this thread have
pthread_cancel throwing an exception.

The mental model one develops for exception handling based on standard
C++ includes invariants such as

    catch(...) { whatever; throw; }  

  is equivalent to 

    a destructor that does &quot;whatever&quot; when unwinding


and

    If a destructor executes due to stack unwinding, one catch block
    of every try block between the point of the throw and that
    destructor has executed.

These invariants no longer hold in scheme #2.  You get something sort
of like these invariants, but they are complicated by special cases to
deal with thread cancellation behavior.

-- 
Dave Abrahams
Boost Consulting
www.boost-consulting.com

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000331.html">[c++-pthreads]  Re: pthread_cancel and EH: let's try this again
</A></li>
	<LI>Next message: <A HREF="000333.html">pthread_cancel and EH: let's try this again
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#332">[ date ]</a>
              <a href="thread.html#332">[ thread ]</a>
              <a href="subject.html#332">[ subject ]</a>
              <a href="author.html#332">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://sourcerytools.com/cgi-bin/mailman/listinfo/c++-pthreads">More information about the c++-pthreads
mailing list</a><br>
</body></html>
