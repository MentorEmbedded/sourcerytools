<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [c++-pthreads]  Re: pthread_cancel and EH: let's try this again
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:c%2B%2B-pthreads%40codesourcery.com?Subject=Re%3A%20%5Bc%2B%2B-pthreads%5D%20%20Re%3A%20pthread_cancel%20and%20EH%3A%20let%27s%20try%20this%20again&In-Reply-To=%3Cm3ackms5yj.fsf%40uniton.integrable-solutions.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000407.html">
   <LINK REL="Next"  HREF="000409.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[c++-pthreads]  Re: pthread_cancel and EH: let's try this again</H1>
    <B>Gabriel Dos Reis</B> 
    <A HREF="mailto:c%2B%2B-pthreads%40codesourcery.com?Subject=Re%3A%20%5Bc%2B%2B-pthreads%5D%20%20Re%3A%20pthread_cancel%20and%20EH%3A%20let%27s%20try%20this%20again&In-Reply-To=%3Cm3ackms5yj.fsf%40uniton.integrable-solutions.net%3E"
       TITLE="[c++-pthreads]  Re: pthread_cancel and EH: let's try this again">gdr at integrable-solutions.net
       </A><BR>
    <I>Sat Jul 16 23:10:12 UTC 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="000407.html">[c++-pthreads]  Re: pthread_cancel and EH: let's try this again
</A></li>
        <LI>Next message: <A HREF="000409.html">pthread_cancel and EH: let's try this again
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#408">[ date ]</a>
              <a href="thread.html#408">[ thread ]</a>
              <a href="subject.html#408">[ subject ]</a>
              <a href="author.html#408">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Wil Evers &lt;<A HREF="http://sourcerytools.com/cgi-bin/mailman/listinfo/c++-pthreads">wil at bogo.xs4all.nl</A>&gt; writes:

|<i> Gabriel Dos Reis wrote:
</I>|<i> 
</I>|<i> &gt; Wil Evers &lt;<A HREF="http://sourcerytools.com/cgi-bin/mailman/listinfo/c++-pthreads">wil at bogo.xs4all.nl</A>&gt; writes:
</I>|<i> 
</I>|<i> &gt; | In other words, #2 has the desirable property that it does not break
</I>|<i> &gt; | existing code that assumes destructors *never* throw. I suspect that a
</I>|<i> &gt; | lot of code relies on that assumption, and I know for sure that
</I>|<i> &gt; | practically all of my code does.
</I>|<i> &gt; | | Supposing model #1 is accepted, then how do we cope with
</I>|<i> &gt; existing code
</I>|<i> &gt; | that assumes destructors never throw, or, more generally, with code
</I>|<i> &gt; | that was not written to deal with exceptions thrown from cancellation
</I>|<i> &gt; | points?
</I>|<i> &gt; Destructors that throw usually lead to brittle codes.  The
</I>|<i> &gt; problems are with those destructors, not with the cancellation model
</I>|<i> &gt; implemented for C++. The destructors should be fixed, because that
</I>|<i> &gt; problem is independent of multithreading.
</I>|<i> 
</I>|<i> I disagree; one of the problems with mapping cancellation requests to
</I>|<i> C++ exceptions is that certain system calls that did not throw before
</I>|<i> are changed into functions that do, and that existing (destructor or
</I>|<i> non-destructor) code won't always be able to deal with that.
</I>
If the function (or destructor) has a throw() specification, it will
continue not to throw.  If it did not have that annotation then it was
assumed to  throw.

If you want to have fine grained control, you might want to consider
telling std::terminate() and friends not to abort().

-- Gaby

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000407.html">[c++-pthreads]  Re: pthread_cancel and EH: let's try this again
</A></li>
	<LI>Next message: <A HREF="000409.html">pthread_cancel and EH: let's try this again
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#408">[ date ]</a>
              <a href="thread.html#408">[ thread ]</a>
              <a href="subject.html#408">[ subject ]</a>
              <a href="author.html#408">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://sourcerytools.com/cgi-bin/mailman/listinfo/c++-pthreads">More information about the c++-pthreads
mailing list</a><br>
</body></html>
