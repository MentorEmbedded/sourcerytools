<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [c++-pthreads]  Re: pthread_cancel and EH: let's try this again
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:c%2B%2B-pthreads%40codesourcery.com?Subject=Re%3A%20%5Bc%2B%2B-pthreads%5D%20%20Re%3A%20pthread_cancel%20and%20EH%3A%20let%27s%20try%20this%20again&In-Reply-To=%3C42DD6BE0.7070100%40bogo.xs4all.nl%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000426.html">
   <LINK REL="Next"  HREF="000460.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[c++-pthreads]  Re: pthread_cancel and EH: let's try this again</H1>
    <B>Wil Evers</B> 
    <A HREF="mailto:c%2B%2B-pthreads%40codesourcery.com?Subject=Re%3A%20%5Bc%2B%2B-pthreads%5D%20%20Re%3A%20pthread_cancel%20and%20EH%3A%20let%27s%20try%20this%20again&In-Reply-To=%3C42DD6BE0.7070100%40bogo.xs4all.nl%3E"
       TITLE="[c++-pthreads]  Re: pthread_cancel and EH: let's try this again">wil at bogo.xs4all.nl
       </A><BR>
    <I>Tue Jul 19 21:08:48 UTC 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="000426.html">[c++-pthreads]  Re: pthread_cancel and EH: let's try this again
</A></li>
        <LI>Next message: <A HREF="000460.html">[c++-pthreads]  Re: pthread_cancel and EH: let's try this again
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#459">[ date ]</a>
              <a href="thread.html#459">[ thread ]</a>
              <a href="subject.html#459">[ subject ]</a>
              <a href="author.html#459">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Peter Dimov wrote:

&gt;<i> The natural way to signal cancellation is with an exception, not an 
</I>&gt;<i> error code and a multitude of ifs. The exception model has obviously 
</I>&gt;<i> been considered superior by the Posix folks, so superior that they even 
</I>&gt;<i> defined their own EH mechanism in the C binding.
</I>
I disagree.  IMO, a cancellation request is just another external event 
  (usually) triggered by something outside of the current thread - much 
like data arriving on a socket, or the signalling of a condition 
variable.  As we all know, such events are best dealt with when the 
target thread is ready for them.

As the discussion on this list illustrates, mapping cancellation 
requests to exceptions is causing real headaches.  This is because 
cancellation requests are piggybacked onto system calls originally 
designed for other purposes.

In addition, and contrary to common usage of exceptions, a cancellation 
request is *not* an error in the sense that it immediately prevents the 
current thread from progressing any further.  A cancellation request is 
simply one of the things a thread is supposed to (eventually) handle - 
if the application's design demands so.

That said, I realize it is far too late to change the decisions made by 
the POSIX folks.  All we can do is try to find ways to handle 
cancellation exceptions gracefully.

- Wil

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000426.html">[c++-pthreads]  Re: pthread_cancel and EH: let's try this again
</A></li>
	<LI>Next message: <A HREF="000460.html">[c++-pthreads]  Re: pthread_cancel and EH: let's try this again
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#459">[ date ]</a>
              <a href="thread.html#459">[ thread ]</a>
              <a href="subject.html#459">[ subject ]</a>
              <a href="author.html#459">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://sourcerytools.com/cgi-bin/mailman/listinfo/c++-pthreads">More information about the c++-pthreads
mailing list</a><br>
</body></html>
