<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [c++-pthreads] C++ and posix threads
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:c%2B%2B-pthreads%40codesourcery.com?Subject=Re%3A%20%5Bc%2B%2B-pthreads%5D%20C%2B%2B%20and%20posix%20threads&In-Reply-To=%3C20031223160314.GA9780%40diablo.name%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000038.html">
   <LINK REL="Next"  HREF="000052.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[c++-pthreads] C++ and posix threads</H1>
    <B>Ted Baker</B> 
    <A HREF="mailto:c%2B%2B-pthreads%40codesourcery.com?Subject=Re%3A%20%5Bc%2B%2B-pthreads%5D%20C%2B%2B%20and%20posix%20threads&In-Reply-To=%3C20031223160314.GA9780%40diablo.name%3E"
       TITLE="[c++-pthreads] C++ and posix threads">baker at cs.fsu.edu
       </A><BR>
    <I>Tue Dec 23 16:03:14 UTC 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="000038.html">[c++-pthreads] C++ and posix threads
</A></li>
        <LI>Next message: <A HREF="000052.html">[c++-pthreads] C++ and posix threads
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#51">[ date ]</a>
              <a href="thread.html#51">[ thread ]</a>
              <a href="subject.html#51">[ subject ]</a>
              <a href="author.html#51">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Am I missing something here?

How do you propose to modify read() to throw an exception and
still have backwards compatability with applications that expect
read() to always return (more specifically, to return -1 if it
fails)?

It seems to me that the only way you could do this is to
define a function with a new name, e.g., read_with_exception()
in your binding.  Otherwise, the linker will not be able to
tell the difference between your exception-throwing read()
and the normal C one.  (OK, you might try playing macro games
with renaming read() subject to a conditional compilation flag
for C++ programs, but: (1) that is very error prone; (2)
it would break existing C++ programs that are using calls
to C-library functions like read().

--Ted

On Mon, Dec 22, 2003 at 02:18:18PM -0800, Mark Mitchell wrote:
&gt;<i> On Mon, 2003-12-22 at 13:57, Ted Baker wrote:
</I>&gt;<i> &gt; &gt; (c) it is OK to consider slightly broader modifications to the existing
</I>&gt;<i> &gt; &gt; C interfaces for C++ (such as modifying &quot;read()&quot; to throw an exception),
</I>&gt;<i> &gt; &gt; but it should still be possible to recompile C programs as C++ programs
</I>&gt;<i> &gt; &gt; and get reasonable behavior.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; I don't think you will be able to get buy-in from vendors or
</I>&gt;<i> &gt; users of C if you require changes to the POSIX C libraries that
</I>&gt;<i> &gt; would change the behavior of any existing C application that
</I>&gt;<i> &gt; conforms to the current Open Group Unix or the IEEE POSIX
</I>&gt;<i> &gt; standards.
</I>&gt;<i> 
</I>&gt;<i> I agree -- but I did not say that.  I said:
</I>&gt;<i> 
</I>&gt;<i>   it is OK to consider slightly broader modifications to the
</I>&gt;<i>   existing C interfaces for C++
</I>&gt;<i> 
</I>&gt;<i> There's no inherent reason why a vendor would refuse to make a change to
</I>&gt;<i> the interfaces in some new mode -- so long as the
</I>&gt;<i> backwards-compatibility requirement you mention were preserved.
</I>&gt;<i> 
</I>&gt;<i> -- 
</I>&gt;<i> Mark Mitchell &lt;<A HREF="http://sourcerytools.com/cgi-bin/mailman/listinfo/c++-pthreads">mark at codesourcery.com</A>&gt;
</I>&gt;<i> CodeSourcery, LLC
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000038.html">[c++-pthreads] C++ and posix threads
</A></li>
	<LI>Next message: <A HREF="000052.html">[c++-pthreads] C++ and posix threads
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#51">[ date ]</a>
              <a href="thread.html#51">[ thread ]</a>
              <a href="subject.html#51">[ subject ]</a>
              <a href="author.html#51">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://sourcerytools.com/cgi-bin/mailman/listinfo/c++-pthreads">More information about the c++-pthreads
mailing list</a><br>
</body></html>
