<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [c++-pthreads] Re: C++ and posix threads
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:c%2B%2B-pthreads%40codesourcery.com?Subject=Re%3A%20%5Bc%2B%2B-pthreads%5D%20Re%3A%20C%2B%2B%20and%20posix%20threads&In-Reply-To=%3C20031228045406.GI2774%40tofu.dreamhost.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000077.html">
   <LINK REL="Next"  HREF="000079.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[c++-pthreads] Re: C++ and posix threads</H1>
    <B>Nathan Myers</B> 
    <A HREF="mailto:c%2B%2B-pthreads%40codesourcery.com?Subject=Re%3A%20%5Bc%2B%2B-pthreads%5D%20Re%3A%20C%2B%2B%20and%20posix%20threads&In-Reply-To=%3C20031228045406.GI2774%40tofu.dreamhost.com%3E"
       TITLE="[c++-pthreads] Re: C++ and posix threads">ncm at cantrip.org
       </A><BR>
    <I>Sun Dec 28 04:54:06 UTC 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="000077.html">C++ and posix threads
</A></li>
        <LI>Next message: <A HREF="000079.html">[c++-pthreads] Re: C++ and posix threads
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#78">[ date ]</a>
              <a href="thread.html#78">[ thread ]</a>
              <a href="subject.html#78">[ subject ]</a>
              <a href="author.html#78">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sat, Dec 27, 2003 at 03:24:44PM -0800, Richard Henderson wrote:
&gt;<i> On Thu, Dec 25, 2003 at 02:35:31PM -0500, David Abrahams wrote:
</I>&gt;<i> &gt; I'm not sure I understand what you're saying.  The POSIX C binding
</I>&gt;<i> &gt; standard is in direct conflict with the ISO C++ standard, so _some_
</I>&gt;<i> &gt; standard will be violated.  [...] If that's what you're saying, why
</I>&gt;<i> &gt; is it better to violate the POSIX standard than the ISO C++ standard?
</I>&gt;<i> 
</I>&gt;<i> I think there are degrees here.
</I>&gt;<i> 
</I>&gt;<i> The conflict with ISO C++ is that it says that ISO C functions can't
</I>&gt;<i> throw.  Reverting that clause seems to me to be a minor change.
</I>
Do you _really_ see breaking just about every existing thread-safe 
library as a minor change?  (It would be disingenuous to remark that 
those libraries are &quot;already broken&quot;.  Thousands of them have been 
working fine on millions of systems, year after year.)  Exception-safe 
code distinguishes points that may throw from those that can't.  Those 
functions have not reasonably been expected ever to throw.  Code that 
calls them frequently and reasonably depends, for correctness, on them 
returning normally.  

It is manifestly clear that, for C++, requiring all those thousands of 
libraries to be rewritten is unnecessary.  

&gt;<i> The proposed change to POSIX such that it does not use abnormal return 
</I>&gt;<i> semantics is a *major* change.
</I>
Nobody proposed changing POSIX.  

The proposed semantics is for the C++ _binding_ to POSIX, which 
(I understand) doesn't exist yet.  This implementation would be a
demonstration of a simple C++ binding, to present to POSIX, which 
might later be elaborated with a C++-like interface to matching 
semantics.  The only risk I see in this first effort is if some of 
the required cancellation points do not have any means to report 
failure; there would be some work in identifying those, if indeed 
there are any.

(There would certainly be plenty of C programmers who would welcome a 
mode in which cancellation means syscalls return failure, so they can
use those thousands of libraries that have been rendered inoperative
by late implemention activity -- but that's none of our business here.)

I have been reading archives of discussion of the POSIX C binding:
Whenever a C++ compatibility concern was raised, in the messages 
I read, someone was quick to retort that it was the C, not the C++ 
binding, that was under discussion.  Such rejections implied a promise 
that for C++ the semantics could reasonably differ as needed to be
compatible with C++ language semantics.  To assert now that the C++ 
binding cannot depart from the C binding in any detail would be a 
deep betrayal of that implied promise.

Nathan Myers
<A HREF="http://sourcerytools.com/cgi-bin/mailman/listinfo/c++-pthreads">ncm at cantrip.org</A>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000077.html">C++ and posix threads
</A></li>
	<LI>Next message: <A HREF="000079.html">[c++-pthreads] Re: C++ and posix threads
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#78">[ date ]</a>
              <a href="thread.html#78">[ thread ]</a>
              <a href="subject.html#78">[ subject ]</a>
              <a href="author.html#78">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://sourcerytools.com/cgi-bin/mailman/listinfo/c++-pthreads">More information about the c++-pthreads
mailing list</a><br>
</body></html>
