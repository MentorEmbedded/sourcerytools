<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> cancellation points report failure
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:c%2B%2B-pthreads%40codesourcery.com?Subject=Re%3A%20cancellation%20points%20report%20failure&In-Reply-To=%3Cu1xquf74p.fsf%40boost-consulting.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000059.html">
   <LINK REL="Next"  HREF="000020.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>cancellation points report failure</H1>
    <B>David Abrahams</B> 
    <A HREF="mailto:c%2B%2B-pthreads%40codesourcery.com?Subject=Re%3A%20cancellation%20points%20report%20failure&In-Reply-To=%3Cu1xquf74p.fsf%40boost-consulting.com%3E"
       TITLE="cancellation points report failure">dave at boost-consulting.com
       </A><BR>
    <I>Wed Dec 24 17:38:46 UTC 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="000059.html">[c++-pthreads] cancellation points report failure
</A></li>
        <LI>Next message: <A HREF="000020.html">[c++-pthreads] cancellation points report failure
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#63">[ date ]</a>
              <a href="thread.html#63">[ thread ]</a>
              <a href="subject.html#63">[ subject ]</a>
              <a href="author.html#63">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Jason Merrill &lt;<A HREF="http://sourcerytools.com/cgi-bin/mailman/listinfo/c++-pthreads">jason at redhat.com</A>&gt; writes:

&gt;<i> On Sat, 20 Dec 2003 10:54:44 -0800, Mark Mitchell &lt;<A HREF="http://sourcerytools.com/cgi-bin/mailman/listinfo/c++-pthreads">mark at codesourcery.com</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;&gt;&gt;<i> Since it apparently isn't yet clear to everybody what I had suggested,
</I>&gt;&gt;&gt;<i> I'll outline it again:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I think it's a great to see a tidy description of your idea.  It's good
</I>&gt;&gt;<i> to get concrete proposals on the table.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Jason (Merill), would you care to post a similar description of your
</I>&gt;&gt;<i> preferred scenario?
</I>&gt;<i>
</I>&gt;<i> The scenario I've been thinking of is:
</I>&gt;<i>
</I>&gt;<i>  * The POSIX cancellation points can throw a cancellation exception.
</I>
I'm unhappy with this one for the same reasons as Nathan has
outlined... but there's more to your proposal.

&gt;<i>  * C++ I/O functions can throw a cancellation exception.
</I>&gt;<i>  * C++ catch blocks work normally.
</I>&gt;<i>  * If a cancellation exception is destroyed, the cancellation request
</I>&gt;<i>    is re-entered, and acted on again at the next cancellation point.
</I>
I appreciate that your motivation is to ensure that synchronous
cancellation requests aren't ignored, but that doesn't really seem to
accomplish the goal.  After all, a thread never has to reach a
cancellation point, and even if it does, it can keep catching and
discarding the exceptions indefinitely.

It seems to me that it should be up to the cancelling thread to decide
whether it wants to take drastic measures to ensure that cancellation
happens.  The only effective way I can think of to do that is to do
allow synchronous cancellation requests with a timeout that forces
thread termination if it fails to respond... but I'm sure there are
other approaches.
     
-- 
Dave Abrahams
Boost Consulting
www.boost-consulting.com


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000059.html">[c++-pthreads] cancellation points report failure
</A></li>
	<LI>Next message: <A HREF="000020.html">[c++-pthreads] cancellation points report failure
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#63">[ date ]</a>
              <a href="thread.html#63">[ thread ]</a>
              <a href="subject.html#63">[ subject ]</a>
              <a href="author.html#63">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://sourcerytools.com/cgi-bin/mailman/listinfo/c++-pthreads">More information about the c++-pthreads
mailing list</a><br>
</body></html>
