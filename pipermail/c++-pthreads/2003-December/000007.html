<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [c++-pthreads] Re: C++ and POSIX Threads Mailing List
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:c%2B%2B-pthreads%40codesourcery.com?Subject=Re%3A%20%5Bc%2B%2B-pthreads%5D%20Re%3A%20C%2B%2B%20and%20POSIX%20Threads%20Mailing%20List&In-Reply-To=%3C2E98D8A4-3251-11D8-B7E5-00039390D9E0%40apple.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000006.html">
   <LINK REL="Next"  HREF="000008.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[c++-pthreads] Re: C++ and POSIX Threads Mailing List</H1>
    <B>Matt Austern</B> 
    <A HREF="mailto:c%2B%2B-pthreads%40codesourcery.com?Subject=Re%3A%20%5Bc%2B%2B-pthreads%5D%20Re%3A%20C%2B%2B%20and%20POSIX%20Threads%20Mailing%20List&In-Reply-To=%3C2E98D8A4-3251-11D8-B7E5-00039390D9E0%40apple.com%3E"
       TITLE="[c++-pthreads] Re: C++ and POSIX Threads Mailing List">austern at apple.com
       </A><BR>
    <I>Fri Dec 19 18:28:46 UTC 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="000006.html">C++ and POSIX Threads Mailing List
</A></li>
        <LI>Next message: <A HREF="000008.html">cancellation points report failure
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7">[ date ]</a>
              <a href="thread.html#7">[ thread ]</a>
              <a href="subject.html#7">[ subject ]</a>
              <a href="author.html#7">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Dec 18, 2003, at 11:58 PM, Schwarz Konrad wrote:

&gt;<i> Mark Mitchell posted the existance of this mailing list to 
</I>&gt;<i> austin-group.
</I>&gt;<i>
</I>&gt;<i> Although not a C++ programmer, I want to present my views on the 
</I>&gt;<i> subject:
</I>&gt;<i>
</I>&gt;<i> Pthreads cancelation and C++ exceptions have arisen in different 
</I>&gt;<i> contexts.
</I>&gt;<i> Although Tru64 apparently unites the two, I believe this is not 
</I>&gt;<i> necessary.
</I>&gt;<i>
</I>&gt;<i> Pthread code that is aysnc-cancelation safe needs to take extra 
</I>&gt;<i> precautions
</I>&gt;<i> (pushing and popping cancelation handlers).  Why can't this 
</I>&gt;<i> restriction be
</I>&gt;<i> extended to C++?  I.e., C++ code that wishes to be async-cancelation 
</I>&gt;<i> safe
</I>&gt;<i> can do the exact same thing as C code.  This avoids all the thorny 
</I>&gt;<i> issues
</I>&gt;<i> that, juding from the (few) mails I read from your archive, are nearly
</I>&gt;<i> impossible to solve.
</I>
The annoying issues include synchronous cancellation, not just
asynchronous.  At the simplest level: the POSIX standard says
that read is a cancellation point and that fread might be one too.
The C++ standard says that fread does not throw exceptions,
and, while the C++ standard doesn't mention read, most C++
programmers would think it's reasonable to assume that read
doesn't throw exceptions either.  If we decide that thread
cancellation results in something like an exception getting thrown
in the canceled thread, then we've got a problem.

One possible solution (perhaps overly drastic): in C++, eliminate
all cancelation points except for pthread_testcancel.

			--Matt


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000006.html">C++ and POSIX Threads Mailing List
</A></li>
	<LI>Next message: <A HREF="000008.html">cancellation points report failure
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7">[ date ]</a>
              <a href="thread.html#7">[ thread ]</a>
              <a href="subject.html#7">[ subject ]</a>
              <a href="author.html#7">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://sourcerytools.com/cgi-bin/mailman/listinfo/c++-pthreads">More information about the c++-pthreads
mailing list</a><br>
</body></html>
