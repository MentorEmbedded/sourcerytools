<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [c++-pthreads] Re: [SPAM] - Re: [c++-pthreads]  Re: FW: RE: Re: I'm Lost - Email found in subject
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:c%2B%2B-pthreads%40codesourcery.com?Subject=Re%3A%20%5Bc%2B%2B-pthreads%5D%20Re%3A%20%5BSPAM%5D%20-%20Re%3A%20%5Bc%2B%2B-pthreads%5D%20%20Re%3A%20FW%3A%20RE%3A%20Re%3A%0A%20I%27m%20Lost%20-%20Email%20found%20in%20subject&In-Reply-To=%3C440F8445.8030608%40hp.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000561.html">
   <LINK REL="Next"  HREF="000570.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[c++-pthreads] Re: [SPAM] - Re: [c++-pthreads]  Re: FW: RE: Re: I'm Lost - Email found in subject</H1>
    <B>Dave Butenhof</B> 
    <A HREF="mailto:c%2B%2B-pthreads%40codesourcery.com?Subject=Re%3A%20%5Bc%2B%2B-pthreads%5D%20Re%3A%20%5BSPAM%5D%20-%20Re%3A%20%5Bc%2B%2B-pthreads%5D%20%20Re%3A%20FW%3A%20RE%3A%20Re%3A%0A%20I%27m%20Lost%20-%20Email%20found%20in%20subject&In-Reply-To=%3C440F8445.8030608%40hp.com%3E"
       TITLE="[c++-pthreads] Re: [SPAM] - Re: [c++-pthreads]  Re: FW: RE: Re: I'm Lost - Email found in subject">david.butenhof at hp.com
       </A><BR>
    <I>Thu Mar  9 01:26:29 UTC 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="000561.html">[SPAM] - Re: [c++-pthreads]  Re: FW: RE: Re: I'm Lost - Email found in subject
</A></li>
        <LI>Next message: <A HREF="000570.html">[c++-pthreads] Re: [SPAM] - Re: [c++-pthreads]  Re: FW: RE: Re: I'm Lost - Email found in subject
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#564">[ date ]</a>
              <a href="thread.html#564">[ thread ]</a>
              <a href="subject.html#564">[ subject ]</a>
              <a href="author.html#564">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Ted Baker wrote:
&gt;<i> On Wed, Mar 08, 2006 at 03:15:37PM -0800, Mark Mitchell wrote:
</I>&gt;<i>   
</I>&gt;&gt;<i> Jason Merrill wrote:
</I>&gt;&gt;<i>     
</I>&gt;&gt;&gt;<i> If you can interrupt cancellation, re-cancellation is implemented
</I>&gt;&gt;&gt;<i> trivially simply by just having the cancellation exception destructor
</I>&gt;&gt;&gt;<i> call 'pthread_cancel (pthread_self ())'.  The sticking point is being
</I>&gt;&gt;&gt;<i> able to abort the cancellation in the first place, which is what Uli has
</I>&gt;&gt;&gt;<i> been opposed to.
</I>&gt;&gt;&gt;<i>       
</I>&gt;<i> This would be illegal according to the C API, since once a thread
</I>&gt;<i> begins executing cancellation handlers it becomes (irrevocably)
</I>&gt;<i> not cancellable.  That means a subsequent call to pthread_cancel
</I>&gt;<i> is required to have no effect on the thread.
</I>&gt;<i>   
</I>The C binding is necessarily constrained; but we were careful (as much 
as possible within the restrictions of POSIX scope) to be clear that 
those constraints should not restrict more advanced language 
implementation. In particular, that cancel was always intended to be an 
exception and that in a language with the capability it SHOULD be. That 
of course, can't be stated as a requirement, but it was our intent.
&gt;<i> So, if you want to do this you need a new function that is like
</I>&gt;<i> pthread_cancel but has special semantics.  That is, the developer
</I>&gt;<i> of the C++ binding would need to coordinate with the implementor
</I>&gt;<i> of pthread_cancel to provide this function not in the POSIX C API.
</I>&gt;<i>   
</I>Yes; unfortunately most UNIX systems still lack a cross-language 
exception infrastructure, so C++ and pthread cancel/exit, Ada, Java, and 
so forth have each &quot;rolled their own&quot; largely incompatible interfaces. 
Makes me miss OpenVMS and Tru64 UNIX, which did have common exceptions. 
The original implementation of the POSIX C API, going back way before 
there even WAS a POSIX C API, was based on VMS condition handling (OS 
exceptions) and Tru64 UNIX libexc. Interoperable exception support for 
cancel across C, C++, Ada, etc. was almost free since pretty much 
everyone ran destructors, finally clauses and such even on foreign 
exception unwinds. (Even if they didn't have named exception support to 
catch them.)

Several other mainstream UNIX vendors nearly had a common exception API 
as well as a result of the Itanium UNIX ABI effort, but apparently 
everyone backed off when the group disbanded. (That was a major 
disappointment.)
&gt;&gt;<i> ...  So, it seems like this ought to satisfy everyone from the user-level perspective.
</I>&gt;&gt;<i>     
</I>&gt;<i> I've been talking about the implementor-perspective. A standard will not
</I>&gt;<i> be much good unless you can also persuade the implementors to buy in.
</I>Nor will getting implementors on board if the final form isn't something 
compellingly useful to developers. I have trouble believing that a C++ 
POSIX binding that doesn't use exceptions will be accepted easily, 
widely, or quickly.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: david.butenhof.vcf
Type: text/x-vcard
Size: 476 bytes
Desc: not available
URL: &lt;<A HREF="http://sourcerytools.com/pipermail/c++-pthreads/attachments/20060308/59da4dae/attachment.vcf">http://sourcerytools.com/pipermail/c++-pthreads/attachments/20060308/59da4dae/attachment.vcf</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000561.html">[SPAM] - Re: [c++-pthreads]  Re: FW: RE: Re: I'm Lost - Email found in subject
</A></li>
	<LI>Next message: <A HREF="000570.html">[c++-pthreads] Re: [SPAM] - Re: [c++-pthreads]  Re: FW: RE: Re: I'm Lost - Email found in subject
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#564">[ date ]</a>
              <a href="thread.html#564">[ thread ]</a>
              <a href="subject.html#564">[ subject ]</a>
              <a href="author.html#564">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://sourcerytools.com/cgi-bin/mailman/listinfo/c++-pthreads">More information about the c++-pthreads
mailing list</a><br>
</body></html>
