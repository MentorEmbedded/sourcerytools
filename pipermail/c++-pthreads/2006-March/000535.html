<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [c++-pthreads]  Re: FW: RE: Re: I'm Lost
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:c%2B%2B-pthreads%40codesourcery.com?Subject=Re%3A%20%5Bc%2B%2B-pthreads%5D%20%20Re%3A%20FW%3A%20RE%3A%20Re%3A%20I%27m%20Lost&In-Reply-To=%3C440C94A9.4020805%40codesourcery.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000534.html">
   <LINK REL="Next"  HREF="000536.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[c++-pthreads]  Re: FW: RE: Re: I'm Lost</H1>
    <B>Mark Mitchell</B> 
    <A HREF="mailto:c%2B%2B-pthreads%40codesourcery.com?Subject=Re%3A%20%5Bc%2B%2B-pthreads%5D%20%20Re%3A%20FW%3A%20RE%3A%20Re%3A%20I%27m%20Lost&In-Reply-To=%3C440C94A9.4020805%40codesourcery.com%3E"
       TITLE="[c++-pthreads]  Re: FW: RE: Re: I'm Lost">mark at codesourcery.com
       </A><BR>
    <I>Mon Mar  6 19:59:37 UTC 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="000534.html">[c++-pthreads]  Re: FW: RE: Re: I'm Lost
</A></li>
        <LI>Next message: <A HREF="000536.html">[c++-pthreads]  Re: FW: RE: Re: I'm Lost
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#535">[ date ]</a>
              <a href="thread.html#535">[ thread ]</a>
              <a href="subject.html#535">[ subject ]</a>
              <a href="author.html#535">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>David Abrahams wrote:

&gt;<i> If &quot;finalized cancellation exceptions result in a new throw at the
</I>&gt;<i> next cancellation point&quot; isn't enough of a compromise, it isn't going
</I>&gt;<i> to be me either, because I'm out of new ideas.
</I>
That sounds fine to me.  The key invariant that I feel must be preserved
is that cancellation is an exception, with all that implies.  (Actually
I'd made one exception to that requirement: if people wanted to say that
the type of the exception is unnameable, and that you cannot therefore
catch it by any means other than ..., I would see that as an
unnecessary, but acceptable, restriction.)

Your suggestion is to make functions which already throw exceptions (in
this context) throw them more often, which is OK; callers have to be
prepared for them to throw exceptions anyhow.  (You do have to say what
happens if the thread is cancelled, catches the exceptions, sets the
no-cancel bit, and then reaches a cancellation point.  The answer must
be that the thread is not cancelled, since, in that context, the
surrounding code can reasonably be written to assume there will no
exceptions.)

As far as I can tell, the last time we discussed this issue, all of the
C++ experts agreed that not allowing cancellation exceptions to be
caught was a serious violation of C++ exception-safety principles.

The key obstacle to progress here, AFAICT, is that Ulrich Drepper has
claimed that once cancellation occurs it is (in some unexplained way)
impossible for the thread to continue, despite the fact that it can run
its cancellation handlers, etc.  I've never been able to tell if he
thinks this to be a POSIX requirement, a Linux kernel issue, a GLIBC
implementation issue, or something else.

-- 
Mark Mitchell
CodeSourcery
<A HREF="http://sourcerytools.com/cgi-bin/mailman/listinfo/c++-pthreads">mark at codesourcery.com</A>
(650) 331-3385 x713

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000534.html">[c++-pthreads]  Re: FW: RE: Re: I'm Lost
</A></li>
	<LI>Next message: <A HREF="000536.html">[c++-pthreads]  Re: FW: RE: Re: I'm Lost
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#535">[ date ]</a>
              <a href="thread.html#535">[ thread ]</a>
              <a href="subject.html#535">[ subject ]</a>
              <a href="author.html#535">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://sourcerytools.com/cgi-bin/mailman/listinfo/c++-pthreads">More information about the c++-pthreads
mailing list</a><br>
</body></html>
