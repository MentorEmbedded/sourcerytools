<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> Tau Instrumenting Pooma Header Files: Status Report
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:pooma-dev%40codesourcery.com?Subject=Re%3A%20Tau%20Instrumenting%20Pooma%20Header%20Files%3A%20Status%20Report&In-Reply-To=%3C200110052342.f95NgbD04339%40oz.codesourcery.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000783.html">
   <LINK REL="Next"  HREF="000790.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>Tau Instrumenting Pooma Header Files: Status Report</H1>
    <B>Jeffrey Oldham</B> 
    <A HREF="mailto:pooma-dev%40codesourcery.com?Subject=Re%3A%20Tau%20Instrumenting%20Pooma%20Header%20Files%3A%20Status%20Report&In-Reply-To=%3C200110052342.f95NgbD04339%40oz.codesourcery.com%3E"
       TITLE="Tau Instrumenting Pooma Header Files: Status Report">oldham at codesourcery.com
       </A><BR>
    <I>Fri Oct  5 23:42:37 UTC 2001</I>
    <P><UL>
        <LI>Previous message: <A HREF="000783.html">Using Tau and PDToolkit
</A></li>
        <LI>Next message: <A HREF="000790.html">Tau Instrumenting Pooma Header Files: Status Report
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#784">[ date ]</a>
              <a href="thread.html#784">[ thread ]</a>
              <a href="subject.html#784">[ subject ]</a>
              <a href="author.html#784">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
The current status:

Scott Haney and Mark Mitchell want the ability to automatically add
Tau instrumentation function to all non-inline functions.

1) Using the libraries I distributed yesterday and configuration
   patches awaiting approval, profiling Pooma *.cmpl.cpp files occurs
   automatically after configuring with '--profile'.

2) Sameer Shende graciously sent a revised Tau that does not
   instrument inline functions.

3) I modified the Pooma configury scripts to create a directory full
   of instrumented header files.  Unfortunately, the PDToolkit parser
   incorrectly analyzes several header files.  I sent an error report
   to Sameer concerning one.  Others will require some special
   handling on our part.

In the meantime, I sent a script to Stephen Smith permitting
instrumenting of one particular header file.  This script is applied
by hand and reversed by hand.

No future work:

I am stopping work on instrumenting header files for now.  After
receiving a fix from Sameer, it will probably take at least one more
working day to resolve the remaining instrumenting problems.  Mark
Mitchell and Scott Haney will need to indicate if this work is really
necessary.  Unless otherwise directed, I will discard my work.

The technique to instrument header files:

Instrumented versions of *.cmpl.cpp files are stored in $(SUITE)
subdirectories and compiled there.  This technique does not work for
header files because users of header file name hard-coded path names
in their files.  Thus, we store the instrumented header files in the
directory tree 'src/$(SUITE)' and '-I.../src/$(SUITE)' is added at the
beginning of compilation commands so the instrumented header files are
used.  Header files may change between compilations, and we want the
corresponding instrumented version to be updated when necessary.
Thus, dependencies and gnu-make pattern rules cause the needed
instrumented header files to be created.

If you want the patch to
    configure
    config/Shared/compilerules.mk
    config/Shared/dependo.pl
    config/Shared/rules.mk
    config/Shared/tail.mk,
send me email.  (~/pooma/pooma4/)

Thanks,
Jeffrey D. Oldham
<A HREF="http://sourcerytools.com/cgi-bin/mailman/listinfo/pooma-dev">oldham at codesourcery.com</A>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000783.html">Using Tau and PDToolkit
</A></li>
	<LI>Next message: <A HREF="000790.html">Tau Instrumenting Pooma Header Files: Status Report
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#784">[ date ]</a>
              <a href="thread.html#784">[ thread ]</a>
              <a href="subject.html#784">[ subject ]</a>
              <a href="author.html#784">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://sourcerytools.com/cgi-bin/mailman/listinfo/pooma-dev">More information about the pooma-dev
mailing list</a><br>
</body></html>
