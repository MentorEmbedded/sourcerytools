<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> RFA: Field-Related Pooma Code Changes
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:pooma-dev%40codesourcery.com?Subject=Re%3A%20RFA%3A%20Field-Related%20Pooma%20Code%20Changes&In-Reply-To=%3C20010327184835.A7346%40codesourcery.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000088.html">
   <LINK REL="Next"  HREF="000092.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>RFA: Field-Related Pooma Code Changes</H1>
    <B>Jeffrey Oldham</B> 
    <A HREF="mailto:pooma-dev%40codesourcery.com?Subject=Re%3A%20RFA%3A%20Field-Related%20Pooma%20Code%20Changes&In-Reply-To=%3C20010327184835.A7346%40codesourcery.com%3E"
       TITLE="RFA: Field-Related Pooma Code Changes">oldham at codesourcery.com
       </A><BR>
    <I>Wed Mar 28 02:48:35 UTC 2001</I>
    <P><UL>
        <LI>Previous message: <A HREF="000088.html">Patch: FieldStencil Typo in tut-08.html
</A></li>
        <LI>Next message: <A HREF="000092.html">[pooma-dev] RFA: Field-Related Pooma Code Changes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#91">[ date ]</a>
              <a href="thread.html#91">[ thread ]</a>
              <a href="subject.html#91">[ subject ]</a>
              <a href="author.html#91">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>The majority of these changes consist of:
o Reorder constructor's initializers to reflect class declaration order.
o Add an initializer for the base class.
o Add `typename's.
o Change preprocessor line from `if' to `ifdef'.

Are these changes OK to commit?

2001-03-27  Jeffrey D. Oldham  &lt;<A HREF="http://sourcerytools.com/cgi-bin/mailman/listinfo/pooma-dev">oldham at codesourcery.com</A>&gt;

	* Array/PrintArray.h (PrintArray::PrintArray): Reorder
	constructor's initializers to reflect class declaration order.
	* BConds/BCondList.h (BCondListData::BCondListData): Add an
	initializer for the base class.
	(BCondListData::~BCondListData): Change loop counter's type.
	(BCondListData): Add typedef for vector iteration.
	* BConds/LinExtrapFaceBC.h
	(LinearExtrapolateFaceBC::LinearExtrapolateFaceBC): Add a base
	class initializer.
	* BConds/NegReflectFaceBC.h
	(NegReflectFaceBC::NegReflectFaceBC): Likewise.
	* BConds/PeriodicFaceBC.h (PeriodicFaceBC::PeriodicFaceBC):
	Likewise.
	* BConds/PosReflectFaceBC.h (PosReflectFaceBC::PosReflectFaceBC):
	Likewise.
	* BConds/ZeroFaceBC.h (ZeroFaceBC::ZeroFaceBC):
	Likewise.
	* Domain/DomainRemoveOverlap.h (DomainRemoveOverlap): Add `typename's.
	* Domain/DomainTraits.Grid.h (DomainTraits::setDomain): Rewrite to
	ensure that comparisons occur between the same types.
	* Domain/DomainTraits.Interval.h (DomainTraits::setDomain): Likewise.
	* Domain/DomainTraits.Range.h (DomainTraits::setDomain): Likewise.
	* Domain/Grid.h (Grid::Grid): Add a base class initializer.
	* Engine/IndexFunctionEngine.h (Engine): Reorder constructor's
	initializers to reflect class declaration order.
	* Engine/RemoteEngine.h (GatherContextsData::GatherContextsData):
	Add a base class initializer.
	(Evaluator::evaluate): Add `typename's.
	* Evaluator/Evaluator.h (Evaluate::evaluate): Likewise.
	* Evaluator/ExpressionKernel.h
	(ExpressionKernel::ExpressionKernel): Change preprocessor line to
	`ifdef'.
	* Evaluator/MultiArgEvaluator.h (MultiArgEvaluator::evaluate): Add
	`typename's.
	* Evaluator/Reduction.h (Reduction::evaluate): Likewise.
	* Field/Field.cpp (assign): Likewise.
	* Field/Field.h (Field::array): Reorder template and `inline'.
	(Field::arrayAll): Likewise.
	* Field/PrintField.h (PrintField::PrintField): Reorder
	constructor's initializers to reflect class declaration order.
	* Layout/DynamicEvents.h (CreateEvent::CreateEvent): Likewise.
	(DestroyEvent::DestroyEvent): Likewise.
	(CopyEvent::CopyEvent): Likewise.
	(CopyPatchEvent::CopyPatchEvent): Likewise.
	* Layout/GlobalIDDataBase.h (Pack::Pack): Likewise.
	* Layout/GridLayout.cpp (GridLayoutData&lt;Dim&gt;::initialize): Add
	`typename's.
	* Layout/SparseTileLayout.cpp
	(SparseTileLayoutData&lt;Dim&gt;::~SparseTileLayoutData): Likewise.
	(SparseTileLayoutData&lt;Dim&gt;::calcMaps): Likewise.
	(SparseTileLayoutData&lt;Dim&gt;::calcAllocMaps): Likewise.
	(SparseTileLayoutData&lt;Dim&gt;::calcGCFillList): Likewise.
	(SparseTileLayoutData&lt;Dim&gt;::touches): Likewise.
	(SparseTileLayoutData&lt;Dim&gt;::touchesAlloc): Likewise.
	(SparseTileLayoutData&lt;Dim&gt;::print): Likewise.
	* Layout/UniformGridLayout.cpp
	(UniformGridLayoutData&lt;Dim&gt;::partition): Likewise.
	(UniformGridLayoutData&lt;Dim&gt;::initialize): Likewise.
	* Partition/BisectionMapper.h (BisectionMapper::map): Likewise.
	* Partition/UniformMapper.h (UniformMapper::~UniformMapper): New
	empty function.
	* Pooma/Pooma.h (poll): Change preprocessor line to `ifdef'.
	* Pooma/PoomaOperatorTags.h (FnMin::operator()): Likewise.
	(FnMax::operator()): Likewise.
	(FnMinAssign::operator()): Likewise.
	(FnMaxAssign::operator()): Likewise.
	* Threads/PoomaCSem.h: Likewise.
	* Threads/Scheduler.h: Likewise.
	* Utilities/Observer.h (SingleObserver::~SingleObserver): Make
	virtual.
	* Utilities/RefCountedBlockPtr.h
	(RefBlockController::RefBlockController): Reorder constructor's
	initializers to reflect class declaration order.
	(RefCountedBlockPtr): Change preprocessor line.
	(RefCountedBlockPtr::RefCountedBlockPtr): Reorder constructor's
	initializers to reflect class declaration order.
	* Utilities/algorithms.h (copy_special): Change preprocessor line
	to `ifdef'.
	(delete_backfill): Likewise.

Tested on	sequential Linux by compiling Pooma library using g++ mainline
Reviewed by	????you????

****************

These errors were revealed by compiling this program:

#include &lt;iostream&gt;
#include &lt;stdlib.h&gt;
#include &quot;Pooma/Fields.h&quot;

int main(int argc, char *argv[])
{
  // Set up the Pooma library.
  Pooma::initialize(argc,argv);

  Pooma::finalize();
  return EXIT_SUCCESS;
}

Thanks,
Jeffrey D. Oldham
<A HREF="http://sourcerytools.com/cgi-bin/mailman/listinfo/pooma-dev">oldham at codesourcery.com</A>
-------------- next part --------------
Index: Array/PrintArray.h
===================================================================
RCS file: /home/pooma/Repository/r2/src/Array/PrintArray.h,v
retrieving revision 1.20
diff -c -p -r1.20 PrintArray.h
*** Array/PrintArray.h	2000/07/20 15:36:24	1.20
--- Array/PrintArray.h	2001/03/28 01:59:29
*************** public:
*** 202,208 ****
  	     bool scientific = false, int spacing = 1)
      : domainwidth_m(domainWidth), datawidth_m(dataWidth), 
        dataprecision_m(dataPrecision), carreturn_m(carReturn),
!       scientific_m(scientific), spacing_m(spacing)
      {
        PAssert(domainwidth_m &gt; 0);
        PAssert(datawidth_m &gt; 0);
--- 202,208 ----
  	     bool scientific = false, int spacing = 1)
      : domainwidth_m(domainWidth), datawidth_m(dataWidth), 
        dataprecision_m(dataPrecision), carreturn_m(carReturn),
!       spacing_m(spacing), scientific_m(scientific)
      {
        PAssert(domainwidth_m &gt; 0);
        PAssert(datawidth_m &gt; 0);
Index: BConds/BCondList.h
===================================================================
RCS file: /home/pooma/Repository/r2/src/BConds/BCondList.h,v
retrieving revision 1.13
diff -c -p -r1.13 BCondList.h
*** BConds/BCondList.h	2000/04/27 22:33:53	1.13
--- BConds/BCondList.h	2001/03/28 01:59:29
*************** public:
*** 62,68 ****
    // Copy constructor.
  
    BCondListData(const BCondListData &amp;model)
!   : data_m(model.data_m) { }
    
    //---------------------------------------------------------------------------
    // Copy assignment operator.
--- 62,68 ----
    // Copy constructor.
  
    BCondListData(const BCondListData &amp;model)
!   : RefCounted (), data_m(model.data_m) { }
    
    //---------------------------------------------------------------------------
    // Copy assignment operator.
*************** public:
*** 79,85 ****
  
    ~BCondListData() 
    {
!     for (int i = 0; i &lt; data_m.size(); i++)
        delete data_m[i]; 
    }
  
--- 79,85 ----
  
    ~BCondListData() 
    {
!     for (size_type i = 0; i &lt; data_m.size(); i++)
        delete data_m[i]; 
    }
  
*************** public:
*** 115,120 ****
--- 115,121 ----
  private:
  
    std::vector&lt;BCondItem *&gt; data_m;
+   typedef std::vector&lt;BCondItem *&gt;::size_type size_type;
  };
  
  
Index: BConds/LinExtrapFaceBC.h
===================================================================
RCS file: /home/pooma/Repository/r2/src/BConds/LinExtrapFaceBC.h,v
retrieving revision 1.9
diff -c -p -r1.9 LinExtrapFaceBC.h
*** BConds/LinExtrapFaceBC.h	2000/03/07 13:16:12	1.9
--- BConds/LinExtrapFaceBC.h	2001/03/28 01:59:30
*************** public:
*** 85,90 ****
--- 85,91 ----
    LinearExtrapolateFaceBC(int face) : 
      face_m(face) { }
    LinearExtrapolateFaceBC(const LinearExtrapolateFaceBC &amp;model) : 
+     BCondCategory&lt;LinearExtrapolateFaceBC&gt;(),
      face_m(model.face()) { }
  
    //---------------------------------------------------------------------------
Index: BConds/NegReflectFaceBC.h
===================================================================
RCS file: /home/pooma/Repository/r2/src/BConds/NegReflectFaceBC.h,v
retrieving revision 1.9
diff -c -p -r1.9 NegReflectFaceBC.h
*** BConds/NegReflectFaceBC.h	2000/03/07 13:16:12	1.9
--- BConds/NegReflectFaceBC.h	2001/03/28 01:59:30
*************** public:
*** 82,87 ****
--- 82,88 ----
    NegReflectFaceBC(int face, bool enforceZeroBoundary = false) : 
      face_m(face), enforceZeroBoundary_m(enforceZeroBoundary) { }
    NegReflectFaceBC(const NegReflectFaceBC &amp;model) : 
+     BCondCategory&lt;NegReflectFaceBC&gt;(),
      face_m(model.face()), enforceZeroBoundary_m(model.enforceZeroBoundary())
    { }
  
Index: BConds/PeriodicFaceBC.h
===================================================================
RCS file: /home/pooma/Repository/r2/src/BConds/PeriodicFaceBC.h,v
retrieving revision 1.8
diff -c -p -r1.8 PeriodicFaceBC.h
*** BConds/PeriodicFaceBC.h	2000/03/07 13:16:13	1.8
--- BConds/PeriodicFaceBC.h	2001/03/28 01:59:30
*************** public:
*** 79,84 ****
--- 79,85 ----
    PeriodicFaceBC(int face) : 
      face_m(face) { }
    PeriodicFaceBC(const PeriodicFaceBC &amp;model) : 
+     BCondCategory&lt;PeriodicFaceBC&gt;(),
      face_m(model.face())
    { }
  
Index: BConds/PosReflectFaceBC.h
===================================================================
RCS file: /home/pooma/Repository/r2/src/BConds/PosReflectFaceBC.h,v
retrieving revision 1.10
diff -c -p -r1.10 PosReflectFaceBC.h
*** BConds/PosReflectFaceBC.h	2000/03/07 13:16:13	1.10
--- BConds/PosReflectFaceBC.h	2001/03/28 01:59:30
*************** public:
*** 82,87 ****
--- 82,88 ----
    PosReflectFaceBC(int face, bool enforceZeroBoundary = false) : 
      face_m(face), enforceZeroBoundary_m(enforceZeroBoundary) { }
    PosReflectFaceBC(const PosReflectFaceBC &amp;model) : 
+     BCondCategory&lt;PosReflectFaceBC&gt;(),
      face_m(model.face()), enforceZeroBoundary_m(model.enforceZeroBoundary())
    { }
  
Index: BConds/ZeroFaceBC.h
===================================================================
RCS file: /home/pooma/Repository/r2/src/BConds/ZeroFaceBC.h,v
retrieving revision 1.12
diff -c -p -r1.12 ZeroFaceBC.h
*** BConds/ZeroFaceBC.h	2000/03/07 13:16:13	1.12
--- BConds/ZeroFaceBC.h	2001/03/28 01:59:30
*************** public:
*** 78,83 ****
--- 78,84 ----
    ZeroFaceBC(int face, bool enforceZeroBoundary = false) : 
      face_m(face), enforceZeroBoundary_m(enforceZeroBoundary) { }
    ZeroFaceBC(const ZeroFaceBC &amp;model) : 
+     BCondCategory&lt;ZeroFaceBC&gt;(),
      face_m(model.face()), enforceZeroBoundary_m(model.enforceZeroBoundary())
    { }
  
Index: Domain/DomainRemoveOverlap.h
===================================================================
RCS file: /home/pooma/Repository/r2/src/Domain/DomainRemoveOverlap.h,v
retrieving revision 1.6
diff -c -p -r1.6 DomainRemoveOverlap.h
*** Domain/DomainRemoveOverlap.h	2000/03/07 13:16:35	1.6
--- Domain/DomainRemoveOverlap.h	2001/03/28 01:59:30
*************** DomainRemoveOverlap(const Interval&lt;Dim&gt; 
*** 47,54 ****
  
    for (int i=0;i&lt;Dim;++i)
      {
!       DomainList_t::iterator start = result.begin();
!       DomainList_t::iterator end = result.end();
        for ( ; start!=end; ++start)
  	{ 
  	  if (touches( (*start)[i], Loc&lt;1&gt;(r[i].min())))
--- 47,54 ----
  
    for (int i=0;i&lt;Dim;++i)
      {
!       typename DomainList_t::iterator start = result.begin();
!       typename DomainList_t::iterator end = result.end();
        for ( ; start!=end; ++start)
  	{ 
  	  if (touches( (*start)[i], Loc&lt;1&gt;(r[i].min())))
*************** DomainRemoveOverlap(const Interval&lt;Dim&gt; 
*** 90,97 ****
        temp.clear();
      }
    
!   DomainList_t::iterator start = result.begin();
!   DomainList_t::iterator end = result.end();
    for ( ; start!=end ; ++start)
      {
        if (!touches(*start,r ) ) 
--- 90,97 ----
        temp.clear();
      }
    
!   typename DomainList_t::iterator start = result.begin();
!   typename DomainList_t::iterator end = result.end();
    for ( ; start!=end ; ++start)
      {
        if (!touches(*start,r ) ) 
Index: Domain/DomainTraits.Grid.h
===================================================================
RCS file: /home/pooma/Repository/r2/src/Domain/DomainTraits.Grid.h,v
retrieving revision 1.8
diff -c -p -r1.8 DomainTraits.Grid.h
*** Domain/DomainTraits.Grid.h	2000/04/28 16:29:38	1.8
--- Domain/DomainTraits.Grid.h	2001/03/28 01:59:31
*************** struct DomainTraits&lt; Grid&lt;1&gt; &gt;
*** 257,264 ****
      CTAssert(DomainTraits&lt;T2&gt;::dimensions == 1);
      CTAssert(DomainTraits&lt;T1&gt;::singleValued == 1);
      CTAssert(DomainTraits&lt;T2&gt;::singleValued == 1);
!     Element_t strideval = (endval &lt; begval ? -1 : 1);
!     dom = Storage_t(begval, strideval, (endval - begval)/strideval + 1);
    }
  
    // a specialized version of setDomain which accepts begin &amp; end values and
--- 257,265 ----
      CTAssert(DomainTraits&lt;T2&gt;::dimensions == 1);
      CTAssert(DomainTraits&lt;T1&gt;::singleValued == 1);
      CTAssert(DomainTraits&lt;T2&gt;::singleValued == 1);
!     const T2 bgval = static_cast&lt;T2&gt;(begval);
!     Element_t strideval = (endval &lt; bgval ? -1 : 1);
!     dom = Storage_t(begval, strideval, (endval - bgval)/strideval + 1);
    }
  
    // a specialized version of setDomain which accepts begin &amp; end values and
Index: Domain/DomainTraits.Interval.h
===================================================================
RCS file: /home/pooma/Repository/r2/src/Domain/DomainTraits.Interval.h,v
retrieving revision 1.24
diff -c -p -r1.24 DomainTraits.Interval.h
*** Domain/DomainTraits.Interval.h	2001/03/20 23:42:47	1.24
--- Domain/DomainTraits.Interval.h	2001/03/28 01:59:31
*************** struct DomainTraits&lt; Interval&lt;1&gt; &gt;
*** 263,269 ****
      CTAssert(DomainTraits&lt;T2&gt;::singleValued == 1);
      dom[0] = begval;
      dom[1] = static_cast&lt;Element_t&gt;(endval - begval + 1);
!     PAssert(begval &lt;= endval || dom[1] == 0);
    }
  
    // change the loop variable for this object.  For Interval, this is a no-op.
--- 263,269 ----
      CTAssert(DomainTraits&lt;T2&gt;::singleValued == 1);
      dom[0] = begval;
      dom[1] = static_cast&lt;Element_t&gt;(endval - begval + 1);
!     PAssert(static_cast&lt;T2&gt;(begval) &lt;= endval || dom[1] == 0);
    }
  
    // change the loop variable for this object.  For Interval, this is a no-op.
Index: Domain/DomainTraits.Range.h
===================================================================
RCS file: /home/pooma/Repository/r2/src/Domain/DomainTraits.Range.h,v
retrieving revision 1.21
diff -c -p -r1.21 DomainTraits.Range.h
*** Domain/DomainTraits.Range.h	2000/03/07 13:16:35	1.21
--- Domain/DomainTraits.Range.h	2001/03/28 01:59:31
*************** struct DomainTraits&lt; Range&lt;1&gt; &gt;
*** 238,244 ****
      CTAssert(DomainTraits&lt;T2&gt;::dimensions == 1);
      CTAssert(DomainTraits&lt;T1&gt;::singleValued == 1);
      CTAssert(DomainTraits&lt;T2&gt;::singleValued == 1);
!     Element_t strideval = (endval &lt; begval ? -1 : 1);
      dom[0] = begval;
      dom[1] = (endval - begval)/strideval + 1;
      dom[2] = strideval;
--- 238,244 ----
      CTAssert(DomainTraits&lt;T2&gt;::dimensions == 1);
      CTAssert(DomainTraits&lt;T1&gt;::singleValued == 1);
      CTAssert(DomainTraits&lt;T2&gt;::singleValued == 1);
!     Element_t strideval = (endval &lt; static_cast&lt;T2&gt;(begval) ? -1 : 1);
      dom[0] = begval;
      dom[1] = (endval - begval)/strideval + 1;
      dom[2] = strideval;
Index: Domain/Grid.h
===================================================================
RCS file: /home/pooma/Repository/r2/src/Domain/Grid.h,v
retrieving revision 1.10
diff -c -p -r1.10 Grid.h
*** Domain/Grid.h	2000/06/27 01:58:27	1.10
--- Domain/Grid.h	2001/03/28 01:59:32
*************** public:
*** 352,358 ****
    Grid() { }
  
    // copy constructor
!   Grid(const Grid&lt;1&gt; &amp;a) {
      NewDomain1&lt;Grid&lt;1&gt; &gt;::fill(*this, a);
    }
  
--- 352,360 ----
    Grid() { }
  
    // copy constructor
!   Grid(const Grid&lt;1&gt; &amp;a)
!     : Base_t ()
!   {
      NewDomain1&lt;Grid&lt;1&gt; &gt;::fill(*this, a);
    }
  
Index: Engine/IndexFunctionEngine.h
===================================================================
RCS file: /home/pooma/Repository/r2/src/Engine/IndexFunctionEngine.h,v
retrieving revision 1.19
diff -c -p -r1.19 IndexFunctionEngine.h
*** Engine/IndexFunctionEngine.h	2000/09/26 21:04:29	1.19
--- Engine/IndexFunctionEngine.h	2001/03/28 01:59:32
*************** public:
*** 122,128 ****
    // Construct from a domain object and an optional Functor object.
  
    Engine(const Domain_t &amp;domain, const Functor &amp;f = Functor())
!   : domain_m(domain), funct_m(f) 
    { 
      for (int d = 0; d &lt; Dim; ++d)
        firsts_m[d] = domain[d].first();
--- 122,128 ----
    // Construct from a domain object and an optional Functor object.
  
    Engine(const Domain_t &amp;domain, const Functor &amp;f = Functor())
!   : funct_m(f), domain_m(domain)
    { 
      for (int d = 0; d &lt; Dim; ++d)
        firsts_m[d] = domain[d].first();
*************** public:
*** 139,145 ****
    // Construct from another index-function-engine.
  
    Engine(const This_t &amp;model)
!   : domain_m(model.domain()), funct_m(model.functor()) 
    { 
      for (int d = 0; d &lt; Dim; ++d)
        firsts_m[d] = model.firsts_m[d];
--- 139,145 ----
    // Construct from another index-function-engine.
  
    Engine(const This_t &amp;model)
!   : funct_m(model.functor()), domain_m(model.domain())
    { 
      for (int d = 0; d &lt; Dim; ++d)
        firsts_m[d] = model.firsts_m[d];
Index: Engine/RemoteEngine.h
===================================================================
RCS file: /home/pooma/Repository/r2/src/Engine/RemoteEngine.h,v
retrieving revision 1.30
diff -c -p -r1.30 RemoteEngine.h
*** Engine/RemoteEngine.h	2000/09/20 16:22:07	1.30
--- Engine/RemoteEngine.h	2001/03/28 01:59:33
*************** private:
*** 1671,1677 ****
      
      inline GatherContextsData() {}
      inline GatherContextsData(const GatherContextsData &amp;model)
!     : contexts_m(model.contexts_m) {}
      inline ~GatherContextsData() {}
  
      //-------------------------------------------------------------------------
--- 1671,1677 ----
      
      inline GatherContextsData() {}
      inline GatherContextsData(const GatherContextsData &amp;model)
!     : RefCounted (), contexts_m(model.contexts_m) {}
      inline ~GatherContextsData() {}
  
      //-------------------------------------------------------------------------
*************** struct Evaluator&lt;RemoteMultiPatchEvaluat
*** 1890,1896 ****
      expressionApply(lhs, IntersectorTag&lt;Inter_t&gt;(inter));
      expressionApply(rhs, IntersectorTag&lt;Inter_t&gt;(inter));
    
!     Inter_t::const_iterator i = inter.begin();
      while (i != inter.end())
        {
          Evaluator&lt;RemoteSinglePatchEvaluatorTag&gt;().
--- 1890,1896 ----
      expressionApply(lhs, IntersectorTag&lt;Inter_t&gt;(inter));
      expressionApply(rhs, IntersectorTag&lt;Inter_t&gt;(inter));
    
!     typename Inter_t::const_iterator i = inter.begin();
      while (i != inter.end())
        {
          Evaluator&lt;RemoteSinglePatchEvaluatorTag&gt;().
*************** struct Reduction&lt;RemoteMultiPatchEvaluat
*** 2017,2023 ****
  
      std::vector&lt;bool&gt; present(inter.size());
      std::vector&lt;int&gt; computationalContext(inter.size());
!     Inter_t::const_iterator i = inter.begin();
      int j, k, n = 0;
      for (j = 0; j &lt; inter.size(); j++)
        {
--- 2017,2023 ----
  
      std::vector&lt;bool&gt; present(inter.size());
      std::vector&lt;int&gt; computationalContext(inter.size());
!     typename Inter_t::const_iterator i = inter.begin();
      int j, k, n = 0;
      for (j = 0; j &lt; inter.size(); j++)
        {
Index: Evaluator/Evaluator.h
===================================================================
RCS file: /home/pooma/Repository/r2/src/Evaluator/Evaluator.h,v
retrieving revision 1.56
diff -c -p -r1.56 Evaluator.h
*** Evaluator/Evaluator.h	2000/09/20 16:22:10	1.56
--- Evaluator/Evaluator.h	2001/03/28 01:59:33
*************** struct Evaluator&lt;MultiPatchEvaluatorTag&gt;
*** 201,207 ****
      expressionApply(lhs, IntersectorTag&lt;Inter_t&gt;(inter));
      expressionApply(rhs, IntersectorTag&lt;Inter_t&gt;(inter));
    
!     Inter_t::const_iterator i = inter.begin();
      while (i != inter.end())
      {
        Evaluator&lt;SinglePatchEvaluatorTag&gt;().evaluate(lhs(*i), op, rhs(*i));
--- 201,207 ----
      expressionApply(lhs, IntersectorTag&lt;Inter_t&gt;(inter));
      expressionApply(rhs, IntersectorTag&lt;Inter_t&gt;(inter));
    
!     typename Inter_t::const_iterator i = inter.begin();
      while (i != inter.end())
      {
        Evaluator&lt;SinglePatchEvaluatorTag&gt;().evaluate(lhs(*i), op, rhs(*i));
Index: Evaluator/ExpressionKernel.h
===================================================================
RCS file: /home/pooma/Repository/r2/src/Evaluator/ExpressionKernel.h,v
retrieving revision 1.44
diff -c -p -r1.44 ExpressionKernel.h
*** Evaluator/ExpressionKernel.h	2000/05/31 02:40:03	1.44
--- Evaluator/ExpressionKernel.h	2001/03/28 01:59:33
*************** private:
*** 128,134 ****
  template&lt;class LHS,class Op,class RHS,class EvalTag&gt;
  ExpressionKernel&lt;LHS,Op,RHS,EvalTag&gt;::
  ExpressionKernel(const LHS&amp; lhs,const Op&amp; op,const RHS&amp; rhs)
! #if POOMA_SMARTS_1_0
    : Pooma::Iterate_t(Pooma::scheduler(),
  		     engineFunctor(lhs, DataObjectRequest&lt;CountBlocks&gt;()) +
  		     engineFunctor(rhs, DataObjectRequest&lt;CountBlocks&gt;()),
--- 128,134 ----
  template&lt;class LHS,class Op,class RHS,class EvalTag&gt;
  ExpressionKernel&lt;LHS,Op,RHS,EvalTag&gt;::
  ExpressionKernel(const LHS&amp; lhs,const Op&amp; op,const RHS&amp; rhs)
! #ifdef POOMA_SMARTS_1_0
    : Pooma::Iterate_t(Pooma::scheduler(),
  		     engineFunctor(lhs, DataObjectRequest&lt;CountBlocks&gt;()) +
  		     engineFunctor(rhs, DataObjectRequest&lt;CountBlocks&gt;()),
Index: Evaluator/MultiArgEvaluator.h
===================================================================
RCS file: /home/pooma/Repository/r2/src/Evaluator/MultiArgEvaluator.h,v
retrieving revision 1.5
diff -c -p -r1.5 MultiArgEvaluator.h
*** Evaluator/MultiArgEvaluator.h	2001/03/04 06:46:48	1.5
--- Evaluator/MultiArgEvaluator.h	2001/03/28 01:59:33
*************** public:
*** 248,254 ****
  
      applyMultiArg(multiArg, inter, info.writers());
   
!     Inter_t::const_iterator i = inter.begin();
      while (i != inter.end())
      {
        INode&lt;Dim&gt; inode = info.extendDomain(*i);
--- 248,254 ----
  
      applyMultiArg(multiArg, inter, info.writers());
   
!     typename Inter_t::const_iterator i = inter.begin();
      while (i != inter.end())
      {
        INode&lt;Dim&gt; inode = info.extendDomain(*i);
*************** struct MultiArgEvaluator&lt;RemoteMultiPatc
*** 349,355 ****
  
      applyMultiArg(multiArg, inter, info.writers());
   
!     Inter_t::const_iterator i = inter.begin();
      while (i != inter.end())
      {
        MultiArgEvaluator&lt;RemoteSinglePatchEvaluatorTag&gt;().
--- 349,355 ----
  
      applyMultiArg(multiArg, inter, info.writers());
   
!     typename Inter_t::const_iterator i = inter.begin();
      while (i != inter.end())
      {
        MultiArgEvaluator&lt;RemoteSinglePatchEvaluatorTag&gt;().
Index: Evaluator/Reduction.h
===================================================================
RCS file: /home/pooma/Repository/r2/src/Evaluator/Reduction.h,v
retrieving revision 1.9
diff -c -p -r1.9 Reduction.h
*** Evaluator/Reduction.h	2000/09/20 16:22:10	1.9
--- Evaluator/Reduction.h	2001/03/28 01:59:33
*************** struct Reduction&lt;MultiPatchEvaluatorTag&gt;
*** 222,228 ****
  
      Pooma::scheduler().beginGeneration();
      
!     Inter_t::const_iterator i = inter.begin();
      int j = 0;
      while (j &lt; n)
        {
--- 222,228 ----
  
      Pooma::scheduler().beginGeneration();
      
!     typename Inter_t::const_iterator i = inter.begin();
      int j = 0;
      while (j &lt; n)
        {
Index: Field/Field.cpp
===================================================================
RCS file: /home/pooma/Repository/r2/src/Field/Field.cpp,v
retrieving revision 1.8
diff -c -p -r1.8 Field.cpp
*** Field/Field.cpp	2000/07/20 15:39:27	1.8
--- Field/Field.cpp	2001/03/28 01:59:34
*************** assign(const Field&lt;Geom, T, EngineTag&gt; &amp;
*** 114,120 ****
    // if the rhs is an expression.
    // This will allow subsequent functors to actually reach the leaves.
  
!   CreateLeaf&lt;ViewedRHS_t&gt;::Leaf_t rhsExpr = 
      CreateLeaf&lt;ViewedRHS_t&gt;::make(vrhs);
  
    // Optionally, check conformance.
--- 114,120 ----
    // if the rhs is an expression.
    // This will allow subsequent functors to actually reach the leaves.
  
!   typename CreateLeaf&lt;ViewedRHS_t&gt;::Leaf_t rhsExpr = 
      CreateLeaf&lt;ViewedRHS_t&gt;::make(vrhs);
  
    // Optionally, check conformance.
*************** assign(const Field&lt;Geom, T, EngineTag&gt; &amp;
*** 175,181 ****
    // if the rhs is an expression.
    // This will allow subsequent functors to actually reach the leaves.
  
!   CreateLeaf&lt;ViewedRHS_t&gt;::Leaf_t rhsExpr = 
      CreateLeaf&lt;ViewedRHS_t&gt;::make(vrhs);
  
    // Optionally, check conformance.
--- 175,181 ----
    // if the rhs is an expression.
    // This will allow subsequent functors to actually reach the leaves.
  
!   typename CreateLeaf&lt;ViewedRHS_t&gt;::Leaf_t rhsExpr = 
      CreateLeaf&lt;ViewedRHS_t&gt;::make(vrhs);
  
    // Optionally, check conformance.
*************** assign(const Field&lt;Geom, T, EngineTag&gt; &amp;
*** 240,246 ****
    // if the rhs is an expression.
    // This will allow subsequent functors to actually reach the leaves.
  
!   CreateLeaf&lt;ViewedRHS_t&gt;::Leaf_t rhsExpr = 
      CreateLeaf&lt;ViewedRHS_t&gt;::make(vrhs);
  
    // Optionally, check conformance.
--- 240,246 ----
    // if the rhs is an expression.
    // This will allow subsequent functors to actually reach the leaves.
  
!   typename CreateLeaf&lt;ViewedRHS_t&gt;::Leaf_t rhsExpr = 
      CreateLeaf&lt;ViewedRHS_t&gt;::make(vrhs);
  
    // Optionally, check conformance.
*************** assign(const Array&lt;Dim, T, EngineTag&gt; &amp;l
*** 309,315 ****
    // if the rhs is an expression.
    // This will allow subsequent functors to actually reach the leaves.
  
!   CreateLeaf&lt;ViewedRHS_t&gt;::Leaf_t rhsExpr = 
      CreateLeaf&lt;ViewedRHS_t&gt;::make(vrhs);
  
    // Optionally, check conformance.
--- 309,315 ----
    // if the rhs is an expression.
    // This will allow subsequent functors to actually reach the leaves.
  
!   typename CreateLeaf&lt;ViewedRHS_t&gt;::Leaf_t rhsExpr = 
      CreateLeaf&lt;ViewedRHS_t&gt;::make(vrhs);
  
    // Optionally, check conformance.
*************** assign(const Array&lt;Dim, T, EngineTag&gt; &amp;l
*** 366,372 ****
    // if the rhs is an expression.
    // This will allow subsequent functors to actually reach the leaves.
  
!   CreateLeaf&lt;ViewedRHS_t&gt;::Leaf_t rhsExpr = 
      CreateLeaf&lt;ViewedRHS_t&gt;::make(vrhs);
  
    // Optionally, check conformance.
--- 366,372 ----
    // if the rhs is an expression.
    // This will allow subsequent functors to actually reach the leaves.
  
!   typename CreateLeaf&lt;ViewedRHS_t&gt;::Leaf_t rhsExpr = 
      CreateLeaf&lt;ViewedRHS_t&gt;::make(vrhs);
  
    // Optionally, check conformance.
Index: Field/Field.h
===================================================================
RCS file: /home/pooma/Repository/r2/src/Field/Field.h,v
retrieving revision 1.68
diff -c -p -r1.68 Field.h
*** Field/Field.h	2000/09/20 16:22:13	1.68
--- Field/Field.h	2001/03/28 01:59:34
*************** public:
*** 1074,1089 ****
    
    //---------------------------------------------------------------------------
    // View-creation operations yielding Arrays.
!    
    typename ArrayView&lt;This_t, Domain_t&gt;::Type_t
!   inline array() const
    {
      typedef ArrayView&lt;This_t, Domain_t&gt; Ret_t;
      return Ret_t::make(*this, physicalDomain());
    };
     
    typename ArrayView&lt;This_t, Domain_t&gt;::Type_t
!   inline arrayAll() const
    {
      typedef ArrayView&lt;This_t, Domain_t&gt; Ret_t;
      return Ret_t::make(*this, totalDomain());
--- 1074,1091 ----
    
    //---------------------------------------------------------------------------
    // View-creation operations yielding Arrays.
! 
!   inline
    typename ArrayView&lt;This_t, Domain_t&gt;::Type_t
!   array() const
    {
      typedef ArrayView&lt;This_t, Domain_t&gt; Ret_t;
      return Ret_t::make(*this, physicalDomain());
    };
     
+   inline
    typename ArrayView&lt;This_t, Domain_t&gt;::Type_t
!   arrayAll() const
    {
      typedef ArrayView&lt;This_t, Domain_t&gt; Ret_t;
      return Ret_t::make(*this, totalDomain());
Index: Field/PrintField.h
===================================================================
RCS file: /home/pooma/Repository/r2/src/Field/PrintField.h,v
retrieving revision 1.2
diff -c -p -r1.2 PrintField.h
*** Field/PrintField.h	2000/03/07 13:17:08	1.2
--- Field/PrintField.h	2001/03/28 01:59:35
*************** public:
*** 188,194 ****
  	     bool scientific = false, int spacing = 1)
      : domainwidth_m(domainWidth), datawidth_m(dataWidth), 
        dataprecision_m(dataPrecision), carreturn_m(carReturn),
!       scientific_m(scientific), spacing_m(spacing)
      {
        PAssert(domainwidth_m &gt; 0);
        PAssert(datawidth_m &gt; 0);
--- 188,194 ----
  	     bool scientific = false, int spacing = 1)
      : domainwidth_m(domainWidth), datawidth_m(dataWidth), 
        dataprecision_m(dataPrecision), carreturn_m(carReturn),
!       spacing_m(spacing), scientific_m(scientific)
      {
        PAssert(domainwidth_m &gt; 0);
        PAssert(datawidth_m &gt; 0);
Index: Layout/DynamicEvents.h
===================================================================
RCS file: /home/pooma/Repository/r2/src/Layout/DynamicEvents.h,v
retrieving revision 1.11
diff -c -p -r1.11 DynamicEvents.h
*** Layout/DynamicEvents.h	2000/03/07 13:17:34	1.11
--- Layout/DynamicEvents.h	2001/03/28 01:59:35
*************** public:
*** 249,256 ****
    // is &lt; 0, the create should be done in the last local patch.
  
    CreateEvent(CreateSize_t num, PatchID_t p)
!     : amount_m(num), patch_m(p),
!       ObserverEvent(DynamicEvents::create)
      {
      }
  
--- 249,256 ----
    // is &lt; 0, the create should be done in the last local patch.
  
    CreateEvent(CreateSize_t num, PatchID_t p)
!     : ObserverEvent(DynamicEvents::create),
!       amount_m(num), patch_m(p)
      {
      }
  
*************** public:
*** 330,337 ****
  
    template&lt;class D&gt;
    DestroyEvent(const D &amp;d, PatchID_t p, int method)
!     : domain_m(d), patch_m(p), method_m(method),
!       ObserverEvent(DynamicEventType&lt;Dom&gt;::destroyCode)
      {
        CTAssert(DynamicEventType&lt;Dom&gt;::dimensions == 1);
      }
--- 330,337 ----
  
    template&lt;class D&gt;
    DestroyEvent(const D &amp;d, PatchID_t p, int method)
!     : ObserverEvent(DynamicEventType&lt;Dom&gt;::destroyCode),
!       domain_m(d), patch_m(p), method_m(method)
      {
        CTAssert(DynamicEventType&lt;Dom&gt;::dimensions == 1);
      }
*************** public:
*** 421,436 ****
    // copy to.
  
    CopyEvent(const Dom &amp;d, PatchID_t fromp, PatchID_t top)
!     : domain_m(d), from_m(fromp), to_m(top),
!       ObserverEvent(DynamicEventType&lt;Dom&gt;::copyCode)
      {
        CTAssert(DynamicEventType&lt;Dom&gt;::dimensions == 1);
      }
  
    template&lt;class D&gt;
    CopyEvent(const D &amp;d, PatchID_t fromp, PatchID_t top)
!     : domain_m(d), from_m(fromp), to_m(top),
!       ObserverEvent(DynamicEventType&lt;Dom&gt;::copyCode)
      {
        CTAssert(DynamicEventType&lt;Dom&gt;::dimensions == 1);
      }
--- 421,436 ----
    // copy to.
  
    CopyEvent(const Dom &amp;d, PatchID_t fromp, PatchID_t top)
!     : ObserverEvent(DynamicEventType&lt;Dom&gt;::copyCode),
!       domain_m(d), from_m(fromp), to_m(top)
      {
        CTAssert(DynamicEventType&lt;Dom&gt;::dimensions == 1);
      }
  
    template&lt;class D&gt;
    CopyEvent(const D &amp;d, PatchID_t fromp, PatchID_t top)
!     : ObserverEvent(DynamicEventType&lt;Dom&gt;::copyCode),
!       domain_m(d), from_m(fromp), to_m(top)
      {
        CTAssert(DynamicEventType&lt;Dom&gt;::dimensions == 1);
      }
*************** public:
*** 534,541 ****
  
    CopyPatchEvent(const Domain_t &amp;domlists, const IDList_t &amp;fromlist,
  		 PatchID_t top, bool create)
!     : lists_m(domlists), from_m(fromlist), to_m(top), create_m(create),
!       ObserverEvent(DynamicEvents::copyPatchList)
      {
      }
  
--- 534,541 ----
  
    CopyPatchEvent(const Domain_t &amp;domlists, const IDList_t &amp;fromlist,
  		 PatchID_t top, bool create)
!     : ObserverEvent(DynamicEvents::copyPatchList),
!       lists_m(domlists), from_m(fromlist), to_m(top), create_m(create)
      {
      }
  
Index: Layout/GlobalIDDataBase.h
===================================================================
RCS file: /home/pooma/Repository/r2/src/Layout/GlobalIDDataBase.h,v
retrieving revision 1.13
diff -c -p -r1.13 GlobalIDDataBase.h
*** Layout/GlobalIDDataBase.h	2000/07/12 19:17:12	1.13
--- Layout/GlobalIDDataBase.h	2001/03/28 01:59:35
*************** private:
*** 193,199 ****
    struct Pack
    {
      Pack()
!       : layoutID_m(0), globalID_m(0), context_m(0), parent_m(0)
      { }
  
      inline
--- 193,199 ----
    struct Pack
    {
      Pack()
!       : layoutID_m(0), context_m(0), globalID_m(0), parent_m(0)
      { }
  
      inline
Index: Layout/GridLayout.cpp
===================================================================
RCS file: /home/pooma/Repository/r2/src/Layout/GridLayout.cpp,v
retrieving revision 1.82
diff -c -p -r1.82 GridLayout.cpp
*** Layout/GridLayout.cpp	2000/06/27 01:58:29	1.82
--- Layout/GridLayout.cpp	2001/03/28 01:59:35
*************** inline void GridLayoutData&lt;Dim&gt;::initial
*** 178,185 ****
    
    gpar.partition(innerdomain_m, all_m, cmap);
  
!   List_t::iterator start = all_m.begin();
!   List_t::iterator end   = all_m.end();
    
    for ( ; start!=end ;++start )
      {
--- 178,185 ----
    
    gpar.partition(innerdomain_m, all_m, cmap);
  
!   typename List_t::iterator start = all_m.begin();
!   typename List_t::iterator end   = all_m.end();
    
    for ( ; start!=end ;++start )
      {
*************** void GridLayoutData&lt;Dim&gt;::initialize(con
*** 283,290 ****
    // Iterate through the complete list of nodes provided and assign to the
    // appropriate subcategories.
  
!   List_t::iterator start = all_m.begin();
!   List_t::iterator end   = all_m.end();
    
    for ( ; start!=end ;++start )
      {
--- 283,290 ----
    // Iterate through the complete list of nodes provided and assign to the
    // appropriate subcategories.
  
!   typename List_t::iterator start = all_m.begin();
!   typename List_t::iterator end   = all_m.end();
    
    for ( ; start!=end ;++start )
      {
Index: Layout/SparseTileLayout.cpp
===================================================================
RCS file: /home/pooma/Repository/r2/src/Layout/SparseTileLayout.cpp,v
retrieving revision 1.25
diff -c -p -r1.25 SparseTileLayout.cpp
*** Layout/SparseTileLayout.cpp	2000/10/04 04:14:26	1.25
--- Layout/SparseTileLayout.cpp	2001/03/28 01:59:36
*************** SparseTileLayoutData&lt;Dim&gt;::~SparseTileLa
*** 170,177 ****
  template&lt;int Dim&gt;
  void SparseTileLayoutData&lt;Dim&gt;::syncPatch()
  {
!   List_t::iterator start = all_m.begin();
!   List_t::iterator end = all_m.end();
    for ( ; start != end ; ++start)
      if ( (*start)-&gt;context() == Pooma::context()
  	 ||(*start)-&gt;context() == -1 )
--- 170,177 ----
  template&lt;int Dim&gt;
  void SparseTileLayoutData&lt;Dim&gt;::syncPatch()
  {
!   typename List_t::iterator start = all_m.begin();
!   typename List_t::iterator end = all_m.end();
    for ( ; start != end ; ++start)
      if ( (*start)-&gt;context() == Pooma::context()
  	 ||(*start)-&gt;context() == -1 )
*************** void SparseTileLayoutData&lt;Dim&gt;::calcMaps
*** 202,209 ****
  
    map_m.initialize(domain_m);
  
!   List_t::const_iterator start = all_m.begin();
!   List_t::const_iterator end   = all_m.end();
    int i=0;
  
    for ( ; start != end ; ++start, ++i )
--- 202,209 ----
  
    map_m.initialize(domain_m);
  
!   typename List_t::const_iterator start = all_m.begin();
!   typename List_t::const_iterator end   = all_m.end();
    int i=0;
  
    for ( ; start != end ; ++start, ++i )
*************** void SparseTileLayoutData&lt;Dim&gt;::calcAllo
*** 229,236 ****
  
    mapAloc_m.initialize(domain_m);
   
!   List_t::const_iterator start = all_m.begin();
!   List_t::const_iterator end   = all_m.end();
  
    int i=0;
  
--- 229,236 ----
  
    mapAloc_m.initialize(domain_m);
   
!   typename List_t::const_iterator start = all_m.begin();
!   typename List_t::const_iterator end   = all_m.end();
  
    int i=0;
  
*************** void SparseTileLayoutData&lt;Dim&gt;::calcGCFi
*** 421,428 ****
    TouchList_t tlist;
  
    // first we do the internal overlap regions
!   List_t::iterator start = all_m.begin();
!   List_t::iterator end = all_m.end();
  
    for ( ; start!=end; ++start)
      {
--- 421,428 ----
    TouchList_t tlist;
  
    // first we do the internal overlap regions
!   typename List_t::iterator start = all_m.begin();
!   typename List_t::iterator end = all_m.end();
  
    for ( ; start!=end; ++start)
      {
*************** void SparseTileLayoutData&lt;Dim&gt;::calcGCFi
*** 432,439 ****
  
        // now pack the tlist into the GCFillInfo object
        // The if test is to remove the self-touch entry
!       TouchList_t::iterator GCLstart = tlist.begin();
!       TouchList_t::iterator GCLend = tlist.end();
        
        for( ; GCLstart != GCLend ;++GCLstart)
  	{
--- 432,439 ----
  
        // now pack the tlist into the GCFillInfo object
        // The if test is to remove the self-touch entry
!       typename TouchList_t::iterator GCLstart = tlist.begin();
!       typename TouchList_t::iterator GCLend = tlist.end();
        
        for( ; GCLstart != GCLend ;++GCLstart)
  	{
*************** void SparseTileLayoutData&lt;Dim&gt;::calcGCFi
*** 508,514 ****
        
        for ( ; gst!=gen ; ++gst )
  	{
! 	  std::vector&lt;Domain_t&gt;::iterator ts = temp2.begin();
  	  for ( ; ts != temp2.end() ; ++ts )
  	    {
  	      temp3 = DomainRemoveOverlap(*ts,gst-&gt;domain_m);
--- 508,514 ----
        
        for ( ; gst!=gen ; ++gst )
  	{
! 	  typename std::vector&lt;Domain_t&gt;::iterator ts = temp2.begin();
  	  for ( ; ts != temp2.end() ; ++ts )
  	    {
  	      temp3 = DomainRemoveOverlap(*ts,gst-&gt;domain_m);
*************** void SparseTileLayoutData&lt;Dim&gt;::calcGCFi
*** 518,524 ****
  	  temp4.clear();
  	}
        
!       std::vector&lt;Domain_t&gt;::iterator ts = temp2.begin();
        for( ; ts != temp2.end(); ++ts)
  	temp.push_back(GCBorderFillInfo(*ts, bst-&gt;patchID() ));
      }
--- 518,524 ----
  	  temp4.clear();
  	}
        
!       typename std::vector&lt;Domain_t&gt;::iterator ts = temp2.begin();
        for( ; ts != temp2.end(); ++ts)
  	temp.push_back(GCBorderFillInfo(*ts, bst-&gt;patchID() ));
      }
*************** int SparseTileLayoutData&lt;Dim&gt;::touches(c
*** 697,704 ****
  
    typedef Node&lt;OutDomain_t,Domain_t&gt; OutNode_t;
    // Ack!!! OutDomain_t is a Range, but DomainMap::touches requires an Interval.
!   DomainMap&lt;Interval&lt;Dim&gt;,pidx_t&gt;::Touch_t dmti = map_m.touch(Interval&lt;Dim&gt;(d));
!   DomainMap&lt;Interval&lt;Dim&gt;,pidx_t&gt;::touch_iterator a;
  
    int count = 0;
  
--- 697,705 ----
  
    typedef Node&lt;OutDomain_t,Domain_t&gt; OutNode_t;
    // Ack!!! OutDomain_t is a Range, but DomainMap::touches requires an Interval.
!   typename DomainMap&lt;Interval&lt;Dim&gt;,pidx_t&gt;::Touch_t dmti =
!     map_m.touch(Interval&lt;Dim&gt;(d));
!   typename DomainMap&lt;Interval&lt;Dim&gt;,pidx_t&gt;::touch_iterator a;
  
    int count = 0;
  
*************** int SparseTileLayoutData&lt;Dim&gt;::touchesAl
*** 752,759 ****
  
    typedef Node&lt;OutDomain_t,Domain_t&gt; OutNode_t;
  
!   DomainMap&lt;Interval&lt;Dim&gt;,pidx_t&gt;::Touch_t dmti = map_m.touch(d);
!   DomainMap&lt;Interval&lt;Dim&gt;,pidx_t&gt;::touch_iterator a;
  
    int count = 0;
  
--- 753,760 ----
  
    typedef Node&lt;OutDomain_t,Domain_t&gt; OutNode_t;
  
!   typename DomainMap&lt;Interval&lt;Dim&gt;,pidx_t&gt;::Touch_t dmti = map_m.touch(d);
!   typename DomainMap&lt;Interval&lt;Dim&gt;,pidx_t&gt;::touch_iterator a;
  
    int count = 0;
  
*************** void SparseTileLayoutData&lt;Dim&gt;::print(Ou
*** 791,798 ****
    o&lt;&lt; &quot; domain_m &quot; &lt;&lt; domain_m &lt;&lt;std::endl;
    o&lt;&lt; &quot; innerdomain_m &quot; &lt;&lt; innerdomain_m &lt;&lt;std::endl;
    o&lt;&lt; &quot; all_m : &quot; &lt;&lt; std::endl;
!   List_t::const_iterator start = all_m.begin();
!   List_t::const_iterator end   = all_m.end();
    for ( ; start!=end ; ++start)
      o&lt;&lt; (*start)-&gt;globalID()&lt;&lt;&quot; &quot;&lt;&lt;
        (*start)-&gt;domain()&lt;&lt;&quot; &quot;&lt;&lt; 
--- 792,799 ----
    o&lt;&lt; &quot; domain_m &quot; &lt;&lt; domain_m &lt;&lt;std::endl;
    o&lt;&lt; &quot; innerdomain_m &quot; &lt;&lt; innerdomain_m &lt;&lt;std::endl;
    o&lt;&lt; &quot; all_m : &quot; &lt;&lt; std::endl;
!   typename List_t::const_iterator start = all_m.begin();
!   typename List_t::const_iterator end   = all_m.end();
    for ( ; start!=end ; ++start)
      o&lt;&lt; (*start)-&gt;globalID()&lt;&lt;&quot; &quot;&lt;&lt;
        (*start)-&gt;domain()&lt;&lt;&quot; &quot;&lt;&lt; 
Index: Layout/UniformGridLayout.cpp
===================================================================
RCS file: /home/pooma/Repository/r2/src/Layout/UniformGridLayout.cpp,v
retrieving revision 1.34
diff -c -p -r1.34 UniformGridLayout.cpp
*** Layout/UniformGridLayout.cpp	2000/08/15 17:30:31	1.34
--- Layout/UniformGridLayout.cpp	2001/03/28 01:59:36
*************** void UniformGridLayoutData&lt;Dim&gt;::partiti
*** 155,162 ****
  
    // fill local and remote lists
  
!   List_t::const_iterator start = all_m.begin();
!   List_t::const_iterator end   = all_m.end();
    
    for ( ; start!=end ; ++start)
      {
--- 155,162 ----
  
    // fill local and remote lists
  
!   typename List_t::const_iterator start = all_m.begin();
!   typename List_t::const_iterator end   = all_m.end();
    
    for ( ; start!=end ; ++start)
      {
*************** void UniformGridLayoutData&lt;Dim&gt;::initial
*** 258,265 ****
    // Iterate through the complete list of nodes provided and assign to the
    // appropriate subcategories.
  
!   List_t::iterator start = all_m.begin();
!   List_t::iterator end   = all_m.end();
    
    for ( ; start!=end ;++start )
      {
--- 258,265 ----
    // Iterate through the complete list of nodes provided and assign to the
    // appropriate subcategories.
  
!   typename List_t::iterator start = all_m.begin();
!   typename List_t::iterator end   = all_m.end();
    
    for ( ; start!=end ;++start )
      {
Index: Partition/BisectionMapper.h
===================================================================
RCS file: /home/pooma/Repository/r2/src/Partition/BisectionMapper.h,v
retrieving revision 1.3
diff -c -p -r1.3 BisectionMapper.h
*** Partition/BisectionMapper.h	2000/06/08 23:07:59	1.3
--- Partition/BisectionMapper.h	2001/03/28 01:59:36
*************** public:
*** 86,94 ****
      while ( bvec.size() &lt; ncontexts )
        {
  	int s = 0;
! 	std::list&lt;Domain_t&gt;::iterator bstart = bvec.begin();
! 	std::list&lt;Domain_t&gt;::iterator bend = bvec.end();
! 	std::list&lt;Domain_t&gt;::iterator bpatch;
  	// find the largest patch.
  	for ( ; bstart != bend ; ++bstart)
  	  {
--- 86,94 ----
      while ( bvec.size() &lt; ncontexts )
        {
  	int s = 0;
! 	typename std::list&lt;Domain_t&gt;::iterator bstart = bvec.begin();
! 	typename std::list&lt;Domain_t&gt;::iterator bend = bvec.end();
! 	typename std::list&lt;Domain_t&gt;::iterator bpatch;
  	// find the largest patch.
  	for ( ; bstart != bend ; ++bstart)
  	  {
*************** public:
*** 133,140 ****
      for ( int i=1; i&lt;Dim; ++i)
        strides[i] = strides[i-1]*blocks_m[i-1].first();
  
!     std::list&lt;Domain_t&gt;::iterator start = bvec.begin();
!     std::list&lt;Domain_t&gt;::iterator end = bvec.end();
      int pcontext = 0;
      for ( ; start != end ; ++start)
        {
--- 133,140 ----
      for ( int i=1; i&lt;Dim; ++i)
        strides[i] = strides[i-1]*blocks_m[i-1].first();
  
!     typename std::list&lt;Domain_t&gt;::iterator start = bvec.begin();
!     typename std::list&lt;Domain_t&gt;::iterator end = bvec.end();
      int pcontext = 0;
      for ( ; start != end ; ++start)
        {
Index: Partition/UniformMapper.h
===================================================================
RCS file: /home/pooma/Repository/r2/src/Partition/UniformMapper.h,v
retrieving revision 1.3
diff -c -p -r1.3 UniformMapper.h
*** Partition/UniformMapper.h	2000/06/07 23:36:46	1.3
--- Partition/UniformMapper.h	2001/03/28 01:59:36
*************** public:
*** 86,91 ****
--- 86,93 ----
  
    void map(const List_t&amp;) const;
  
+   virtual ~UniformMapper () {}
+ 
    // member data
  private:
  
Index: Pooma/Pooma.h
===================================================================
RCS file: /home/pooma/Repository/r2/src/Pooma/Pooma.h,v
retrieving revision 1.30
diff -c -p -r1.30 Pooma.h
*** Pooma/Pooma.h	2000/06/08 22:16:34	1.30
--- Pooma/Pooma.h	2001/03/28 01:59:36
*************** inline void poll()
*** 528,534 ****
  #if POOMA_CHEETAH
    controller()-&gt;poll();
  #endif
! #if POOMA_SMARTS_SCHEDULER_SERIALASYNC
    Smarts::SystemContext::runSomething();
  #endif
  
--- 528,534 ----
  #if POOMA_CHEETAH
    controller()-&gt;poll();
  #endif
! #ifdef POOMA_SMARTS_SCHEDULER_SERIALASYNC
    Smarts::SystemContext::runSomething();
  #endif
  
Index: Pooma/PoomaOperatorTags.h
===================================================================
RCS file: /home/pooma/Repository/r2/src/Pooma/PoomaOperatorTags.h,v
retrieving revision 1.16
diff -c -p -r1.16 PoomaOperatorTags.h
*** Pooma/PoomaOperatorTags.h	2000/08/08 17:32:59	1.16
--- Pooma/PoomaOperatorTags.h	2001/03/28 01:59:37
*************** struct FnMin
*** 241,247 ****
    operator()(const T1 &amp;a, const T2 &amp;b) const
    {
      return 
! #if POOMA_BRAIN_DAMAGED_MICROSOFT_LIB
          (a&lt;b?a:b)
  #else
          std::min(a, b)
--- 241,247 ----
    operator()(const T1 &amp;a, const T2 &amp;b) const
    {
      return 
! #ifdef POOMA_BRAIN_DAMAGED_MICROSOFT_LIB
          (a&lt;b?a:b)
  #else
          std::min(a, b)
*************** struct FnMax
*** 258,264 ****
    operator()(const T1 &amp;a, const T2 &amp;b) const
    {
      return 
! #if POOMA_BRAIN_DAMAGED_MICROSOFT_LIB
          (a&gt;b?a:b)
  #else
          std::max(a, b)
--- 258,264 ----
    operator()(const T1 &amp;a, const T2 &amp;b) const
    {
      return 
! #ifdef POOMA_BRAIN_DAMAGED_MICROSOFT_LIB
          (a&gt;b?a:b)
  #else
          std::max(a, b)
*************** struct FnMinAssign
*** 371,377 ****
    operator()(const T1 &amp;a, const T2 &amp;b) const
    {
      
! #if POOMA_BRAIN_DAMAGED_MICROSOFT_LIB
          const_cast&lt;T1 &amp;&gt;(a) = (a&lt;b?a:b)
  #else
          const_cast&lt;T1 &amp;&gt;(a) = std::min(a, b)
--- 371,377 ----
    operator()(const T1 &amp;a, const T2 &amp;b) const
    {
      
! #ifdef POOMA_BRAIN_DAMAGED_MICROSOFT_LIB
          const_cast&lt;T1 &amp;&gt;(a) = (a&lt;b?a:b)
  #else
          const_cast&lt;T1 &amp;&gt;(a) = std::min(a, b)
*************** struct FnMaxAssign
*** 394,400 ****
    operator()(const T1 &amp;a, const T2 &amp;b) const
    {
      
! #if POOMA_BRAIN_DAMAGED_MICROSOFT_LIB
          const_cast&lt;T1 &amp;&gt;(a) = (a&gt;b?a:b)
  #else
          const_cast&lt;T1 &amp;&gt;(a) = std::max(a, b)
--- 394,400 ----
    operator()(const T1 &amp;a, const T2 &amp;b) const
    {
      
! #ifdef POOMA_BRAIN_DAMAGED_MICROSOFT_LIB
          const_cast&lt;T1 &amp;&gt;(a) = (a&gt;b?a:b)
  #else
          const_cast&lt;T1 &amp;&gt;(a) = std::max(a, b)
Index: Threads/PoomaCSem.h
===================================================================
RCS file: /home/pooma/Repository/r2/src/Threads/PoomaCSem.h,v
retrieving revision 1.8
diff -c -p -r1.8 PoomaCSem.h
*** Threads/PoomaCSem.h	2000/06/08 22:16:42	1.8
--- Threads/PoomaCSem.h	2001/03/28 01:59:37
*************** private:
*** 181,187 ****
  
  }
  
! #elif POOMA_SMARTS_SCHEDULER_SERIALASYNC
  
  #include &quot;Threads/IterateSchedulers/SerialAsync.h&quot;
  
--- 181,187 ----
  
  }
  
! #elif defined(POOMA_SMARTS_SCHEDULER_SERIALASYNC)
  
  #include &quot;Threads/IterateSchedulers/SerialAsync.h&quot;
  
Index: Threads/Scheduler.h
===================================================================
RCS file: /home/pooma/Repository/r2/src/Threads/Scheduler.h,v
retrieving revision 1.7
diff -c -p -r1.7 Scheduler.h
*** Threads/Scheduler.h	2000/05/05 07:44:53	1.7
--- Threads/Scheduler.h	2001/03/28 01:59:37
*************** CTAssert(YOU_HAVE_NOT_SELECTED_A_SCHEDUL
*** 89,95 ****
  
  #else
  
! # if POOMA_SMARTS_SCHEDULER_SERIALASYNC
  
  #  include &quot;Threads/IterateSchedulers/SerialAsync.h&quot;
  
--- 89,95 ----
  
  #else
  
! # ifdef POOMA_SMARTS_SCHEDULER_SERIALASYNC
  
  #  include &quot;Threads/IterateSchedulers/SerialAsync.h&quot;
  
Index: Utilities/Observer.h
===================================================================
RCS file: /home/pooma/Repository/r2/src/Utilities/Observer.h,v
retrieving revision 1.10
diff -c -p -r1.10 Observer.h
*** Utilities/Observer.h	2000/03/07 13:18:25	1.10
--- Utilities/Observer.h	2001/03/28 01:59:37
*************** public:
*** 182,188 ****
  
    // The destructor is not made virtual, since we should not ever need
    // to delete an object via its SingleObserver base class.
!   ~SingleObserver() { }
  
  
    //============================================================
--- 182,188 ----
  
    // The destructor is not made virtual, since we should not ever need
    // to delete an object via its SingleObserver base class.
!   virtual ~SingleObserver() { }
  
  
    //============================================================
Index: Utilities/RefCountedBlockPtr.h
===================================================================
RCS file: /home/pooma/Repository/r2/src/Utilities/RefCountedBlockPtr.h,v
retrieving revision 1.57
diff -c -p -r1.57 RefCountedBlockPtr.h
*** Utilities/RefCountedBlockPtr.h	2001/03/21 00:56:09	1.57
--- Utilities/RefCountedBlockPtr.h	2001/03/28 01:59:37
*************** public: 
*** 128,134 ****
  
    explicit 
    RefBlockController(size_t size)
!     : dealloc_m(false), pBegin_m(0), pEnd_m(0), pEndOfStorage_m(0)
    {
      // Allocate memory, and set pointers to beginning and ending.  This
      // also sets the dealloc_m flag to true.
--- 128,134 ----
  
    explicit 
    RefBlockController(size_t size)
!     : pBegin_m(0), pEnd_m(0), pEndOfStorage_m(0), dealloc_m(false)
    {
      // Allocate memory, and set pointers to beginning and ending.  This
      // also sets the dealloc_m flag to true.
*************** public:
*** 534,540 ****
  
    typedef std::random_access_iterator_tag  iterator_category;
    typedef T           value_type;
! #if POOMA_NONSTANDARD_ITERATOR
    typedef ptrdiff_t   distance_type;
  #else
    typedef ptrdiff_t   difference_type;
--- 534,540 ----
  
    typedef std::random_access_iterator_tag  iterator_category;
    typedef T           value_type;
! #if defined (POOMA_NONSTANDARD_ITERATOR) &amp;&amp; POOMA_NONSTANDARD_ITERATOR
    typedef ptrdiff_t   distance_type;
  #else
    typedef ptrdiff_t   difference_type;
*************** public:
*** 583,590 ****
    // Initialize a block of a given size, optionally with a model.
  
    inline explicit RefCountedBlockPtr(size_t size)
!     : blockControllerPtr_m(new Controller(size)),
!       offset_m(0)
    { }
  
    inline RefCountedBlockPtr(size_t size, const T &amp; model)
--- 583,590 ----
    // Initialize a block of a given size, optionally with a model.
  
    inline explicit RefCountedBlockPtr(size_t size)
!     : offset_m(0),
!       blockControllerPtr_m(new Controller(size))
    { }
  
    inline RefCountedBlockPtr(size_t size, const T &amp; model)
*************** public:
*** 620,627 ****
    // Copy constructor
  
    inline RefCountedBlockPtr(const This_t &amp; model)
!     : blockControllerPtr_m(model.blockControllerPtr_m),
!       offset_m(model.offset_m)
    { }
  
    // Copy constructor from a RefCountedBlockPtr of the opposite bounds
--- 620,627 ----
    // Copy constructor
  
    inline RefCountedBlockPtr(const This_t &amp; model)
!     : offset_m(model.offset_m),
!       blockControllerPtr_m(model.blockControllerPtr_m)
    { }
  
    // Copy constructor from a RefCountedBlockPtr of the opposite bounds
Index: Utilities/algorithms.h
===================================================================
RCS file: /home/pooma/Repository/r2/src/Utilities/algorithms.h,v
retrieving revision 1.10
diff -c -p -r1.10 algorithms.h
*** Utilities/algorithms.h	2000/07/14 17:46:37	1.10
--- Utilities/algorithms.h	2001/03/28 01:59:38
*************** template &lt;class It, class It2&gt;
*** 138,144 ****
  inline It2 copy_special(It begin, It end, It2 dest, IsConcrete&lt;true&gt;)
  {
    typedef std::iterator_traits&lt;It&gt;                DataTraits_t;
! #if POOMA_NONSTANDARD_ITERATOR
    typedef typename DataTraits_t::distance_type    Diff_t;
  #else
    typedef typename DataTraits_t::difference_type  Diff_t;
--- 138,144 ----
  inline It2 copy_special(It begin, It end, It2 dest, IsConcrete&lt;true&gt;)
  {
    typedef std::iterator_traits&lt;It&gt;                DataTraits_t;
! #ifdef POOMA_NONSTANDARD_ITERATOR
    typedef typename DataTraits_t::distance_type    Diff_t;
  #else
    typedef typename DataTraits_t::difference_type  Diff_t;
*************** inline It2 copy_special(It begin, It end
*** 205,218 ****
  
  template &lt;class DataIterator, class KillIterator&gt;
  inline
! #if POOMA_NONSTANDARD_ITERATOR
  typename std::iterator_traits&lt;DataIterator&gt;::distance_type
  #else
  typename std::iterator_traits&lt;DataIterator&gt;::difference_type
  #endif
  delete_backfill(DataIterator data_begin, DataIterator data_end, 
    const KillIterator kill_begin, const KillIterator kill_end,
! #if POOMA_NONSTANDARD_ITERATOR
    typename std::iterator_traits&lt;DataIterator&gt;::distance_type offset = 0)
  #else
    typename std::iterator_traits&lt;DataIterator&gt;::difference_type offset = 0)
--- 205,218 ----
  
  template &lt;class DataIterator, class KillIterator&gt;
  inline
! #ifdef POOMA_NONSTANDARD_ITERATOR
  typename std::iterator_traits&lt;DataIterator&gt;::distance_type
  #else
  typename std::iterator_traits&lt;DataIterator&gt;::difference_type
  #endif
  delete_backfill(DataIterator data_begin, DataIterator data_end, 
    const KillIterator kill_begin, const KillIterator kill_end,
! #ifdef POOMA_NONSTANDARD_ITERATOR
    typename std::iterator_traits&lt;DataIterator&gt;::distance_type offset = 0)
  #else
    typename std::iterator_traits&lt;DataIterator&gt;::difference_type offset = 0)
*************** delete_backfill(DataIterator data_begin,
*** 224,230 ****
    // No data has to be moved if we're destroying values that are at
    // the end of the sequence. Thus we look for these first.
  
! #if POOMA_NONSTANDARD_ITERATOR
    std::reverse_iterator&lt;KillIterator, const int&gt; rk_pos(kill_end);
    std::reverse_iterator&lt;KillIterator, const int&gt; rk_end(kill_begin);
  #else
--- 224,230 ----
    // No data has to be moved if we're destroying values that are at
    // the end of the sequence. Thus we look for these first.
  
! #ifdef POOMA_NONSTANDARD_ITERATOR
    std::reverse_iterator&lt;KillIterator, const int&gt; rk_pos(kill_end);
    std::reverse_iterator&lt;KillIterator, const int&gt; rk_end(kill_begin);
  #else
*************** delete_backfill(DataIterator data_begin,
*** 233,239 ****
  #endif
    
    typedef std::iterator_traits&lt;DataIterator&gt;     DataTraits_t;
! #if POOMA_NONSTANDARD_ITERATOR
    typedef typename DataTraits_t::distance_type   Diff_t;
  #else
    typedef typename DataTraits_t::difference_type Diff_t;
--- 233,239 ----
  #endif
    
    typedef std::iterator_traits&lt;DataIterator&gt;     DataTraits_t;
! #ifdef POOMA_NONSTANDARD_ITERATOR
    typedef typename DataTraits_t::distance_type   Diff_t;
  #else
    typedef typename DataTraits_t::difference_type Diff_t;
*************** delete_backfill(DataIterator data_begin,
*** 295,308 ****
  
  template &lt;class DataIterator, class KillIterator&gt;
  inline
! #if POOMA_NONSTANDARD_ITERATOR
  typename std::iterator_traits&lt;DataIterator&gt;::distance_type
  #else
  typename std::iterator_traits&lt;DataIterator&gt;::difference_type
  #endif
  delete_shiftup(DataIterator data_begin, DataIterator data_end,
    KillIterator kill_begin, KillIterator kill_end,
! #if POOMA_NONSTANDARD_ITERATOR
    typename std::iterator_traits&lt;DataIterator&gt;::distance_type offset = 0)
  #else
    typename std::iterator_traits&lt;DataIterator&gt;::difference_type offset = 0)
--- 295,308 ----
  
  template &lt;class DataIterator, class KillIterator&gt;
  inline
! #ifdef POOMA_NONSTANDARD_ITERATOR
  typename std::iterator_traits&lt;DataIterator&gt;::distance_type
  #else
  typename std::iterator_traits&lt;DataIterator&gt;::difference_type
  #endif
  delete_shiftup(DataIterator data_begin, DataIterator data_end,
    KillIterator kill_begin, KillIterator kill_end,
! #ifdef POOMA_NONSTANDARD_ITERATOR
    typename std::iterator_traits&lt;DataIterator&gt;::distance_type offset = 0)
  #else
    typename std::iterator_traits&lt;DataIterator&gt;::difference_type offset = 0)
*************** delete_shiftup(DataIterator data_begin, 
*** 313,319 ****
    
    typedef std::iterator_traits&lt;DataIterator&gt;          DataTraits_t;
    typedef typename DataTraits_t::value_type           Value_t;
! #if POOMA_NONSTANDARD_ITERATOR
    typedef typename DataTraits_t::distance_type        Diff_t;
  #else
    typedef typename DataTraits_t::difference_type      Diff_t;
--- 313,319 ----
    
    typedef std::iterator_traits&lt;DataIterator&gt;          DataTraits_t;
    typedef typename DataTraits_t::value_type           Value_t;
! #ifdef POOMA_NONSTANDARD_ITERATOR
    typedef typename DataTraits_t::distance_type        Diff_t;
  #else
    typedef typename DataTraits_t::difference_type      Diff_t;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000088.html">Patch: FieldStencil Typo in tut-08.html
</A></li>
	<LI>Next message: <A HREF="000092.html">[pooma-dev] RFA: Field-Related Pooma Code Changes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#91">[ date ]</a>
              <a href="thread.html#91">[ thread ]</a>
              <a href="subject.html#91">[ subject ]</a>
              <a href="author.html#91">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://sourcerytools.com/cgi-bin/mailman/listinfo/pooma-dev">More information about the pooma-dev
mailing list</a><br>
</body></html>
