<tt>
&lt;html&gt;<br>
&lt;font&nbsp;size=3&gt;Richard:&lt;br&gt;&lt;br&gt;<br>
&nbsp;From&nbsp;your&nbsp;message:&lt;br&gt;<br>
&lt;blockquote&nbsp;type=cite&nbsp;class=cite&nbsp;cite&gt;Unfortunately&nbsp;my&nbsp;tests&nbsp;show&nbsp;its<br>
better,&nbsp;but&nbsp;still&nbsp;worse&nbsp;than&nbsp;with&nbsp;gcc.&lt;br&gt;<br>
Your&nbsp;test&nbsp;is&nbsp;1d,&nbsp;try&nbsp;3d&nbsp;and&nbsp;it&nbsp;starts&nbsp;to&nbsp;suck.&nbsp;Inlining&nbsp;is&nbsp;still&nbsp;<br>
the&lt;br&gt;<br>
culprit,&nbsp;as&nbsp;is&nbsp;CSE&nbsp;with&nbsp;f.i.&nbsp;Loc&lt;n&gt;&nbsp;(where&nbsp;n&gt;1)<br>
objects.&lt;/blockquote&gt;&lt;br&gt;<br>
Actually,&nbsp;my&nbsp;test&nbsp;is&nbsp;2D.&nbsp;&nbsp;Do&nbsp;you&nbsp;have&nbsp;a&nbsp;3D&nbsp;test&nbsp;you&nbsp;can&nbsp;send?&nbsp;<br>
Were&nbsp;you&nbsp;comparing&nbsp;icc<br>
&lt;/font&gt;&lt;font&nbsp;size=3&nbsp;color=&quot;#FF0000&quot;&gt;8.0&lt;/font&gt;&lt;font&nbsp;size=3&gt;?&nbsp;&nbsp;I'd<br>
like&nbsp;to&nbsp;try&nbsp;your&nbsp;test&nbsp;on&nbsp;my&nbsp;machine&nbsp;with&nbsp;KCC&nbsp;and&nbsp;icc&nbsp;8.0&lt;br&gt;&lt;br&gt;<br>
Thanks,&lt;br&gt;<br>
-Paul&lt;br&gt;&lt;br&gt;<br>
At&nbsp;09:36&nbsp;PM&nbsp;6/3/2003&nbsp;+0200,&nbsp;Richard&nbsp;Guenther&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;type=cite&nbsp;class=cite&nbsp;cite&gt;On&nbsp;Tue,&nbsp;3&nbsp;Jun&nbsp;2003,&nbsp;Paul&nbsp;A.&nbsp;Renard<br>
wrote:&lt;br&gt;&lt;br&gt;<br>
&gt;&nbsp;Back&nbsp;in&nbsp;February,&nbsp;2003,&nbsp;I&nbsp;reported&nbsp;that&nbsp;Intel's&nbsp;icc&nbsp;7.0&nbsp;compiler&nbsp;was<br>
producing&nbsp;code&lt;br&gt;<br>
&gt;&nbsp;using&nbsp;Pooma&nbsp;constructs&nbsp;that&nbsp;was&nbsp;2X-4X&nbsp;slower&nbsp;than&nbsp;KCC.&nbsp;&nbsp;Since<br>
then,&nbsp;the&nbsp;folks&nbsp;at&lt;br&gt;<br>
&gt;&nbsp;Intel&nbsp;have&nbsp;worked&nbsp;hard,&nbsp;and&nbsp;for&nbsp;my&nbsp;little&nbsp;test&nbsp;(reproduced&nbsp;at&nbsp;the<br>
end&nbsp;of&nbsp;this&lt;br&gt;<br>
&gt;&nbsp;message),&nbsp;the&nbsp;icc&nbsp;8.0&nbsp;Beta&nbsp;compiler&nbsp;(l_cc_b_8.0.023)&nbsp;is&nbsp;now<br>
producing&nbsp;&nbsp;code&nbsp;slightly&lt;br&gt;<br>
&gt;&nbsp;faster&nbsp;(maybe&nbsp;5-10%)&nbsp;than&nbsp;KCC,&nbsp;and&nbsp;certainly&nbsp;comparable&nbsp;to<br>
hand-written&nbsp;loops.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;The&nbsp;only&nbsp;optimization&nbsp;items&nbsp;for&nbsp;compiling&nbsp;were:&lt;br&gt;<br>
&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
-O3&nbsp;-DNOPAssert&nbsp;-DNOCTAssert&nbsp;-tpp7&nbsp;-xW&lt;br&gt;<br>
&gt;&nbsp;but&nbsp;the&nbsp;last&nbsp;two&nbsp;are&nbsp;particular&nbsp;to&nbsp;Pentium&nbsp;4&nbsp;vectorization,&nbsp;which<br>
plays&nbsp;a&nbsp;very&nbsp;small&lt;br&gt;<br>
&gt;&nbsp;part&nbsp;in&nbsp;the&nbsp;tests&nbsp;I&nbsp;did,&nbsp;and&nbsp;which&nbsp;probably&nbsp;caused&nbsp;the<br>
&quot;slightly&nbsp;faster&quot;,&nbsp;rather&lt;br&gt;<br>
&gt;&nbsp;than&nbsp;&quot;just&nbsp;about&nbsp;the&nbsp;same&nbsp;speed&quot;.&lt;br&gt;<br>
&gt;&lt;br&gt;<br>
&gt;&nbsp;So,&nbsp;icc&nbsp;8.0&nbsp;seems&nbsp;to&nbsp;be&nbsp;a&nbsp;useful&nbsp;choice&nbsp;in&nbsp;compilers&nbsp;(for&nbsp;Linux&nbsp;and<br>
Windows).&lt;br&gt;&lt;br&gt;<br>
Unfortunately&nbsp;my&nbsp;tests&nbsp;show&nbsp;its&nbsp;better,&nbsp;but&nbsp;still&nbsp;worse&nbsp;than&nbsp;with<br>
gcc.&lt;br&gt;<br>
Your&nbsp;test&nbsp;is&nbsp;1d,&nbsp;try&nbsp;3d&nbsp;and&nbsp;it&nbsp;starts&nbsp;to&nbsp;suck.&nbsp;Inlining&nbsp;is&nbsp;still&nbsp;<br>
the&lt;br&gt;<br>
culprit,&nbsp;as&nbsp;is&nbsp;CSE&nbsp;with&nbsp;f.i.&nbsp;Loc&lt;n&gt;&nbsp;(where&nbsp;n&gt;1)<br>
objects.&lt;br&gt;&lt;br&gt;<br>
With&nbsp;the&nbsp;following&nbsp;gcc3.3&nbsp;patch&nbsp;applied&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;http://www.tat.physik.uni-tuebingen.de/~rguenth/gcc/leafify-3.3-2&quot;&nbsp;eudora=&quot;autourl&quot;&gt;http://www.tat.physik.uni-tuebingen.de/~rguenth/gcc/leafify-3.3-2&lt;/a&gt;&lt;br&gt;<br>
or&nbsp;leafify-3.4-2&nbsp;for&nbsp;mainline,&nbsp;I&nbsp;get&nbsp;very&nbsp;good&nbsp;results&nbsp;with<br>
gcc3.3.&lt;br&gt;&lt;br&gt;<br>
The&nbsp;only&nbsp;parts&nbsp;to&nbsp;change&nbsp;inside&nbsp;POOMA&nbsp;are&nbsp;the&nbsp;expression&nbsp;Kernels&nbsp;in&lt;br&gt;<br>
src/Evaluator,&nbsp;where&nbsp;you&nbsp;put&nbsp;__attribute__((leafify))&nbsp;on&nbsp;the&nbsp;kernel&lt;br&gt;<br>
functions&nbsp;(can&nbsp;extract&nbsp;a&nbsp;patch,&nbsp;if&nbsp;you&nbsp;like).&lt;br&gt;&lt;br&gt;<br>
Richard.&lt;/font&gt;&lt;/blockquote&gt;&lt;/html&gt;<br>
<br>
<br>

</tt>
