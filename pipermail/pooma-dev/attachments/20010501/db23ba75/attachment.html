<tt>
&lt;!DOCTYPE&nbsp;HTML&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;HTML&nbsp;3.2//EN&quot;&gt;<br>
&lt;HTML&gt;<br>
&lt;HEAD&gt;<br>
&lt;META&nbsp;HTTP-EQUIV=&quot;Content-Type&quot;&nbsp;CONTENT=&quot;text/html;&nbsp;charset=iso-8859-1&quot;&gt;<br>
&lt;META&nbsp;NAME=&quot;Generator&quot;&nbsp;CONTENT=&quot;MS&nbsp;Exchange&nbsp;Server&nbsp;version&nbsp;5.5.2650.12&quot;&gt;<br>
&lt;TITLE&gt;signed&nbsp;==&nbsp;signed&nbsp;-&nbsp;sizeof(...),&nbsp;and&nbsp;other&nbsp;warnings...&nbsp;(non-POOMA&nbsp;C++&nbsp;questions)&lt;/TITLE&gt;<br>
&lt;/HEAD&gt;<br>
&lt;BODY&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;Hey&nbsp;Mark.&nbsp;Just&nbsp;a&nbsp;couple&nbsp;of&nbsp;C++&nbsp;(non-Pooma&nbsp;related)&nbsp;questions.&nbsp;I&nbsp;was&nbsp;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;somewhat&nbsp;surprised&nbsp;that&nbsp;-Wall&nbsp;flagged&nbsp;the&nbsp;following&nbsp;code&nbsp;with&nbsp;a&nbsp;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;warning:&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;void&nbsp;bar()&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;{&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;a,&nbsp;b;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;&nbsp;&nbsp;(void)(a&nbsp;==&nbsp;b&nbsp;-&nbsp;sizeof(int));&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;}&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;Compiling&nbsp;this&nbsp;gives:&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;$&nbsp;g++&nbsp;-Wall&nbsp;-c&nbsp;foo.cpp&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;foo.cpp:&nbsp;In&nbsp;function&nbsp;`void&nbsp;bar()':&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;foo.cpp:4:&nbsp;warning:&nbsp;comparison&nbsp;between&nbsp;signed&nbsp;and&nbsp;unsigned&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;Does&nbsp;this&nbsp;mean&nbsp;operator-(int,unsigned&nbsp;int)&nbsp;returns&nbsp;unsigned?&nbsp;That&nbsp;seem&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;bizarre&nbsp;to&nbsp;say&nbsp;the&nbsp;least.&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;Also,&nbsp;on&nbsp;the&nbsp;subject&nbsp;of&nbsp;warnings,&nbsp;awhile&nbsp;back&nbsp;I&nbsp;wrote&nbsp;about&nbsp;some&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;destructor&nbsp;warnings&nbsp;and&nbsp;you&nbsp;replied:&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;&nbsp;&nbsp;James&gt;&nbsp;What&nbsp;it&nbsp;says&nbsp;is&nbsp;true&nbsp;and&nbsp;is&nbsp;by&nbsp;design.&nbsp;This&nbsp;particular&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;&nbsp;&nbsp;James&gt;&nbsp;class&nbsp;(and&nbsp;many&nbsp;like&nbsp;it)&nbsp;is&nbsp;reference&nbsp;counted&nbsp;and&nbsp;should&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;&nbsp;&nbsp;James&gt;&nbsp;never&nbsp;be&nbsp;deleted&nbsp;by&nbsp;an&nbsp;explicit&nbsp;call&nbsp;to&nbsp;delete.&nbsp;Rather,&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;&nbsp;&nbsp;James&gt;&nbsp;when&nbsp;all&nbsp;the&nbsp;references&nbsp;are&nbsp;released,&nbsp;the&nbsp;release&nbsp;function&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;&nbsp;&nbsp;James&gt;&nbsp;calls&nbsp;&quot;delete&nbsp;this&quot;.&nbsp;This&nbsp;seems&nbsp;like&nbsp;a&nbsp;common&nbsp;enough&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;&nbsp;&nbsp;James&gt;&nbsp;idiom.&nbsp;Any&nbsp;idea&nbsp;why&nbsp;there&nbsp;is&nbsp;a&nbsp;warning?&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;Mark&gt;&nbsp;Normally,&nbsp;that&nbsp;warning&nbsp;fires&nbsp;on&nbsp;code&nbsp;like:&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;Mark&gt;&nbsp;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;Mark&gt;&nbsp;&nbsp;&nbsp;class&nbsp;C&nbsp;{&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;Mark&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;~C&nbsp;();&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;Mark&gt;&nbsp;&nbsp;&nbsp;};&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;Mark&gt;&nbsp;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;Mark&gt;&nbsp;Such&nbsp;a&nbsp;class&nbsp;isn't&nbsp;very&nbsp;useful,&nbsp;since&nbsp;you&nbsp;can't&nbsp;create&nbsp;an&nbsp;object&nbsp;of&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;Mark&gt;&nbsp;this&nbsp;type.&nbsp;&nbsp;(Why?&nbsp;&nbsp;Because&nbsp;when&nbsp;you&nbsp;construct&nbsp;an&nbsp;object,&nbsp;the&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;Mark&gt;&nbsp;destructor&nbsp;has&nbsp;to&nbsp;be&nbsp;accessible&nbsp;at&nbsp;the&nbsp;point&nbsp;of&nbsp;construction;&nbsp;so&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;Mark&gt;&nbsp;sayeth&nbsp;the&nbsp;standard.)&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;GCC&nbsp;flags&nbsp;&quot;C&nbsp;c;&quot;&nbsp;as&nbsp;an&nbsp;error,&nbsp;but&nbsp;is&nbsp;happy&nbsp;with&nbsp;&quot;C&nbsp;*pc&nbsp;=&nbsp;new&nbsp;C;&quot;.&nbsp;This&nbsp;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;is&nbsp;good&nbsp;or&nbsp;my&nbsp;code&nbsp;below&nbsp;wouldn't&nbsp;work,&nbsp;but&nbsp;I'm&nbsp;not&nbsp;sure&nbsp;I&nbsp;see&nbsp;the&nbsp;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;difference&nbsp;(for&nbsp;this&nbsp;simple&nbsp;case).&nbsp;&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;Mark&gt;&nbsp;However,&nbsp;the&nbsp;case&nbsp;you&nbsp;bring&nbsp;up&nbsp;(an&nbsp;overloaded&nbsp;operator&nbsp;`delete')&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;Mark&gt;&nbsp;should&nbsp;probably&nbsp;be&nbsp;an&nbsp;exception&nbsp;to&nbsp;the&nbsp;warning.&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;Actually,&nbsp;I'm&nbsp;not&nbsp;overloading&nbsp;delete.&nbsp;Here's&nbsp;a&nbsp;short&nbsp;example&nbsp;code:&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;&nbsp;&nbsp;class&nbsp;IA&nbsp;{&nbsp;public:&nbsp;virtual&nbsp;int&nbsp;release()&nbsp;=&nbsp;0;&nbsp;};&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;&nbsp;&nbsp;class&nbsp;A&nbsp;:&nbsp;public&nbsp;IA&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;&nbsp;&nbsp;{&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;&nbsp;&nbsp;public:&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A()&nbsp;:&nbsp;count_m(0)&nbsp;{&nbsp;}&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;release()&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--count_m;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(count_m&nbsp;==&nbsp;0)&nbsp;{&nbsp;delete&nbsp;this;&nbsp;return&nbsp;0;&nbsp;}&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;count_m;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;&nbsp;&nbsp;private:&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;~A()&nbsp;{&nbsp;}&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;count_m;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;&nbsp;&nbsp;};&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;When&nbsp;I&nbsp;compile&nbsp;this:&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;$&nbsp;g++&nbsp;-Wall&nbsp;-c&nbsp;bar.cpp&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;bar.cpp:17:&nbsp;warning:&nbsp;\&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;`class&nbsp;A'&nbsp;only&nbsp;defines&nbsp;a&nbsp;private&nbsp;destructor&nbsp;and&nbsp;has&nbsp;no&nbsp;friends&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;bar.cpp:17:&nbsp;warning:&nbsp;\&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;`class&nbsp;A'&nbsp;has&nbsp;virtual&nbsp;functions&nbsp;but&nbsp;non-virtual&nbsp;destructor&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;You&nbsp;are&nbsp;right&nbsp;in&nbsp;that&nbsp;I&nbsp;can't&nbsp;do:&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;int&nbsp;main()&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;{&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;&nbsp;&nbsp;A&nbsp;a;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;0;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;}&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;But&nbsp;that&nbsp;is&nbsp;actually&nbsp;one&nbsp;of&nbsp;the&nbsp;reasons&nbsp;that&nbsp;I&nbsp;want&nbsp;to&nbsp;have&nbsp;the&nbsp;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;destructor&nbsp;private&nbsp;-&nbsp;I&nbsp;want&nbsp;to&nbsp;disallow&nbsp;this.&nbsp;You&nbsp;can&nbsp;however&nbsp;do:&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;int&nbsp;main()&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;{&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;&nbsp;&nbsp;IA&nbsp;*pa&nbsp;=&nbsp;new&nbsp;A;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;&nbsp;&nbsp;pa-&gt;release();&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;0;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;}&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;This&nbsp;compiles&nbsp;and&nbsp;works&nbsp;just&nbsp;fine.&nbsp;The&nbsp;proper&nbsp;destructor&nbsp;is&nbsp;called&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;since&nbsp;it&nbsp;is&nbsp;called&nbsp;through&nbsp;the&nbsp;virtual&nbsp;function&nbsp;release().&nbsp;But&nbsp;I&nbsp;still&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;get&nbsp;the&nbsp;warning.&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;Jim&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;/BODY&gt;<br>
&lt;/HTML&gt;
</tt>
