<tt>
&lt;!DOCTYPE&nbsp;HTML&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;HTML&nbsp;3.2//EN&quot;&gt;<br>
&lt;HTML&gt;<br>
&lt;HEAD&gt;<br>
&lt;META&nbsp;HTTP-EQUIV=&quot;Content-Type&quot;&nbsp;CONTENT=&quot;text/html;&nbsp;charset=us-ascii&quot;&gt;<br>
&lt;META&nbsp;NAME=&quot;Generator&quot;&nbsp;CONTENT=&quot;MS&nbsp;Exchange&nbsp;Server&nbsp;version&nbsp;5.5.2653.12&quot;&gt;<br>
&lt;TITLE&gt;RE:&nbsp;[pooma-dev]&nbsp;[PATCH]&nbsp;Clean&nbsp;up&nbsp;Tensor.h&lt;/TITLE&gt;<br>
&lt;/HEAD&gt;<br>
&lt;BODY&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;Hi&nbsp;Richard,&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;It's&nbsp;been&nbsp;too&nbsp;long&nbsp;for&nbsp;me&nbsp;to&nbsp;comment&nbsp;on&nbsp;the&nbsp;details&nbsp;here.&nbsp;There&nbsp;were&nbsp;places&nbsp;in&nbsp;the&nbsp;code&nbsp;where&nbsp;template&nbsp;meta-programs&nbsp;were&nbsp;used&nbsp;over&nbsp;loops&nbsp;in&nbsp;order&nbsp;to&nbsp;get&nbsp;performance,&nbsp;and&nbsp;some&nbsp;developers&nbsp;(myself&nbsp;included&nbsp;-&nbsp;it's&nbsp;a&nbsp;fun&nbsp;thing&nbsp;to&nbsp;play&nbsp;with&nbsp;but&nbsp;easy&nbsp;to&nbsp;overuse)&nbsp;used&nbsp;these&nbsp;in&nbsp;places&nbsp;where&nbsp;loops&nbsp;would&nbsp;have&nbsp;sufficed&nbsp;(assuming&nbsp;the&nbsp;upper&nbsp;limits&nbsp;were&nbsp;small&nbsp;and&nbsp;were&nbsp;compile-time&nbsp;constants,&nbsp;so&nbsp;that&nbsp;they&nbsp;could&nbsp;be&nbsp;completely&nbsp;unrolled).&nbsp;There&nbsp;was&nbsp;a&nbsp;wave&nbsp;of&nbsp;simplifications&nbsp;(between&nbsp;2.2&nbsp;and&nbsp;2.3&nbsp;I&nbsp;think)&nbsp;that&nbsp;cleaned&nbsp;most&nbsp;of&nbsp;these&nbsp;out&nbsp;as&nbsp;the&nbsp;meta-programs&nbsp;were&nbsp;adding&nbsp;a&nbsp;lot&nbsp;to&nbsp;compile&nbsp;time.&nbsp;If&nbsp;this&nbsp;is&nbsp;the&nbsp;nature&nbsp;of&nbsp;your&nbsp;changes,&nbsp;and&nbsp;if&nbsp;the&nbsp;changed&nbsp;code&nbsp;still&nbsp;generates&nbsp;good&nbsp;assembly-code,&nbsp;then&nbsp;the&nbsp;Tensor&nbsp;stuff&nbsp;was&nbsp;probably&nbsp;missed&nbsp;during&nbsp;this&nbsp;cleanup.&lt;/FONT&gt;&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;It&nbsp;does&nbsp;look&nbsp;like&nbsp;your&nbsp;changes&nbsp;make&nbsp;use&nbsp;of&nbsp;template&nbsp;template&nbsp;parameters.&nbsp;This&nbsp;will&nbsp;hurt&nbsp;portability.&nbsp;I&nbsp;don't&nbsp;think&nbsp;those&nbsp;were&nbsp;supported&nbsp;by&nbsp;anyone&nbsp;when&nbsp;this&nbsp;code&nbsp;was&nbsp;written,&nbsp;and&nbsp;I'm&nbsp;not&nbsp;sure&nbsp;how&nbsp;widely&nbsp;they&nbsp;are&nbsp;supported&nbsp;now.&nbsp;Probably&nbsp;the&nbsp;high-performance&nbsp;compilers&nbsp;can&nbsp;handle&nbsp;them,&nbsp;but&nbsp;at&nbsp;least&nbsp;in&nbsp;the&nbsp;past&nbsp;a&nbsp;number&nbsp;of&nbsp;people&nbsp;would&nbsp;do&nbsp;development&nbsp;with&nbsp;Metrowerks&nbsp;and&nbsp;VC++&nbsp;since&nbsp;they&nbsp;were/are&nbsp;very&nbsp;productive&nbsp;environments,&nbsp;and&nbsp;they've&nbsp;tended&nbsp;to&nbsp;lag&nbsp;on&nbsp;details&nbsp;such&nbsp;as&nbsp;these.&nbsp;I'd&nbsp;probably&nbsp;avoid&nbsp;them&nbsp;for&nbsp;this&nbsp;reason.&nbsp;&lt;/FONT&gt;&lt;/P&gt;<br>
<br>
&lt;P&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;FONT&nbsp;SIZE=2&gt;Jim&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
&lt;BR&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;-----Original&nbsp;Message-----&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;From:&nbsp;Richard&nbsp;Guenther&nbsp;[&lt;A&nbsp;HREF=&quot;mailto:rguenth@tat.physik.uni-tuebingen.de&quot;&gt;mailto:rguenth@tat.physik.uni-tuebingen.de&lt;/A&gt;]&nbsp;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;Sent:&nbsp;Monday,&nbsp;November&nbsp;03,&nbsp;2003&nbsp;5:36&nbsp;AM&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;To:&nbsp;pooma-dev@pooma.codesourcery.com&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;Cc:&nbsp;Jeffrey&nbsp;D.&nbsp;Oldham&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;Subject:&nbsp;[pooma-dev]&nbsp;[PATCH]&nbsp;Clean&nbsp;up&nbsp;Tensor.h&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;Hi!&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;I'm&nbsp;staring&nbsp;a&nbsp;lot&nbsp;on&nbsp;Tensor.h&nbsp;and&nbsp;TensorElement.h&nbsp;from&nbsp;time&nbsp;to&nbsp;time.&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;And&nbsp;I&nbsp;think&nbsp;its&nbsp;very&nbsp;complicated&nbsp;and&nbsp;undocumented.&nbsp;Does&nbsp;anyone&nbsp;remember&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;what&nbsp;exactly&nbsp;the&nbsp;TensorAssign&lt;&gt;&nbsp;template&nbsp;is&nbsp;doing?&nbsp;And&nbsp;why&nbsp;it&nbsp;was&nbsp;done&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;this&nbsp;way&nbsp;instead&nbsp;of&nbsp;simple&nbsp;loops?&nbsp;Are&nbsp;the&nbsp;T1&nbsp;and&nbsp;T2&nbsp;argument&nbsp;templates&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;really&nbsp;independend,&nbsp;or&nbsp;are&nbsp;they&nbsp;supposed&nbsp;to&nbsp;have&nbsp;the&nbsp;same&nbsp;tensor&nbsp;structure&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;(Antisymmentric,&nbsp;Symmetric,&nbsp;etc.)&nbsp;and&nbsp;the&nbsp;same&nbsp;base&nbsp;type?&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;Anyway,&nbsp;here's&nbsp;some&nbsp;first&nbsp;cleanup&nbsp;to&nbsp;reduce&nbsp;the&nbsp;code&nbsp;one&nbsp;has&nbsp;to&nbsp;look&nbsp;at&nbsp;;)&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;Tested&nbsp;on&nbsp;x86&nbsp;using&nbsp;gcc3.3&nbsp;and&nbsp;Intel&nbsp;icpc.&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;Ok?&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;Richard.&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
&lt;BR&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;2003Nov03&nbsp;&nbsp;Richard&nbsp;Guenther&nbsp;&lt;richard.guenther@uni-tuebingen.de&gt;&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;FONT&nbsp;SIZE=2&gt;*&nbsp;src/Tiny/Tensor.h:&nbsp;remove&nbsp;default&nbsp;implementations&nbsp;of&lt;/FONT&gt;<br>
&lt;BR&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;FONT&nbsp;SIZE=2&gt;(Antisymmentric|Symmetric|Diagonal)TensorAssign&lt;&gt;.&lt;/FONT&gt;<br>
&lt;BR&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;FONT&nbsp;SIZE=2&gt;Use&nbsp;template&nbsp;template&nbsp;parameter&nbsp;specialization&lt;/FONT&gt;<br>
&lt;BR&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;FONT&nbsp;SIZE=2&gt;to&nbsp;get&nbsp;rid&nbsp;of&nbsp;Tensor&lt;&gt;&nbsp;and&nbsp;TensorEngine&lt;&gt;&nbsp;specialization&lt;/FONT&gt;<br>
&lt;BR&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;FONT&nbsp;SIZE=2&gt;duplicates.&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;=====&nbsp;Tensor.h&nbsp;1.8&nbsp;vs&nbsp;edited&nbsp;=====&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;---&nbsp;1.8/r2/src/Tiny/Tensor.h&nbsp;&nbsp;&nbsp;&nbsp;Mon&nbsp;Nov&nbsp;&nbsp;3&nbsp;11:03:34&nbsp;2003&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;+++&nbsp;edited/Tensor.h&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Mon&nbsp;Nov&nbsp;&nbsp;3&nbsp;13:02:25&nbsp;2003&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;@@&nbsp;-871,64&nbsp;+871,36&nbsp;@@&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;struct&nbsp;AntisymmetricTensorAssign;&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;//&nbsp;1D&nbsp;partial&nbsp;specialization:&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-template&lt;class&nbsp;T,&nbsp;class&nbsp;T2,&nbsp;class&nbsp;Op,&nbsp;int&nbsp;B1,&nbsp;int&nbsp;L1,&nbsp;int&nbsp;B2,&nbsp;int&nbsp;L2&gt;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-struct&nbsp;AntisymmetricTensorAssign&lt;TensorEngine&lt;1,T,Antisymmetric&gt;,&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;T2,Op,B1,L1,B2,L2&gt;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-{&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;static&nbsp;void&nbsp;apply(TensorEngine&lt;1,T,Antisymmetric&gt;&nbsp;&amp;x,&nbsp;const&nbsp;T2&nbsp;&amp;y,&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Op&nbsp;op=Op())&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;{&nbsp;}&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-};&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-template&lt;class&nbsp;T,&nbsp;class&nbsp;T2,&nbsp;class&nbsp;Op,&nbsp;int&nbsp;B1,&nbsp;int&nbsp;L1,&nbsp;int&nbsp;B2,&nbsp;int&nbsp;L2&gt;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-struct&nbsp;AntisymmetricTensorAssign&lt;Tensor&lt;1,T,Antisymmetric&gt;,&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;T2,Op,B1,L1,B2,L2&gt;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;+template&lt;template&nbsp;&lt;int,&nbsp;class,&nbsp;class&gt;&nbsp;class&nbsp;T1,&nbsp;class&nbsp;T,&nbsp;class&nbsp;T2,&nbsp;class&nbsp;Op,&nbsp;int&nbsp;B1,&nbsp;int&nbsp;L1,&nbsp;int&nbsp;B2,&nbsp;int&nbsp;L2&gt;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;+struct&nbsp;AntisymmetricTensorAssign&lt;T1&lt;1,T,Antisymmetric&gt;,T2,Op,B1,L1,B2,L2&gt;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;{&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;static&nbsp;void&nbsp;apply(Tensor&lt;1,T,Antisymmetric&gt;&nbsp;&amp;x,&nbsp;const&nbsp;T2&nbsp;&amp;y,&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;+&nbsp;&nbsp;static&nbsp;void&nbsp;apply(T1&lt;1,T,Antisymmetric&gt;&nbsp;&amp;x,&nbsp;const&nbsp;T2&nbsp;&amp;y,&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Op&nbsp;op=Op())&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;&nbsp;{&nbsp;}&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;};&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;+&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;//&nbsp;2D&nbsp;partial&nbsp;specialization:&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-template&lt;class&nbsp;T,&nbsp;class&nbsp;T2,&nbsp;class&nbsp;Op,&nbsp;int&nbsp;B1,&nbsp;int&nbsp;L1,&nbsp;int&nbsp;B2,&nbsp;int&nbsp;L2&gt;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-struct&nbsp;AntisymmetricTensorAssign&lt;TensorEngine&lt;2,T,Antisymmetric&gt;,&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;+template&lt;template&nbsp;&lt;int,&nbsp;class,&nbsp;class&gt;&nbsp;class&nbsp;T1,&nbsp;class&nbsp;T,&nbsp;class&nbsp;T2,&nbsp;class&nbsp;Op,&nbsp;int&nbsp;B1,&nbsp;int&nbsp;L1,&nbsp;int&nbsp;B2,&nbsp;int&nbsp;L2&gt;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;+struct&nbsp;AntisymmetricTensorAssign&lt;T1&lt;2,T,Antisymmetric&gt;,&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;&nbsp;T2,Op,B1,L1,B2,L2&gt;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;{&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;static&nbsp;void&nbsp;apply(TensorEngine&lt;2,T,Antisymmetric&gt;&nbsp;&amp;x,&nbsp;const&nbsp;T2&nbsp;&amp;y,&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;+&nbsp;&nbsp;static&nbsp;void&nbsp;apply(T1&lt;2,T,Antisymmetric&gt;&nbsp;&amp;x,&nbsp;const&nbsp;T2&nbsp;&amp;y,&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Op&nbsp;op=Op())&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;&nbsp;{&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;&nbsp;&nbsp;TensorAssign&lt;TensorEngine&lt;2,T,Antisymmetric&gt;,T2,Op,1,1,0,1&gt;::apply(x,y,op);&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;}&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-};&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-template&lt;class&nbsp;T,&nbsp;class&nbsp;T2,&nbsp;class&nbsp;Op,&nbsp;int&nbsp;B1,&nbsp;int&nbsp;L1,&nbsp;int&nbsp;B2,&nbsp;int&nbsp;L2&gt;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-struct&nbsp;AntisymmetricTensorAssign&lt;Tensor&lt;2,T,Antisymmetric&gt;,&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;T2,Op,B1,L1,B2,L2&gt;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-{&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;static&nbsp;void&nbsp;apply(Tensor&lt;2,T,Antisymmetric&gt;&nbsp;&amp;x,&nbsp;const&nbsp;T2&nbsp;&amp;y,&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Op&nbsp;op=Op())&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;{&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;&nbsp;&nbsp;TensorAssign&lt;Tensor&lt;2,T,Antisymmetric&gt;,T2,Op,1,1,0,1&gt;::apply(x,y,op);&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;+&nbsp;&nbsp;&nbsp;&nbsp;TensorAssign&lt;T1&lt;2,T,Antisymmetric&gt;,T2,Op,1,1,0,1&gt;::apply(x,y,op);&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;&nbsp;}&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;};&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;+&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;//&nbsp;3D&nbsp;partial&nbsp;specialization:&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-template&lt;class&nbsp;T,&nbsp;class&nbsp;T2,&nbsp;class&nbsp;Op,&nbsp;int&nbsp;B1,&nbsp;int&nbsp;L1,&nbsp;int&nbsp;B2,&nbsp;int&nbsp;L2&gt;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-struct&nbsp;AntisymmetricTensorAssign&lt;TensorEngine&lt;3,T,Antisymmetric&gt;,&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;+template&lt;template&nbsp;&lt;int,&nbsp;class,&nbsp;class&gt;&nbsp;class&nbsp;T1,&nbsp;class&nbsp;T,&nbsp;class&nbsp;T2,&nbsp;class&nbsp;Op,&nbsp;int&nbsp;B1,&nbsp;int&nbsp;L1,&nbsp;int&nbsp;B2,&nbsp;int&nbsp;L2&gt;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;+struct&nbsp;AntisymmetricTensorAssign&lt;T1&lt;3,T,Antisymmetric&gt;,&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;&nbsp;T2,Op,B1,L1,B2,L2&gt;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;{&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;static&nbsp;void&nbsp;apply(TensorEngine&lt;3,T,Antisymmetric&gt;&nbsp;&amp;x,&nbsp;const&nbsp;T2&nbsp;&amp;y,&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;+&nbsp;&nbsp;static&nbsp;void&nbsp;apply(T1&lt;3,T,Antisymmetric&gt;&nbsp;&amp;x,&nbsp;const&nbsp;T2&nbsp;&amp;y,&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Op&nbsp;op=Op())&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;&nbsp;{&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;&nbsp;&nbsp;TensorAssign&lt;TensorEngine&lt;3,T,Antisymmetric&gt;,T2,Op,1,1,0,1&gt;::apply(x,y,op);&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;&nbsp;&nbsp;TensorAssign&lt;TensorEngine&lt;3,T,Antisymmetric&gt;,T2,Op,2,1,0,2&gt;::apply(x,y,op);&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;}&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-};&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-template&lt;class&nbsp;T,&nbsp;class&nbsp;T2,&nbsp;class&nbsp;Op,&nbsp;int&nbsp;B1,&nbsp;int&nbsp;L1,&nbsp;int&nbsp;B2,&nbsp;int&nbsp;L2&gt;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-struct&nbsp;AntisymmetricTensorAssign&lt;Tensor&lt;3,T,Antisymmetric&gt;,&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;T2,Op,B1,L1,B2,L2&gt;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-{&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;static&nbsp;void&nbsp;apply(Tensor&lt;3,T,Antisymmetric&gt;&nbsp;&amp;x,&nbsp;const&nbsp;T2&nbsp;&amp;y,&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Op&nbsp;op=Op())&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;{&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;&nbsp;&nbsp;TensorAssign&lt;Tensor&lt;3,T,Antisymmetric&gt;,T2,Op,1,1,0,1&gt;::apply(x,y,op);&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;&nbsp;&nbsp;TensorAssign&lt;Tensor&lt;3,T,Antisymmetric&gt;,T2,Op,2,1,0,2&gt;::apply(x,y,op);&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;+&nbsp;&nbsp;&nbsp;&nbsp;TensorAssign&lt;T1&lt;3,T,Antisymmetric&gt;,T2,Op,1,1,0,1&gt;::apply(x,y,op);&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;+&nbsp;&nbsp;&nbsp;&nbsp;TensorAssign&lt;T1&lt;3,T,Antisymmetric&gt;,T2,Op,2,1,0,2&gt;::apply(x,y,op);&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;&nbsp;}&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;};&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;@@&nbsp;-1148,71&nbsp;+1120,37&nbsp;@@&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;struct&nbsp;SymmetricTensorAssign;&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;//&nbsp;1D&nbsp;partial&nbsp;specialization:&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-template&lt;class&nbsp;T,&nbsp;class&nbsp;T2,&nbsp;class&nbsp;Op,&nbsp;int&nbsp;B1,&nbsp;int&nbsp;L1,&nbsp;int&nbsp;B2,&nbsp;int&nbsp;L2&gt;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-struct&nbsp;SymmetricTensorAssign&lt;TensorEngine&lt;1,T,Symmetric&gt;,&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;T2,Op,B1,L1,B2,L2&gt;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-{&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;static&nbsp;void&nbsp;apply(TensorEngine&lt;1,T,Symmetric&gt;&nbsp;&amp;x,&nbsp;const&nbsp;T2&nbsp;&amp;y,&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Op&nbsp;op=Op())&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;{&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;&nbsp;&nbsp;TensorAssign&lt;TensorEngine&lt;1,T,Symmetric&gt;,T2,Op,0,1,0,1&gt;::apply(x,y,op);&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;}&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-};&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-template&lt;class&nbsp;T,&nbsp;class&nbsp;T2,&nbsp;class&nbsp;Op,&nbsp;int&nbsp;B1,&nbsp;int&nbsp;L1,&nbsp;int&nbsp;B2,&nbsp;int&nbsp;L2&gt;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-struct&nbsp;SymmetricTensorAssign&lt;Tensor&lt;1,T,Symmetric&gt;,&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;+template&lt;template&nbsp;&lt;int,&nbsp;class,&nbsp;class&gt;&nbsp;class&nbsp;T1,&nbsp;class&nbsp;T,&nbsp;class&nbsp;T2,&nbsp;class&nbsp;Op,&nbsp;int&nbsp;B1,&nbsp;int&nbsp;L1,&nbsp;int&nbsp;B2,&nbsp;int&nbsp;L2&gt;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;+struct&nbsp;SymmetricTensorAssign&lt;T1&lt;1,T,Symmetric&gt;,&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;&nbsp;T2,Op,B1,L1,B2,L2&gt;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;{&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;static&nbsp;void&nbsp;apply(Tensor&lt;1,T,Symmetric&gt;&nbsp;&amp;x,&nbsp;const&nbsp;T2&nbsp;&amp;y,&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;+&nbsp;&nbsp;static&nbsp;void&nbsp;apply(T1&lt;1,T,Symmetric&gt;&nbsp;&amp;x,&nbsp;const&nbsp;T2&nbsp;&amp;y,&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Op&nbsp;op=Op())&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;&nbsp;{&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;&nbsp;&nbsp;TensorAssign&lt;Tensor&lt;1,T,Symmetric&gt;,T2,Op,0,1,0,1&gt;::apply(x,y,op);&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;+&nbsp;&nbsp;&nbsp;&nbsp;TensorAssign&lt;T1&lt;1,T,Symmetric&gt;,T2,Op,0,1,0,1&gt;::apply(x,y,op);&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;&nbsp;}&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;};&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;+&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;//&nbsp;2D&nbsp;partial&nbsp;specialization:&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-template&lt;class&nbsp;T,&nbsp;class&nbsp;T2,&nbsp;class&nbsp;Op,&nbsp;int&nbsp;B1,&nbsp;int&nbsp;L1,&nbsp;int&nbsp;B2,&nbsp;int&nbsp;L2&gt;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-struct&nbsp;SymmetricTensorAssign&lt;TensorEngine&lt;2,T,Symmetric&gt;,&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;T2,Op,B1,L1,B2,L2&gt;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;+template&lt;template&nbsp;&lt;int,&nbsp;class,&nbsp;class&gt;&nbsp;class&nbsp;T1,&nbsp;class&nbsp;T,&nbsp;class&nbsp;T2,&nbsp;class&nbsp;Op,&nbsp;int&nbsp;B1,&nbsp;int&nbsp;L1,&nbsp;int&nbsp;B2,&nbsp;int&nbsp;L2&gt;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;+struct&nbsp;SymmetricTensorAssign&lt;T1&lt;2,T,Symmetric&gt;,T2,Op,B1,L1,B2,L2&gt;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;{&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;static&nbsp;void&nbsp;apply(TensorEngine&lt;2,T,Symmetric&gt;&nbsp;&amp;x,&nbsp;const&nbsp;T2&nbsp;&amp;y,&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Op&nbsp;op=Op())&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;+&nbsp;&nbsp;static&nbsp;void&nbsp;apply(T1&lt;2,T,Symmetric&gt;&nbsp;&amp;x,&nbsp;const&nbsp;T2&nbsp;&amp;y,&nbsp;Op&nbsp;op=Op())&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;&nbsp;{&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;&nbsp;&nbsp;TensorAssign&lt;TensorEngine&lt;2,T,Symmetric&gt;,T2,Op,0,1,0,1&gt;::apply(x,y,op);&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;&nbsp;&nbsp;TensorAssign&lt;TensorEngine&lt;2,T,Symmetric&gt;,T2,Op,1,1,0,2&gt;::apply(x,y,op);&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;}&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-};&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-template&lt;class&nbsp;T,&nbsp;class&nbsp;T2,&nbsp;class&nbsp;Op,&nbsp;int&nbsp;B1,&nbsp;int&nbsp;L1,&nbsp;int&nbsp;B2,&nbsp;int&nbsp;L2&gt;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-struct&nbsp;SymmetricTensorAssign&lt;Tensor&lt;2,T,Symmetric&gt;,&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;T2,Op,B1,L1,B2,L2&gt;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-{&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;static&nbsp;void&nbsp;apply(Tensor&lt;2,T,Symmetric&gt;&nbsp;&amp;x,&nbsp;const&nbsp;T2&nbsp;&amp;y,&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Op&nbsp;op=Op())&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;{&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;&nbsp;&nbsp;TensorAssign&lt;Tensor&lt;2,T,Symmetric&gt;,T2,Op,0,1,0,1&gt;::apply(x,y,op);&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;&nbsp;&nbsp;TensorAssign&lt;Tensor&lt;2,T,Symmetric&gt;,T2,Op,1,1,0,2&gt;::apply(x,y,op);&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;+&nbsp;&nbsp;&nbsp;&nbsp;TensorAssign&lt;T1&lt;2,T,Symmetric&gt;,T2,Op,0,1,0,1&gt;::apply(x,y,op);&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;+&nbsp;&nbsp;&nbsp;&nbsp;TensorAssign&lt;T1&lt;2,T,Symmetric&gt;,T2,Op,1,1,0,2&gt;::apply(x,y,op);&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;&nbsp;}&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;};&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;+&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;//&nbsp;3D&nbsp;partial&nbsp;specialization:&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-template&lt;class&nbsp;T,&nbsp;class&nbsp;T2,&nbsp;class&nbsp;Op,&nbsp;int&nbsp;B1,&nbsp;int&nbsp;L1,&nbsp;int&nbsp;B2,&nbsp;int&nbsp;L2&gt;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-struct&nbsp;SymmetricTensorAssign&lt;TensorEngine&lt;3,T,Symmetric&gt;,&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;T2,Op,B1,L1,B2,L2&gt;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;+template&lt;template&nbsp;&lt;int,&nbsp;class,&nbsp;class&gt;&nbsp;class&nbsp;T1,&nbsp;class&nbsp;T,&nbsp;class&nbsp;T2,&nbsp;class&nbsp;Op,&nbsp;int&nbsp;B1,&nbsp;int&nbsp;L1,&nbsp;int&nbsp;B2,&nbsp;int&nbsp;L2&gt;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;+struct&nbsp;SymmetricTensorAssign&lt;T1&lt;3,T,Symmetric&gt;,T2,Op,B1,L1,B2,L2&gt;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;{&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;static&nbsp;void&nbsp;apply(TensorEngine&lt;3,T,Symmetric&gt;&nbsp;&amp;x,&nbsp;const&nbsp;T2&nbsp;&amp;y,&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Op&nbsp;op=Op())&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;{&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;&nbsp;&nbsp;TensorAssign&lt;TensorEngine&lt;3,T,Symmetric&gt;,T2,Op,0,1,0,1&gt;::apply(x,y,op);&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;&nbsp;&nbsp;TensorAssign&lt;TensorEngine&lt;3,T,Symmetric&gt;,T2,Op,1,1,0,2&gt;::apply(x,y,op);&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;&nbsp;&nbsp;TensorAssign&lt;TensorEngine&lt;3,T,Symmetric&gt;,T2,Op,2,1,0,3&gt;::apply(x,y,op);&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;}&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-};&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-template&lt;class&nbsp;T,&nbsp;class&nbsp;T2,&nbsp;class&nbsp;Op,&nbsp;int&nbsp;B1,&nbsp;int&nbsp;L1,&nbsp;int&nbsp;B2,&nbsp;int&nbsp;L2&gt;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-struct&nbsp;SymmetricTensorAssign&lt;Tensor&lt;3,T,Symmetric&gt;,T2,Op,B1,L1,B2,L2&gt;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-{&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;static&nbsp;void&nbsp;apply(Tensor&lt;3,T,Symmetric&gt;&nbsp;&amp;x,&nbsp;const&nbsp;T2&nbsp;&amp;y,&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Op&nbsp;op=Op())&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;+&nbsp;&nbsp;static&nbsp;void&nbsp;apply(T1&lt;3,T,Symmetric&gt;&nbsp;&amp;x,&nbsp;const&nbsp;T2&nbsp;&amp;y,&nbsp;Op&nbsp;op=Op())&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;&nbsp;{&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;&nbsp;&nbsp;TensorAssign&lt;Tensor&lt;3,T,Symmetric&gt;,T2,Op,0,1,0,1&gt;::apply(x,y,op);&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;&nbsp;&nbsp;TensorAssign&lt;Tensor&lt;3,T,Symmetric&gt;,T2,Op,1,1,0,2&gt;::apply(x,y,op);&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;&nbsp;&nbsp;TensorAssign&lt;Tensor&lt;3,T,Symmetric&gt;,T2,Op,2,1,0,3&gt;::apply(x,y,op);&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;+&nbsp;&nbsp;&nbsp;&nbsp;TensorAssign&lt;T1&lt;3,T,Symmetric&gt;,T2,Op,0,1,0,1&gt;::apply(x,y,op);&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;+&nbsp;&nbsp;&nbsp;&nbsp;TensorAssign&lt;T1&lt;3,T,Symmetric&gt;,T2,Op,1,1,0,2&gt;::apply(x,y,op);&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;+&nbsp;&nbsp;&nbsp;&nbsp;TensorAssign&lt;T1&lt;3,T,Symmetric&gt;,T2,Op,2,1,0,3&gt;::apply(x,y,op);&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;&nbsp;}&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;};&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;@@&nbsp;-1531,62&nbsp;+1469,37&nbsp;@@&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;struct&nbsp;DiagonalTensorAssign;&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;//&nbsp;1D&nbsp;partial&nbsp;specialization:&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-template&lt;class&nbsp;T,&nbsp;class&nbsp;T2,&nbsp;class&nbsp;Op,&nbsp;int&nbsp;B1,&nbsp;int&nbsp;L1,&nbsp;int&nbsp;B2,&nbsp;int&nbsp;L2&gt;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-struct&nbsp;DiagonalTensorAssign&lt;TensorEngine&lt;1,T,Diagonal&gt;,T2,Op,B1,L1,B2,L2&gt;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;+template&lt;template&nbsp;&lt;int,&nbsp;class,&nbsp;class&gt;&nbsp;class&nbsp;T1,&nbsp;class&nbsp;T,&nbsp;class&nbsp;T2,&nbsp;class&nbsp;Op,&nbsp;int&nbsp;B1,&nbsp;int&nbsp;L1,&nbsp;int&nbsp;B2,&nbsp;int&nbsp;L2&gt;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;+struct&nbsp;DiagonalTensorAssign&lt;T1&lt;1,T,Diagonal&gt;,T2,Op,B1,L1,B2,L2&gt;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;{&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;static&nbsp;void&nbsp;apply(TensorEngine&lt;1,T,Diagonal&gt;&nbsp;&amp;x,&nbsp;const&nbsp;T2&nbsp;&amp;y,&nbsp;Op&nbsp;op=Op())&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;+&nbsp;&nbsp;static&nbsp;void&nbsp;apply(T1&lt;1,T,Diagonal&gt;&nbsp;&amp;x,&nbsp;const&nbsp;T2&nbsp;&amp;y,&nbsp;Op&nbsp;op=Op())&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;&nbsp;{&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;&nbsp;&nbsp;TensorAssign&lt;TensorEngine&lt;1,T,Diagonal&gt;,T2,Op,0,1,0,1&gt;::apply(x,y,op);&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;}&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-};&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-template&lt;class&nbsp;T,&nbsp;class&nbsp;T2,&nbsp;class&nbsp;Op,&nbsp;int&nbsp;B1,&nbsp;int&nbsp;L1,&nbsp;int&nbsp;B2,&nbsp;int&nbsp;L2&gt;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-struct&nbsp;DiagonalTensorAssign&lt;Tensor&lt;1,T,Diagonal&gt;,T2,Op,B1,L1,B2,L2&gt;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-{&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;static&nbsp;void&nbsp;apply(Tensor&lt;1,T,Diagonal&gt;&nbsp;&amp;x,&nbsp;const&nbsp;T2&nbsp;&amp;y,&nbsp;Op&nbsp;op=Op())&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;{&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;&nbsp;&nbsp;TensorAssign&lt;Tensor&lt;1,T,Diagonal&gt;,T2,Op,0,1,0,1&gt;::apply(x,y,op);&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;+&nbsp;&nbsp;&nbsp;&nbsp;TensorAssign&lt;T1&lt;1,T,Diagonal&gt;,T2,Op,0,1,0,1&gt;::apply(x,y,op);&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;&nbsp;}&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;};&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;+&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;//&nbsp;2D&nbsp;partial&nbsp;specialization:&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-template&lt;class&nbsp;T,&nbsp;class&nbsp;T2,&nbsp;class&nbsp;Op,&nbsp;int&nbsp;B1,&nbsp;int&nbsp;L1,&nbsp;int&nbsp;B2,&nbsp;int&nbsp;L2&gt;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-struct&nbsp;DiagonalTensorAssign&lt;TensorEngine&lt;2,T,Diagonal&gt;,T2,Op,B1,L1,B2,L2&gt;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;+template&lt;template&nbsp;&lt;int,&nbsp;class,&nbsp;class&gt;&nbsp;class&nbsp;T1,&nbsp;class&nbsp;T,&nbsp;class&nbsp;T2,&nbsp;class&nbsp;Op,&nbsp;int&nbsp;B1,&nbsp;int&nbsp;L1,&nbsp;int&nbsp;B2,&nbsp;int&nbsp;L2&gt;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;+struct&nbsp;DiagonalTensorAssign&lt;T1&lt;2,T,Diagonal&gt;,T2,Op,B1,L1,B2,L2&gt;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;{&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;static&nbsp;void&nbsp;apply(TensorEngine&lt;2,T,Diagonal&gt;&nbsp;&amp;x,&nbsp;const&nbsp;T2&nbsp;&amp;y,&nbsp;Op&nbsp;op=Op())&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;+&nbsp;&nbsp;static&nbsp;void&nbsp;apply(T1&lt;2,T,Diagonal&gt;&nbsp;&amp;x,&nbsp;const&nbsp;T2&nbsp;&amp;y,&nbsp;Op&nbsp;op=Op())&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;&nbsp;{&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;&nbsp;&nbsp;TensorAssign&lt;TensorEngine&lt;2,T,Diagonal&gt;,T2,Op,0,1,0,1&gt;::&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;+&nbsp;&nbsp;&nbsp;&nbsp;TensorAssign&lt;T1&lt;2,T,Diagonal&gt;,T2,Op,0,1,0,1&gt;::&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apply(x,y,op);&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;&nbsp;&nbsp;TensorAssign&lt;TensorEngine&lt;2,T,Diagonal&gt;,T2,Op,1,1,1,1&gt;::&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;+&nbsp;&nbsp;&nbsp;&nbsp;TensorAssign&lt;T1&lt;2,T,Diagonal&gt;,T2,Op,1,1,1,1&gt;::&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;apply(x,y,op);&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;&nbsp;}&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;};&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-template&lt;class&nbsp;T,&nbsp;class&nbsp;T2,&nbsp;class&nbsp;Op,&nbsp;int&nbsp;B1,&nbsp;int&nbsp;L1,&nbsp;int&nbsp;B2,&nbsp;int&nbsp;L2&gt;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-struct&nbsp;DiagonalTensorAssign&lt;Tensor&lt;2,T,Diagonal&gt;,T2,Op,B1,L1,B2,L2&gt;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-{&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;static&nbsp;void&nbsp;apply(Tensor&lt;2,T,Diagonal&gt;&nbsp;&amp;x,&nbsp;const&nbsp;T2&nbsp;&amp;y,&nbsp;Op&nbsp;op=Op())&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;{&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;&nbsp;&nbsp;TensorAssign&lt;Tensor&lt;2,T,Diagonal&gt;,T2,Op,0,1,0,1&gt;::apply(x,y,op);&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;&nbsp;&nbsp;TensorAssign&lt;Tensor&lt;2,T,Diagonal&gt;,T2,Op,1,1,1,1&gt;::apply(x,y,op);&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;}&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-};&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;+&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;//&nbsp;3D&nbsp;partial&nbsp;specialization:&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-template&lt;class&nbsp;T,&nbsp;class&nbsp;T2,&nbsp;class&nbsp;Op,&nbsp;int&nbsp;B1,&nbsp;int&nbsp;L1,&nbsp;int&nbsp;B2,&nbsp;int&nbsp;L2&gt;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-struct&nbsp;DiagonalTensorAssign&lt;TensorEngine&lt;3,T,Diagonal&gt;,T2,Op,B1,L1,B2,L2&gt;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-{&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;static&nbsp;void&nbsp;apply(TensorEngine&lt;3,T,Diagonal&gt;&nbsp;&amp;x,&nbsp;const&nbsp;T2&nbsp;&amp;y,&nbsp;Op&nbsp;op=Op())&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;{&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;&nbsp;&nbsp;TensorAssign&lt;TensorEngine&lt;3,T,Diagonal&gt;,T2,Op,0,1,0,1&gt;::apply(x,y,op);&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;&nbsp;&nbsp;TensorAssign&lt;TensorEngine&lt;3,T,Diagonal&gt;,T2,Op,1,1,1,1&gt;::apply(x,y,op);&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;&nbsp;&nbsp;TensorAssign&lt;TensorEngine&lt;3,T,Diagonal&gt;,T2,Op,2,1,2,1&gt;::apply(x,y,op);&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;}&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-};&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-template&lt;class&nbsp;T,&nbsp;class&nbsp;T2,&nbsp;class&nbsp;Op,&nbsp;int&nbsp;B1,&nbsp;int&nbsp;L1,&nbsp;int&nbsp;B2,&nbsp;int&nbsp;L2&gt;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-struct&nbsp;DiagonalTensorAssign&lt;Tensor&lt;3,T,Diagonal&gt;,T2,Op,B1,L1,B2,L2&gt;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;+template&lt;template&nbsp;&lt;int,&nbsp;class,&nbsp;class&gt;&nbsp;class&nbsp;T1,&nbsp;class&nbsp;T,&nbsp;class&nbsp;T2,&nbsp;class&nbsp;Op,&nbsp;int&nbsp;B1,&nbsp;int&nbsp;L1,&nbsp;int&nbsp;B2,&nbsp;int&nbsp;L2&gt;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;+struct&nbsp;DiagonalTensorAssign&lt;T1&lt;3,T,Diagonal&gt;,T2,Op,B1,L1,B2,L2&gt;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;{&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;static&nbsp;void&nbsp;apply(Tensor&lt;3,T,Diagonal&gt;&nbsp;&amp;x,&nbsp;const&nbsp;T2&nbsp;&amp;y,&nbsp;Op&nbsp;op=Op())&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;+&nbsp;&nbsp;static&nbsp;void&nbsp;apply(T1&lt;3,T,Diagonal&gt;&nbsp;&amp;x,&nbsp;const&nbsp;T2&nbsp;&amp;y,&nbsp;Op&nbsp;op=Op())&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;&nbsp;{&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;&nbsp;&nbsp;TensorAssign&lt;Tensor&lt;3,T,Diagonal&gt;,T2,Op,0,1,0,1&gt;::apply(x,y,op);&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;&nbsp;&nbsp;TensorAssign&lt;Tensor&lt;3,T,Diagonal&gt;,T2,Op,1,1,1,1&gt;::apply(x,y,op);&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;&nbsp;&nbsp;TensorAssign&lt;Tensor&lt;3,T,Diagonal&gt;,T2,Op,2,1,2,1&gt;::apply(x,y,op);&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;+&nbsp;&nbsp;&nbsp;&nbsp;TensorAssign&lt;T1&lt;3,T,Diagonal&gt;,T2,Op,0,1,0,1&gt;::apply(x,y,op);&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;+&nbsp;&nbsp;&nbsp;&nbsp;TensorAssign&lt;T1&lt;3,T,Diagonal&gt;,T2,Op,1,1,1,1&gt;::apply(x,y,op);&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;+&nbsp;&nbsp;&nbsp;&nbsp;TensorAssign&lt;T1&lt;3,T,Diagonal&gt;,T2,Op,2,1,2,1&gt;::apply(x,y,op);&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;&nbsp;}&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;};&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;/BODY&gt;<br>
&lt;/HTML&gt;
</tt>
