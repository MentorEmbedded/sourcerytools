<tt>
&lt;!DOCTYPE&nbsp;HTML&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;HTML&nbsp;3.2//EN&quot;&gt;<br>
&lt;HTML&gt;<br>
&lt;HEAD&gt;<br>
&lt;META&nbsp;HTTP-EQUIV=&quot;Content-Type&quot;&nbsp;CONTENT=&quot;text/html;&nbsp;charset=us-ascii&quot;&gt;<br>
&lt;META&nbsp;NAME=&quot;Generator&quot;&nbsp;CONTENT=&quot;MS&nbsp;Exchange&nbsp;Server&nbsp;version&nbsp;5.5.2653.12&quot;&gt;<br>
&lt;TITLE&gt;RE:&nbsp;[pooma-dev]&nbsp;Re:&nbsp;Ref&nbsp;counting&lt;/TITLE&gt;<br>
&lt;/HEAD&gt;<br>
&lt;BODY&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;Something&nbsp;else&nbsp;is&nbsp;wrong.&nbsp;Array&nbsp;and&nbsp;Field&nbsp;are&nbsp;just&nbsp;wrappers&nbsp;around&nbsp;ref-counted&nbsp;engines.&nbsp;Thus&nbsp;there&nbsp;should&nbsp;be&nbsp;no&nbsp;problem&nbsp;doing&nbsp;something&nbsp;like:&lt;/FONT&gt;&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;&nbsp;Array&lt;1&gt;&nbsp;foo()&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;&nbsp;{&lt;/FONT&gt;<br>
&lt;BR&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;FONT&nbsp;SIZE=2&gt;Array&lt;1&gt;&nbsp;retval(10,10);&lt;/FONT&gt;<br>
&lt;BR&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;FONT&nbsp;SIZE=2&gt;retval&nbsp;=&nbsp;3;&lt;/FONT&gt;<br>
&lt;BR&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;FONT&nbsp;SIZE=2&gt;return&nbsp;retval;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;&nbsp;}&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;Memory&nbsp;could&nbsp;be&nbsp;getting&nbsp;stepped&nbsp;on,&nbsp;or&nbsp;he&nbsp;might&nbsp;be&nbsp;returning&nbsp;a&nbsp;reference&nbsp;instead&nbsp;of&nbsp;a&nbsp;value.&nbsp;&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;FONT&nbsp;SIZE=2&gt;Jim&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
&lt;BR&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;-----Original&nbsp;Message-----&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;From:&nbsp;Mark&nbsp;Mitchell&nbsp;[&lt;A&nbsp;HREF=&quot;mailto:mark@codesourcery.com&quot;&gt;mailto:mark@codesourcery.com&lt;/A&gt;]&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;Sent:&nbsp;Friday,&nbsp;April&nbsp;12,&nbsp;2002&nbsp;2:43&nbsp;PM&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;To:&nbsp;Nils&nbsp;H.&nbsp;Busch;&nbsp;pooma-dev@pooma.codesourcery.com&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;Subject:&nbsp;[pooma-dev]&nbsp;Re:&nbsp;Ref&nbsp;counting&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&gt;&nbsp;Is&nbsp;there&nbsp;a&nbsp;way&nbsp;to&nbsp;increase&nbsp;ref&nbsp;count&nbsp;of&nbsp;object&nbsp;to&nbsp;reference&nbsp;it&nbsp;outside&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&gt;&nbsp;of&nbsp;function&nbsp;scope&nbsp;or&nbsp;am&nbsp;trying&nbsp;to&nbsp;do&nbsp;something&nbsp;deprecated&nbsp;?&nbsp;Should&nbsp;I&nbsp;be&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&gt;&nbsp;passing&nbsp;in&nbsp;a&nbsp;reference&nbsp;argument&nbsp;and&nbsp;initialize&nbsp;Array/Field&nbsp;in&nbsp;the&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&gt;&nbsp;function&nbsp;?&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;I&nbsp;suggest&nbsp;allocating&nbsp;the&nbsp;new&nbsp;Array/Field&nbsp;with&nbsp;&quot;new&quot;,&nbsp;rather&nbsp;than&nbsp;as&nbsp;a&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;local&nbsp;variable,&nbsp;and&nbsp;then&nbsp;returning&nbsp;it&nbsp;the&nbsp;pointer.&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;Jeffrey,&nbsp;do&nbsp;you&nbsp;have&nbsp;alternative&nbsp;ideas?&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;--&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;Mark&nbsp;Mitchell&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mark@codesourcery.com&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;CodeSourcery,&nbsp;LLC&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;A&nbsp;HREF=&quot;http://www.codesourcery.com&quot;&nbsp;TARGET=&quot;_blank&quot;&gt;http://www.codesourcery.com&lt;/A&gt;&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;/BODY&gt;<br>
&lt;/HTML&gt;
</tt>
