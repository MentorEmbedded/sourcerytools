<tt>
&lt;!DOCTYPE&nbsp;HTML&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;HTML&nbsp;3.2//EN&quot;&gt;<br>
&lt;HTML&gt;<br>
&lt;HEAD&gt;<br>
&lt;META&nbsp;HTTP-EQUIV=&quot;Content-Type&quot;&nbsp;CONTENT=&quot;text/html;&nbsp;charset=iso-8859-1&quot;&gt;<br>
&lt;META&nbsp;NAME=&quot;Generator&quot;&nbsp;CONTENT=&quot;MS&nbsp;Exchange&nbsp;Server&nbsp;version&nbsp;5.5.2650.12&quot;&gt;<br>
&lt;TITLE&gt;RE:&nbsp;[pooma-dev]&nbsp;RFA:&nbsp;delete_test1&nbsp;Modifications&lt;/TITLE&gt;<br>
&lt;/HEAD&gt;<br>
&lt;BODY&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;copy&nbsp;doesn't&nbsp;have&nbsp;the&nbsp;same&nbsp;semantics&nbsp;as&nbsp;memmove&nbsp;and&nbsp;so&nbsp;it&nbsp;is&nbsp;potentially&nbsp;faster&nbsp;(it&nbsp;can&nbsp;only&nbsp;copy&nbsp;overlapping&nbsp;regions&nbsp;if&nbsp;the&nbsp;destination&nbsp;is&nbsp;before&nbsp;the&nbsp;source,&nbsp;which&nbsp;is&nbsp;the&nbsp;case&nbsp;in&nbsp;the&nbsp;shift-up&nbsp;copies,&nbsp;which&nbsp;almost&nbsp;always&nbsp;involve&nbsp;overlapping&nbsp;regions).&nbsp;However,&nbsp;I&nbsp;did&nbsp;a&nbsp;lot&nbsp;of&nbsp;testing&nbsp;with&nbsp;KCC&nbsp;on&nbsp;the&nbsp;SGI&nbsp;and&nbsp;found&nbsp;that&nbsp;for&nbsp;larger&nbsp;moves,&nbsp;memmove&nbsp;was&nbsp;faster.&nbsp;This&nbsp;is&nbsp;why&nbsp;I&nbsp;put&nbsp;a&nbsp;test&nbsp;into&nbsp;the&nbsp;delete_shiftup&nbsp;algorithm&nbsp;to&nbsp;use&nbsp;copy&nbsp;only&nbsp;if&nbsp;the&nbsp;length&nbsp;of&nbsp;the&nbsp;copy&nbsp;was&nbsp;less&nbsp;than&nbsp;100&nbsp;(a&nbsp;good&nbsp;round&nbsp;number).&nbsp;Someone&nbsp;(named&nbsp;julianc)&nbsp;has&nbsp;since&nbsp;commented&nbsp;out&nbsp;that&nbsp;code&nbsp;without&nbsp;leaving&nbsp;a&nbsp;comment&nbsp;in&nbsp;the&nbsp;source&nbsp;as&nbsp;to&nbsp;the&nbsp;reason.&nbsp;Looking&nbsp;at&nbsp;the&nbsp;log&nbsp;I&nbsp;see&nbsp;that&nbsp;it&nbsp;was&nbsp;due&nbsp;to&nbsp;VC++&nbsp;not&nbsp;having&nbsp;a&nbsp;proper&nbsp;std::advance.&nbsp;This&nbsp;should&nbsp;have&nbsp;just&nbsp;been&nbsp;coded&nbsp;around.&nbsp;At&nbsp;any&nbsp;rate,&nbsp;I&nbsp;didn't&nbsp;add&nbsp;this&nbsp;complication&nbsp;lightly.&nbsp;Now&nbsp;perhaps&nbsp;KCC&nbsp;has&nbsp;since&nbsp;written&nbsp;copy&nbsp;to&nbsp;use&nbsp;memmove&nbsp;so&nbsp;I&nbsp;don't&nbsp;know&nbsp;if&nbsp;my&nbsp;investigations&nbsp;from&nbsp;early&nbsp;2000&nbsp;are&nbsp;still&nbsp;valid.&lt;/FONT&gt;&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;Jim&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;For&nbsp;those&nbsp;skipping&nbsp;intermediary&nbsp;emails,&nbsp;the&nbsp;discussion&nbsp;is&nbsp;whether&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;memmove()&nbsp;is&nbsp;faster&nbsp;than&nbsp;copy().&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;Attached&nbsp;is&nbsp;a&nbsp;program&nbsp;that&nbsp;constructs&nbsp;a&nbsp;vector,&nbsp;copies&nbsp;its&nbsp;contents&nbsp;to&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;another&nbsp;vector,&nbsp;and&nbsp;then&nbsp;checks&nbsp;the&nbsp;copy&nbsp;for&nbsp;correctness.&nbsp;&nbsp;On&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;Linux/gcc3.0&nbsp;and&nbsp;Irix6.5/KCC,&nbsp;I&nbsp;cannot&nbsp;find&nbsp;any&nbsp;significant&nbsp;speed&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;difference&nbsp;between&nbsp;std::copy&nbsp;and&nbsp;std::memmove&nbsp;for&nbsp;vectors&nbsp;of&nbsp;doubles.&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;Given&nbsp;this&nbsp;result,&nbsp;may&nbsp;we&nbsp;use&nbsp;std::copy()&nbsp;everywhere&nbsp;since&nbsp;it&nbsp;is&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;guaranteed&nbsp;to&nbsp;compile?&nbsp;&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;/BODY&gt;<br>
&lt;/HTML&gt;
</tt>
