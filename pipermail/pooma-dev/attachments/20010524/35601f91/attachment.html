<tt>
&lt;!DOCTYPE&nbsp;HTML&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;HTML&nbsp;3.2//EN&quot;&gt;<br>
&lt;HTML&gt;<br>
&lt;HEAD&gt;<br>
&lt;META&nbsp;HTTP-EQUIV=&quot;Content-Type&quot;&nbsp;CONTENT=&quot;text/html;&nbsp;charset=iso-8859-1&quot;&gt;<br>
&lt;META&nbsp;NAME=&quot;Generator&quot;&nbsp;CONTENT=&quot;MS&nbsp;Exchange&nbsp;Server&nbsp;version&nbsp;5.5.2650.12&quot;&gt;<br>
&lt;TITLE&gt;RE:&nbsp;[pooma-dev]&nbsp;RFA:&nbsp;delete_test1&nbsp;Modifications&lt;/TITLE&gt;<br>
&lt;/HEAD&gt;<br>
&lt;BODY&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;Actually,&nbsp;I&nbsp;think&nbsp;&quot;fast&nbsp;code&quot;&nbsp;is&nbsp;one&nbsp;of&nbsp;our&nbsp;prime&nbsp;directives.&nbsp;We&nbsp;should&nbsp;try&nbsp;to&nbsp;find&nbsp;a&nbsp;way&nbsp;to&nbsp;do&nbsp;both.&nbsp;&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;Jim&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;-----Original&nbsp;Message-----&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;From:&nbsp;Jeffrey&nbsp;Oldham&nbsp;[&lt;A&nbsp;HREF=&quot;mailto:oldham@codesourcery.com&quot;&gt;mailto:oldham@codesourcery.com&lt;/A&gt;]&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;Sent:&nbsp;Thursday,&nbsp;May&nbsp;24,&nbsp;2001&nbsp;10:46&nbsp;AM&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;To:&nbsp;James&nbsp;Crotinger&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;Cc:&nbsp;pooma-dev@pooma.codesourcery.com&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;Subject:&nbsp;Re:&nbsp;[pooma-dev]&nbsp;RFA:&nbsp;delete_test1&nbsp;Modifications&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;On&nbsp;Thu,&nbsp;May&nbsp;24,&nbsp;2001&nbsp;at&nbsp;09:33:45AM&nbsp;-0700,&nbsp;James&nbsp;Crotinger&nbsp;wrote:&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;&gt;&nbsp;The&nbsp;memmove&nbsp;optimization&nbsp;was&nbsp;fairly&nbsp;substantial&nbsp;when&nbsp;I&nbsp;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;tested&nbsp;it.&nbsp;I&nbsp;think&nbsp;it&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;&gt;&nbsp;would&nbsp;be&nbsp;better&nbsp;to&nbsp;modify&nbsp;the&nbsp;code&nbsp;to&nbsp;pass&nbsp;addresses&nbsp;to&nbsp;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;memmove&nbsp;-&nbsp;again&nbsp;this&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;&gt;&nbsp;gets&nbsp;to&nbsp;the&nbsp;question&nbsp;of&nbsp;whether&nbsp;it&nbsp;is&nbsp;really&nbsp;OK&nbsp;to&nbsp;use&nbsp;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;&amp;a.begin()[0]&nbsp;to&nbsp;be&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;&gt;&nbsp;the&nbsp;address&nbsp;of&nbsp;the&nbsp;0th&nbsp;element,&nbsp;etc.&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;Yes,&nbsp;I&nbsp;imagine&nbsp;that&nbsp;memmove()&nbsp;is&nbsp;significantly&nbsp;faster&nbsp;than&nbsp;copy(),&nbsp;but&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;I&nbsp;would&nbsp;prefer&nbsp;to&nbsp;have&nbsp;code&nbsp;that&nbsp;is&nbsp;guaranteed&nbsp;to&nbsp;compile&nbsp;rather&nbsp;than&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;fast&nbsp;code&nbsp;that&nbsp;compiles&nbsp;only&nbsp;for&nbsp;certain&nbsp;platforms.&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;&gt;&nbsp;&gt;&nbsp;-----Original&nbsp;Message-----&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;&gt;&nbsp;&gt;&nbsp;From:&nbsp;Jeffrey&nbsp;Oldham&nbsp;[&lt;A&nbsp;HREF=&quot;mailto:oldham@codesourcery.com&quot;&gt;mailto:oldham@codesourcery.com&lt;/A&gt;]&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;&gt;&nbsp;&gt;&nbsp;Sent:&nbsp;Wednesday,&nbsp;May&nbsp;23,&nbsp;2001&nbsp;6:33&nbsp;PM&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;&gt;&nbsp;&gt;&nbsp;To:&nbsp;pooma-dev@pooma.codesourcery.com&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;&gt;&nbsp;&gt;&nbsp;Subject:&nbsp;[pooma-dev]&nbsp;RFA:&nbsp;delete_test1&nbsp;Modifications&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;&gt;&nbsp;&gt;&nbsp;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;&gt;&nbsp;&gt;&nbsp;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;&gt;&nbsp;&gt;&nbsp;OK&nbsp;to&nbsp;commit?&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;&gt;&nbsp;&gt;&nbsp;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;&gt;&nbsp;&gt;&nbsp;Compiling&nbsp;src/Utilities/tests/delete_test1.cpp&nbsp;showed&nbsp;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;that&nbsp;the&nbsp;vector&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;&gt;&nbsp;&gt;&nbsp;type&nbsp;`Array_t'&nbsp;was&nbsp;declared&nbsp;to&nbsp;store&nbsp;doubles&nbsp;but&nbsp;actually&nbsp;stored&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;&gt;&nbsp;&gt;&nbsp;integers.&nbsp;&nbsp;Also,&nbsp;a&nbsp;call&nbsp;to&nbsp;std::memmove()&nbsp;illegally&nbsp;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;converted&nbsp;vector&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;&gt;&nbsp;&gt;&nbsp;iterators&nbsp;to&nbsp;pointers.&nbsp;&nbsp;The&nbsp;alternative&nbsp;call&nbsp;to&nbsp;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;std::copy()&nbsp;is&nbsp;instead&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;&gt;&nbsp;&gt;&nbsp;used.&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;&gt;&nbsp;&gt;&nbsp;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;&gt;&nbsp;&gt;&nbsp;2001&nbsp;May&nbsp;23&nbsp;&nbsp;Jeffrey&nbsp;D.&nbsp;Oldham&nbsp;&nbsp;&lt;oldham@codesourcery.com&gt;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;&gt;&nbsp;&gt;&nbsp;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;&gt;&nbsp;&gt;&nbsp;&nbsp;&nbsp;*&nbsp;delete_test1.cpp&nbsp;(Array_t):&nbsp;s/vector&lt;double&gt;/vector&lt;int&gt;/&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;&gt;&nbsp;&gt;&nbsp;&nbsp;&nbsp;(delete_shiftup_test2):&nbsp;Remove&nbsp;&quot;optimization&quot;&nbsp;call&nbsp;to&nbsp;memmove.&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;&gt;&nbsp;&gt;&nbsp;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;&gt;&nbsp;&gt;&nbsp;Tested&nbsp;on&nbsp;sequential&nbsp;Linux&nbsp;using&nbsp;gcc&nbsp;3.0&nbsp;by&nbsp;compiling&nbsp;the&nbsp;program&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;&gt;&nbsp;&gt;&nbsp;Approved&nbsp;by&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;???you???&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;Thanks,&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;Jeffrey&nbsp;D.&nbsp;Oldham&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;oldham@codesourcery.com&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;/BODY&gt;<br>
&lt;/HTML&gt;
</tt>
