<tt>
&lt;!DOCTYPE&nbsp;HTML&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;HTML&nbsp;3.2//EN&quot;&gt;<br>
&lt;HTML&gt;<br>
&lt;HEAD&gt;<br>
&lt;META&nbsp;HTTP-EQUIV=&quot;Content-Type&quot;&nbsp;CONTENT=&quot;text/html;&nbsp;charset=iso-8859-1&quot;&gt;<br>
&lt;META&nbsp;NAME=&quot;Generator&quot;&nbsp;CONTENT=&quot;MS&nbsp;Exchange&nbsp;Server&nbsp;version&nbsp;5.5.2650.12&quot;&gt;<br>
&lt;TITLE&gt;RE:&nbsp;[pooma-dev]&nbsp;Profiling&nbsp;POOMA:&nbsp;How&nbsp;to?&lt;/TITLE&gt;<br>
&lt;/HEAD&gt;<br>
&lt;BODY&gt;<br>
&lt;BR&gt;<br>
&lt;BR&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;-----Original&nbsp;Message-----&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;From:&nbsp;Gabriel&nbsp;Dos&nbsp;Reis&nbsp;[&lt;A&nbsp;HREF=&quot;mailto:gdr@codesourcery.com&quot;&gt;mailto:gdr@codesourcery.com&lt;/A&gt;]&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;Sent:&nbsp;Thursday,&nbsp;August&nbsp;16,&nbsp;2001&nbsp;6:48&nbsp;PM&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;To:&nbsp;pooma-dev@pooma.codesourcery.com&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;Subject:&nbsp;[pooma-dev]&nbsp;Profiling&nbsp;POOMA:&nbsp;How&nbsp;to?&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Profiling&nbsp;POOMA&nbsp;(with&nbsp;gprof)&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;compiled&nbsp;with&nbsp;KCC&nbsp;or&nbsp;GCC&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;is&nbsp;a&nbsp;short&nbsp;note&nbsp;to&nbsp;let&nbsp;you&nbsp;get&nbsp;started&nbsp;with&nbsp;profiling&nbsp;POOMA&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;compiled&nbsp;with&nbsp;KCC&nbsp;or&nbsp;GCC&nbsp;using&nbsp;gprof&nbsp;as&nbsp;a&nbsp;profiler.&nbsp;&nbsp;That&nbsp;proceeds&nbsp;in&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;three&nbsp;steps:&nbsp;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(i)&nbsp;Setting&nbsp;architecture&nbsp;dependent&nbsp;compiler&nbsp;options&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;(ii)&nbsp;Compiling&nbsp;the&nbsp;POOMA&nbsp;library,&nbsp;benchmarks&nbsp;and&nbsp;running&nbsp;them&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;&nbsp;&nbsp;(iii)&nbsp;Producing&nbsp;profiling&nbsp;information.&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;Note&nbsp;that&nbsp;both&nbsp;the&nbsp;library&nbsp;and&nbsp;the&nbsp;program&nbsp;being&nbsp;tested&nbsp;have&nbsp;to&nbsp;be&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;compiled&nbsp;with&nbsp;profiling&nbsp;on,&nbsp;or&nbsp;else&nbsp;you&nbsp;won't&nbsp;have&nbsp;profiling&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;information&nbsp;about&nbsp;the&nbsp;parts&nbsp;not&nbsp;compiled&nbsp;with&nbsp;profiling&nbsp;on.&nbsp;&nbsp;Normally&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;setting&nbsp;correctly&nbsp;options&nbsp;in&nbsp;the&nbsp;configuration&nbsp;file&nbsp;once&nbsp;should&nbsp;be&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;OK.&nbsp;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;I)&nbsp;Setting&nbsp;architecture&nbsp;dependent&nbsp;compiler&nbsp;options&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;&nbsp;&nbsp;To&nbsp;specify&nbsp;profiling&nbsp;options,&nbsp;you&nbsp;need&nbsp;to&nbsp;modify&nbsp;the&nbsp;architecture&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;configuration&nbsp;file&nbsp;to&nbsp;be&nbsp;used&nbsp;to&nbsp;build&nbsp;POOMA.&nbsp;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;If&nbsp;you're&nbsp;using&nbsp;KCC&nbsp;then&nbsp;you&nbsp;have&nbsp;to&nbsp;modify&nbsp;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;config/arch/&lt;plateform&gt;KCC.conf&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;We&nbsp;should&nbsp;probably&nbsp;add&nbsp;a&nbsp;-gprof&nbsp;option&nbsp;to&nbsp;configure&nbsp;to&nbsp;have&nbsp;it&nbsp;make&nbsp;these&nbsp;additions&nbsp;itself.&nbsp;That&nbsp;way&nbsp;you'd&nbsp;be&nbsp;guaranteed&nbsp;that&nbsp;the&nbsp;entire&nbsp;&quot;suite&quot;&nbsp;would&nbsp;be&nbsp;consistent.&nbsp;&lt;/FONT&gt;&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;[&nbsp;At&nbsp;this&nbsp;point&nbsp;I&nbsp;suspect&nbsp;it&nbsp;would&nbsp;be&nbsp;much&nbsp;flexible&nbsp;to&nbsp;specify&nbsp;the&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;&nbsp;&nbsp;target&nbsp;specific&nbsp;profiling&nbsp;option&nbsp;at&nbsp;configure&nbsp;level&nbsp;instead&nbsp;of&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;&nbsp;&nbsp;modifying&nbsp;config/arch/&lt;suite&gt;.conf&nbsp;]&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;Right.&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;III)&nbsp;Producing&nbsp;profiling&nbsp;information.&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;&nbsp;&nbsp;To&nbsp;produce&nbsp;the&nbsp;actual&nbsp;profiling&nbsp;information,&nbsp;you&nbsp;have&nbsp;to&nbsp;invoke&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;gprof&nbsp;and&nbsp;the&nbsp;program&nbsp;being&nbsp;profiled&nbsp;as&nbsp;its&nbsp;argument.&nbsp;&nbsp;Since&nbsp;gprof&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;writes&nbsp;directly&nbsp;on&nbsp;the&nbsp;standard&nbsp;output,&nbsp;you&nbsp;might&nbsp;want&nbsp;to&nbsp;use&nbsp;a&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;redirection&nbsp;:&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;gprof&nbsp;atest&nbsp;&gt;&nbsp;atest-pooma.prof&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;When&nbsp;I&nbsp;do&nbsp;this&nbsp;on&nbsp;my&nbsp;linux&nbsp;box&nbsp;(with&nbsp;ABCTest),&nbsp;gprof&nbsp;goes&nbsp;away&nbsp;for&nbsp;a&nbsp;very&nbsp;long&nbsp;time&nbsp;and&nbsp;then&nbsp;core&nbsp;dumps&nbsp;(after&nbsp;printing&nbsp;a&nbsp;message&nbsp;about&nbsp;not&nbsp;being&nbsp;able&nbsp;to&nbsp;allocate&nbsp;several&nbsp;gigabytes&nbsp;of&nbsp;memory).&nbsp;Any&nbsp;ideas?&nbsp;Is&nbsp;this&nbsp;related&nbsp;to&nbsp;your&nbsp;caveat?&nbsp;&lt;/FONT&gt;&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;Jim&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;/BODY&gt;<br>
&lt;/HTML&gt;
</tt>
