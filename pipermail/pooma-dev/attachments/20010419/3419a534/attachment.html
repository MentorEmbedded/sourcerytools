<tt>
&lt;!DOCTYPE&nbsp;HTML&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;HTML&nbsp;3.2//EN&quot;&gt;<br>
&lt;HTML&gt;<br>
&lt;HEAD&gt;<br>
&lt;META&nbsp;HTTP-EQUIV=&quot;Content-Type&quot;&nbsp;CONTENT=&quot;text/html;&nbsp;charset=iso-8859-1&quot;&gt;<br>
&lt;META&nbsp;NAME=&quot;Generator&quot;&nbsp;CONTENT=&quot;MS&nbsp;Exchange&nbsp;Server&nbsp;version&nbsp;5.5.2650.12&quot;&gt;<br>
&lt;TITLE&gt;FW:&nbsp;gcc/stl&nbsp;question&lt;/TITLE&gt;<br>
&lt;/HEAD&gt;<br>
&lt;BODY&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;Mark&nbsp;suggested&nbsp;continuing&nbsp;this&nbsp;discussion&nbsp;on&nbsp;pooma-dev.&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;Mark,&nbsp;does&nbsp;this&nbsp;mean&nbsp;that&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;vector&lt;int&gt;&nbsp;a(10,5);&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;will&nbsp;select&nbsp;the&nbsp;template&nbsp;constructor&nbsp;(since&nbsp;10&nbsp;is&nbsp;not&nbsp;an&nbsp;unsigned&nbsp;int)?&nbsp;I&nbsp;could&nbsp;have&nbsp;sworn&nbsp;that&nbsp;special&nbsp;things&nbsp;were&nbsp;supposed&nbsp;to&nbsp;be&nbsp;done&nbsp;to&nbsp;make&nbsp;this&nbsp;do&nbsp;what&nbsp;people&nbsp;expected&nbsp;it&nbsp;to&nbsp;do,&nbsp;and&nbsp;I&nbsp;just&nbsp;figured&nbsp;that&nbsp;the&nbsp;pointer&nbsp;case&nbsp;would&nbsp;be&nbsp;similarly&nbsp;handled.&nbsp;&lt;/FONT&gt;&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;(BTW,&nbsp;is&nbsp;my&nbsp;recollection&nbsp;correct&nbsp;that&nbsp;I&nbsp;can&nbsp;safely&nbsp;leave&nbsp;the&nbsp;initialization&nbsp;off&nbsp;in&nbsp;the&nbsp;test&nbsp;below&nbsp;-&nbsp;vector&nbsp;always&nbsp;initializes&nbsp;its&nbsp;memory&nbsp;with&nbsp;the&nbsp;default&nbsp;constructor,&nbsp;right?)&lt;/FONT&gt;&lt;/P&gt;<br>
<br>
&lt;P&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;FONT&nbsp;SIZE=2&gt;Jim&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;---------------------------------------------------&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;James&nbsp;A.&nbsp;Crotinger&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;Software&nbsp;Research&nbsp;Scientist&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;Proximation,&nbsp;LLC&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;-----Original&nbsp;Message-----&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;From:&nbsp;Mark&nbsp;Mitchell&nbsp;[&lt;A&nbsp;HREF=&quot;mailto:mark@codesourcery.com&quot;&gt;mailto:mark@codesourcery.com&lt;/A&gt;]&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;Sent:&nbsp;Thursday,&nbsp;April&nbsp;19,&nbsp;2001&nbsp;9:44&nbsp;AM&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;To:&nbsp;JimC@proximation.com&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;Subject:&nbsp;Re:&nbsp;gcc/stl&nbsp;question&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
&lt;BR&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;Mark,&nbsp;should&nbsp;the&nbsp;following&nbsp;code&nbsp;work:&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;#include&nbsp;&lt;vector&gt;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;using&nbsp;std::vector;&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;struct&nbsp;Foo&nbsp;{&nbsp;};&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;void&nbsp;main()&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;{&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;&nbsp;&nbsp;vector&lt;Foo*&gt;&nbsp;table(100,0);&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;}&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;No,&nbsp;that&nbsp;code&nbsp;is&nbsp;broken.&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;The&nbsp;problem&nbsp;is&nbsp;that&nbsp;there&nbsp;are&nbsp;two&nbsp;relevant&nbsp;constructors&nbsp;required&nbsp;by&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;the&nbsp;standard:&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;&nbsp;&nbsp;explicit&nbsp;vector(size_type&nbsp;n,&nbsp;const&nbsp;T&amp;&nbsp;value&nbsp;=&nbsp;T(),&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;Allocator&amp;&nbsp;=&nbsp;Allocator());&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;&nbsp;&nbsp;template&nbsp;&lt;class&nbsp;InputIterator&gt;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;&nbsp;&nbsp;vector(InputIterator&nbsp;first,&nbsp;InputIterator&nbsp;last,&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;Allocator&amp;&nbsp;=&nbsp;Allocator());&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
&lt;BR&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;The&nbsp;template&nbsp;clearly&nbsp;matches,&nbsp;with&nbsp;InputIterator&nbsp;=&nbsp;`int'.&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;The&nbsp;other&nbsp;case&nbsp;requires&nbsp;two&nbsp;conversionts&nbsp;&quot;int&nbsp;-&gt;&nbsp;size_t&quot;&nbsp;and&nbsp;&quot;int&nbsp;-&gt;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;Foo*&quot;.&nbsp;&nbsp;Those&nbsp;are&nbsp;both&nbsp;&quot;Promotions&quot;&nbsp;according&nbsp;to&nbsp;the&nbsp;overloading&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;rules,&nbsp;as&nbsp;opposed&nbsp;to&nbsp;&quot;Exact&nbsp;Matches&quot;,&nbsp;so&nbsp;the&nbsp;template&nbsp;case&nbsp;wins.&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;BTW,&nbsp;does&nbsp;gcc's&nbsp;STL&nbsp;not&nbsp;have&nbsp;a&nbsp;vector&lt;T*&gt;&nbsp;specialization&nbsp;that&nbsp;implements&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;everything&nbsp;with&nbsp;a&nbsp;void*?&nbsp;I&nbsp;thought&nbsp;this&nbsp;was&nbsp;fairly&nbsp;common,&nbsp;but&nbsp;the&nbsp;above&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;makes&nbsp;it&nbsp;look&nbsp;like&nbsp;it&nbsp;is&nbsp;instantiating&nbsp;things&nbsp;specific&nbsp;for&nbsp;Foo*.&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;You're&nbsp;correct&nbsp;on&nbsp;both&nbsp;points.&nbsp;&nbsp;GCC's&nbsp;implementation&nbsp;could/should&nbsp;be&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;optimized&nbsp;to&nbsp;ue&nbsp;less&nbsp;code&nbsp;space&nbsp;by&nbsp;collapsing&nbsp;some&nbsp;common&nbsp;types&nbsp;in&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;this&nbsp;way.&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;By&nbsp;the&nbsp;way,&nbsp;you&nbsp;might&nbsp;as&nbsp;well&nbsp;ask&nbsp;these&nbsp;questions&nbsp;on&nbsp;pooma-dev;&nbsp;I&nbsp;bet&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;you're&nbsp;not&nbsp;the&nbsp;only&nbsp;one&nbsp;that&nbsp;would&nbsp;benefit&nbsp;from&nbsp;picking&nbsp;up&nbsp;a&nbsp;few&nbsp;more&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;bits&nbsp;of&nbsp;C++&nbsp;arcana.&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;--&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;Mark&nbsp;Mitchell&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mark@codesourcery.com&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;CodeSourcery,&nbsp;LLC&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;A&nbsp;HREF=&quot;http://www.codesourcery.com&quot;&nbsp;TARGET=&quot;_blank&quot;&gt;http://www.codesourcery.com&lt;/A&gt;&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;/BODY&gt;<br>
&lt;/HTML&gt;
</tt>
