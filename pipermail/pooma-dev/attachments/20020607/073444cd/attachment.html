<tt>
&lt;!DOCTYPE&nbsp;HTML&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;HTML&nbsp;3.2//EN&quot;&gt;<br>
&lt;HTML&gt;<br>
&lt;HEAD&gt;<br>
&lt;META&nbsp;HTTP-EQUIV=&quot;Content-Type&quot;&nbsp;CONTENT=&quot;text/html;&nbsp;charset=us-ascii&quot;&gt;<br>
&lt;META&nbsp;NAME=&quot;Generator&quot;&nbsp;CONTENT=&quot;MS&nbsp;Exchange&nbsp;Server&nbsp;version&nbsp;5.5.2653.12&quot;&gt;<br>
&lt;TITLE&gt;RE:&nbsp;[pooma-dev]&nbsp;Bug&nbsp;in&nbsp;field&nbsp;dependencies?&lt;/TITLE&gt;<br>
&lt;/HEAD&gt;<br>
&lt;BODY&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;This&nbsp;is&nbsp;the&nbsp;intended&nbsp;behavior.&nbsp;&nbsp;The&nbsp;semantics&nbsp;you&nbsp;suggest&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;would&nbsp;be&nbsp;much&nbsp;better&nbsp;for&nbsp;the&nbsp;usability&nbsp;of&nbsp;Pooma,&nbsp;but&nbsp;we&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;forced&nbsp;this&nbsp;issue&nbsp;on&nbsp;the&nbsp;user&nbsp;for&nbsp;efficiency&nbsp;reasons.&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;Consider:&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;rh.all()&nbsp;=&nbsp;1.0;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;for&nbsp;(i&nbsp;=&nbsp;0;...)&nbsp;for&nbsp;(j=0;...)&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;rh(i,&nbsp;j)&nbsp;=&nbsp;10.0;&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;At&nbsp;every&nbsp;step&nbsp;in&nbsp;the&nbsp;loop,&nbsp;we&nbsp;would&nbsp;have&nbsp;to&nbsp;call&nbsp;the&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;evaluator&nbsp;to&nbsp;check&nbsp;if&nbsp;there&nbsp;are&nbsp;outstanding&nbsp;expressions.&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;Actually,&nbsp;this&nbsp;might&nbsp;not&nbsp;be&nbsp;so&nbsp;bad,&nbsp;but&nbsp;we&nbsp;implement&nbsp;our&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;inner&nbsp;loops&nbsp;for&nbsp;expression&nbsp;evaluation&nbsp;with&nbsp;the&nbsp;same&nbsp;array&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;operator()(int,&nbsp;int)&nbsp;so&nbsp;we&nbsp;would&nbsp;have&nbsp;to&nbsp;rethink&nbsp;the&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;implementation&nbsp;of&nbsp;expression&nbsp;evaluation.&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;We&nbsp;have&nbsp;the&nbsp;command-line&nbsp;option&nbsp;--pooma-blocking-expressions&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;(and&nbsp;a&nbsp;function&nbsp;call,&nbsp;Pooma::blockingExpressions(true)&nbsp;I&nbsp;think...)&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;that&nbsp;force&nbsp;evaluation&nbsp;after&nbsp;every&nbsp;statement.&nbsp;&nbsp;Turning&nbsp;this&nbsp;option&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;on&nbsp;enforces&nbsp;correctness&nbsp;at&nbsp;the&nbsp;expense&nbsp;of&nbsp;some&nbsp;parallelism.&nbsp;&nbsp;For&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;example:&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;a&nbsp;=&nbsp;b;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;c&nbsp;=&nbsp;d;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;Pooma::blockAndEvaluate();&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;cout&nbsp;&lt;&lt;&nbsp;a(5)&nbsp;&lt;&lt;&nbsp;c(5)&nbsp;&lt;&lt;&nbsp;endl;&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;In&nbsp;this&nbsp;example,&nbsp;we&nbsp;can&nbsp;evaluate&nbsp;parts&nbsp;of&nbsp;the&nbsp;two&nbsp;expressions&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;concurrently&nbsp;since&nbsp;they&nbsp;are&nbsp;independent&nbsp;of&nbsp;each&nbsp;other.&nbsp;&nbsp;With&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;blocking&nbsp;expressions&nbsp;turned&nbsp;on,&nbsp;all&nbsp;of&nbsp;the&nbsp;first&nbsp;statement&nbsp;must&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;be&nbsp;evaluated&nbsp;before&nbsp;the&nbsp;second.&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;With&nbsp;blocking&nbsp;expressions&nbsp;turned&nbsp;off,&nbsp;the&nbsp;user&nbsp;if&nbsp;forced&nbsp;to&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;act&nbsp;like&nbsp;a&nbsp;compiler&nbsp;and&nbsp;determine&nbsp;where&nbsp;the&nbsp;blockAndEvaluate()&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;calls&nbsp;are&nbsp;necessary.&nbsp;&nbsp;(Any&nbsp;time&nbsp;you&nbsp;assign&nbsp;to&nbsp;or&nbsp;read&nbsp;from&nbsp;an&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;array&nbsp;which&nbsp;may&nbsp;have&nbsp;outstanding&nbsp;evaluation&nbsp;work.)&nbsp;&nbsp;I&nbsp;agree&nbsp;that&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;this&nbsp;is&nbsp;a&nbsp;bad&nbsp;interface&nbsp;choice.&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;&nbsp;&nbsp;Stephen&nbsp;Smith&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;-----Original&nbsp;Message-----&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;From:&nbsp;Richard&nbsp;Guenther&nbsp;[&lt;A&nbsp;HREF=&quot;mailto:rguenth@tat.physik.uni-tuebingen.de&quot;&gt;mailto:rguenth@tat.physik.uni-tuebingen.de&lt;/A&gt;]&nbsp;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;Sent:&nbsp;Friday,&nbsp;June&nbsp;07,&nbsp;2002&nbsp;3:28&nbsp;AM&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;To:&nbsp;pooma-dev@pooma.codesourcery.com&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;Subject:&nbsp;[pooma-dev]&nbsp;Bug&nbsp;in&nbsp;field&nbsp;dependencies?&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;Hi!&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;If&nbsp;I&nbsp;have&nbsp;a&nbsp;2d&nbsp;Field&nbsp;and&nbsp;do&nbsp;something&nbsp;like&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;rh.all()&nbsp;=&nbsp;1.0;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;rh(0,&nbsp;0)&nbsp;=&nbsp;10.0;&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;I'll&nbsp;end&nbsp;up&nbsp;with&nbsp;rh&nbsp;set&nbsp;to&nbsp;1.0&nbsp;everywhere&nbsp;-&nbsp;if&nbsp;I&nbsp;insert&nbsp;a&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;Pooma::blockAndEvaluate()&nbsp;inbetween&nbsp;the&nbsp;two&nbsp;assignments,&nbsp;it&nbsp;works&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;as&nbsp;expected.&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;Is&nbsp;this&nbsp;intended&nbsp;behavior&nbsp;or&nbsp;is&nbsp;it&nbsp;a&nbsp;bug?&nbsp;I'd&nbsp;think&nbsp;assigning&nbsp;to&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;rh(0,&nbsp;0)&nbsp;should&nbsp;trigger&nbsp;the&nbsp;assignment&nbsp;to&nbsp;rh.all()&nbsp;to&nbsp;complete.&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;Thanks,&nbsp;Richard.&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;--&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;Richard&nbsp;Guenther&nbsp;&lt;richard.guenther@uni-tuebingen.de&gt;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;WWW:&nbsp;&lt;A&nbsp;HREF=&quot;http://www.tat.physik.uni-tuebingen.de/~rguenth/&quot;&nbsp;TARGET=&quot;_blank&quot;&gt;http://www.tat.physik.uni-tuebingen.de/~rguenth/&lt;/A&gt;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;The&nbsp;GLAME&nbsp;Project:&nbsp;&lt;A&nbsp;HREF=&quot;http://www.glame.de/&quot;&nbsp;TARGET=&quot;_blank&quot;&gt;http://www.glame.de/&lt;/A&gt;&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;/BODY&gt;<br>
&lt;/HTML&gt;
</tt>
