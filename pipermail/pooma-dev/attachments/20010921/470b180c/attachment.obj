Index: Messaging.h===================================================================RCS file: /home/pooma/Repository/r2/src/Tulip/Messaging.h,vretrieving revision 1.5diff -p -c -2 -r1.5 Messaging.h*** Messaging.h 2001/09/13 20:41:04     1.5--- Messaging.h 2001/09/21 16:57:02****************** 29,35 ****  //-----------------------------------------------------------------------------  // Class:- // RemoteReader<T>  // TagGenerator- // OutstandingMessages  //-----------------------------------------------------------------------------  --- 29,33 ----*************** private:*** 122,125 ****--- 120,195 ----    std::vector<int> receive_m;  };+ + + //-----------------------------------------------------------------------------+ //+ // Cheetah::Serialize<CHEETAH, std::vector<T> >+ //+ // This class is used to serialize std::vector<T> objects. First the size+ // and then the elements are sent.+ //+ //-----------------------------------------------------------------------------+ + #if POOMA_CHEETAH+ + namespace Cheetah {+ +   template<class T>+   class Serialize<CHEETAH, std::vector<T> >+   {+   public:+ +     static int size(const std::vector<T> &v)+     {+       int nBytes = Serialize<CHEETAH, Size_t>::size(v.size());+       for (int i = 0; i < v.size(); i++)+       nBytes += Serialize<CHEETAH, T>::size(v[i]);+       +       return nBytes;+     }+     +     static int pack(const std::vector<T> &v, char *buffer)+     {+       int nBytes = Serialize<CHEETAH, Size_t>::pack(v.size(), buffer); +       for (int i = 0; i < v.size(); i++)+       {+         T vi = v[i];+         nBytes += Serialize<CHEETAH, T>::pack(vi, buffer + nBytes); +       }+       +       return nBytes;+     }+     +     static int unpack(std::vector<T>* &vp, char *buffer)+     {+       Size_t *psize;+       T val, *pval = &val;+       +       int nBytes = Serialize<CHEETAH, Size_t>::unpack(psize, buffer);+       vp = new std::vector<T>;+       vp->reserve(*psize);+       for (int i = 0; i < *psize; i++)+       {+         nBytes += Serialize<CHEETAH, T>::unpack(pval, buffer + nBytes); +         vp->push_back(*pval);+       }+ +       return nBytes;+     }+     +     static inline void cleanup(std::vector<T> *vp)+     {+       delete vp;+     }+     +   private:+     +     typedef typename std::vector<T>::size_type Size_t;+     +   };+   + } // namespace Cheetah+ + #endif // #if POOMA_CHEETAH    namespace Pooma {cvs server: Diffing testsIndex: tests/GridMessageTest.cpp===================================================================RCS file: /home/pooma/Repository/r2/src/Tulip/tests/GridMessageTest.cpp,vretrieving revision 1.5diff -p -c -2 -r1.5 GridMessageTest.cpp*** tests/GridMessageTest.cpp   2000/05/03 19:29:13     1.5--- tests/GridMessageTest.cpp   2001/09/21 16:57:02*************** int main(int argc, char *argv[])*** 113,117 ****    handler->request(fromContext, msgtag, receiveGrid, &bar);  !   while (!gotIt) Pooma::pollMessages();      BARRIER;--- 113,117 ----    handler->request(fromContext, msgtag, receiveGrid, &bar);  !   while (!gotIt) Pooma::poll();      BARRIER;Index: tests/makefile===================================================================RCS file: /home/pooma/Repository/r2/src/Tulip/tests/makefile,vretrieving revision 1.6diff -p -c -2 -r1.6 makefile*** tests/makefile      2000/07/21 18:29:22     1.6--- tests/makefile      2001/09/21 16:57:02*************** default:: tests*** 37,41 ****    tests:: ReduceOverContextsTest GridMessageTest \!       GridBroadcastTest PatchSizeSyncerTest    run: run_tests--- 37,42 ----    tests:: ReduceOverContextsTest GridMessageTest \!       GridBroadcastTest PatchSizeSyncerTest \!       VectorBroadcastTest    run: run_tests*************** run_tests: tests*** 51,54 ****--- 52,57 ----        $(MPIRUN) $(ODIR)/PatchSizeSyncerTest    $(TSTOPTS) \        1>PatchSyncer.out 2>&1+       $(MPIRUN) $(ODIR)/VectorBroadcastTest    $(TSTOPTS) \+       1>VectorBroadcastTest.out 2>&1    .PHONY: ReduceOverContextsTest*************** PatchSizeSyncerTest:: $(ODIR)/PatchSizeS*** 78,81 ****--- 81,91 ----    $(ODIR)/PatchSizeSyncerTest: $(ODIR)/PatchSizeSyncerTest.o+       $(LinkToSuite)+ + .PHONY: VectorBroadcastTest+ + VectorBroadcastTest:: $(ODIR)/VectorBroadcastTest+ + $(ODIR)/VectorBroadcastTest: $(ODIR)/VectorBroadcastTest.o        $(LinkToSuite)  