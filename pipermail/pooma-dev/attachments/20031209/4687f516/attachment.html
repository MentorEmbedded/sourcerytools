<tt>
&lt;!DOCTYPE&nbsp;HTML&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;HTML&nbsp;3.2//EN&quot;&gt;<br>
&lt;HTML&gt;<br>
&lt;HEAD&gt;<br>
&lt;META&nbsp;HTTP-EQUIV=&quot;Content-Type&quot;&nbsp;CONTENT=&quot;text/html;&nbsp;charset=us-ascii&quot;&gt;<br>
&lt;META&nbsp;NAME=&quot;Generator&quot;&nbsp;CONTENT=&quot;MS&nbsp;Exchange&nbsp;Server&nbsp;version&nbsp;5.5.2653.12&quot;&gt;<br>
&lt;TITLE&gt;RE:&nbsp;[pooma-dev]&nbsp;[Q]&nbsp;ReceiveIterate&nbsp;asymmetry&nbsp;bug?&lt;/TITLE&gt;<br>
&lt;/HEAD&gt;<br>
&lt;BODY&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;Hi&nbsp;Richard,&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;I'm&nbsp;interested,&nbsp;but&nbsp;very&nbsp;busy&nbsp;at&nbsp;the&nbsp;moment.&nbsp;This&nbsp;stuff&nbsp;was&nbsp;tested&nbsp;fairly&nbsp;strenuously&nbsp;back&nbsp;in&nbsp;'97,&nbsp;including&nbsp;purified,&nbsp;so&nbsp;if&nbsp;there&nbsp;is&nbsp;a&nbsp;resource&nbsp;bug,&nbsp;it&nbsp;has&nbsp;snuck&nbsp;in&nbsp;since.&nbsp;Unfortunately,&nbsp;the&nbsp;out-of-order&nbsp;execution&nbsp;details&nbsp;involving&nbsp;multiple&nbsp;contexts&nbsp;are&nbsp;more&nbsp;than&nbsp;a&nbsp;little&nbsp;rusty&nbsp;in&nbsp;my&nbsp;brain,&nbsp;and&nbsp;I&nbsp;don't&nbsp;see&nbsp;that&nbsp;I'll&nbsp;have&nbsp;time&nbsp;to&nbsp;review&nbsp;this&nbsp;soon.&nbsp;I'm&nbsp;pretty&nbsp;sure&nbsp;that&nbsp;out-of-order&nbsp;handling&nbsp;of&nbsp;these&nbsp;messages&nbsp;is&nbsp;critical&nbsp;if&nbsp;you&nbsp;want&nbsp;to&nbsp;get&nbsp;any&nbsp;advantage&nbsp;of&nbsp;out-of-order&nbsp;execution.&nbsp;&lt;/FONT&gt;&lt;/P&gt;<br>
<br>
&lt;P&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;FONT&nbsp;SIZE=2&gt;Jim&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
&lt;BR&gt;<br>
&lt;BR&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;-----Original&nbsp;Message-----&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;From:&nbsp;Richard&nbsp;Guenther&nbsp;[&lt;A&nbsp;HREF=&quot;mailto:rguenth@tat.physik.uni-tuebingen.de&quot;&gt;mailto:rguenth@tat.physik.uni-tuebingen.de&lt;/A&gt;]&nbsp;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;Sent:&nbsp;Tuesday,&nbsp;December&nbsp;09,&nbsp;2003&nbsp;3:41&nbsp;AM&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;To:&nbsp;pooma-dev@pooma.codesourcery.com&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;Subject:&nbsp;Re:&nbsp;[pooma-dev]&nbsp;[Q]&nbsp;ReceiveIterate&nbsp;asymmetry&nbsp;bug?&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;It&nbsp;seems&nbsp;nobody&nbsp;is&nbsp;interested&nbsp;in&nbsp;this&nbsp;-&nbsp;but&nbsp;to&nbsp;summarize,&nbsp;with&nbsp;messaging&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;using&nbsp;Cheetah&nbsp;the&nbsp;message&nbsp;requesting&nbsp;machinery&nbsp;in&nbsp;Tulip/SendReceive.h&nbsp;uses&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;possibly&nbsp;stale&nbsp;memory&nbsp;if&nbsp;reordering&nbsp;iterates&nbsp;is&nbsp;allowed&nbsp;(which&nbsp;is&nbsp;the&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;default&nbsp;for&nbsp;--messaging&nbsp;config).&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;A&nbsp;patch&nbsp;like&nbsp;the&nbsp;following&nbsp;is&nbsp;needed&nbsp;(which&nbsp;basically&nbsp;kills&nbsp;out&nbsp;of&nbsp;order&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;processing&nbsp;of&nbsp;these&nbsp;messages),&nbsp;or&nbsp;a&nbsp;more&nbsp;elaborate&nbsp;fix&nbsp;like&nbsp;constructing&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;the&nbsp;needed&nbsp;view&nbsp;in&nbsp;extra&nbsp;memory&nbsp;and&nbsp;freeing&nbsp;that&nbsp;inside&nbsp;the&nbsp;matching&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;handler.&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;Richard.&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;=====&nbsp;SendReceive.h&nbsp;1.4&nbsp;vs&nbsp;edited&nbsp;=====&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;---&nbsp;1.4/r2/src/Tulip/SendReceive.h&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Tue&nbsp;Dec&nbsp;&nbsp;2&nbsp;18:40:12&nbsp;2003&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;+++&nbsp;edited/SendReceive.h&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Tue&nbsp;Dec&nbsp;&nbsp;9&nbsp;11:36:34&nbsp;2003&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;@@&nbsp;-134,7&nbsp;+134,7&nbsp;@@&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;*&nbsp;ReceiveIterate&nbsp;requests&nbsp;a&nbsp;write&nbsp;lock&nbsp;on&nbsp;a&nbsp;piece&nbsp;of&nbsp;data.&nbsp;&nbsp;When&nbsp;that&nbsp;lock&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;*&nbsp;is&nbsp;granted,&nbsp;we&nbsp;register&nbsp;the&nbsp;data&nbsp;with&nbsp;the&nbsp;cheetah&nbsp;matching&nbsp;handler&nbsp;which&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;*&nbsp;will&nbsp;fill&nbsp;the&nbsp;block&nbsp;when&nbsp;a&nbsp;message&nbsp;arrives.&nbsp;&nbsp;The&nbsp;write&nbsp;lock&nbsp;is&nbsp;released&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;*&nbsp;by&nbsp;the&nbsp;matching&nbsp;handler.&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;+&nbsp;*&nbsp;by&nbsp;the&nbsp;destructor&nbsp;after&nbsp;ensuring&nbsp;we're&nbsp;finished&nbsp;with&nbsp;processing.&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;*/&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;template&lt;class&nbsp;View,&nbsp;class&nbsp;IncomingView&gt;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;@@&nbsp;-166,65&nbsp;+166,41&nbsp;@@&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;engineFunctor(view,&nbsp;writeReq);&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Pooma::addIncomingMessage();&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;+&nbsp;&nbsp;&nbsp;&nbsp;ready_m&nbsp;=&nbsp;false;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;&nbsp;}&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;&nbsp;virtual&nbsp;~ReceiveIterate()&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;&nbsp;{&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;}&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;//&nbsp;If&nbsp;we're&nbsp;using&nbsp;cheetah,&nbsp;but&nbsp;don't&nbsp;support&nbsp;out-of-order&nbsp;execution,&nbsp;then&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;//&nbsp;the&nbsp;run&nbsp;method&nbsp;of&nbsp;this&nbsp;iterate&nbsp;must&nbsp;block&nbsp;until&nbsp;the&nbsp;message&nbsp;has&nbsp;been&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;//&nbsp;received.&nbsp;&nbsp;Unlike&nbsp;typical&nbsp;iterates,&nbsp;the&nbsp;work&nbsp;implied&nbsp;by&nbsp;this&nbsp;iterate&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;//&nbsp;isn't&nbsp;actually&nbsp;performed&nbsp;in&nbsp;the&nbsp;run&nbsp;method.&nbsp;&nbsp;The&nbsp;run&nbsp;method&nbsp;merely&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;//&nbsp;registers&nbsp;a&nbsp;method&nbsp;that&nbsp;gets&nbsp;handled&nbsp;by&nbsp;cheetah&nbsp;when&nbsp;the&nbsp;appropriate&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;//&nbsp;message&nbsp;arrives.&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-#if&nbsp;!POOMA_REORDER_ITERATES&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;bool&nbsp;ready_m;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;static&nbsp;void&nbsp;handle(This_t&nbsp;*me,&nbsp;IncomingView&nbsp;&amp;viewMessage)&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;{&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;&nbsp;&nbsp;apply(me-&gt;view_m,&nbsp;viewMessage);&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;&nbsp;&nbsp;me-&gt;ready_m&nbsp;=&nbsp;true;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;}&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;virtual&nbsp;void&nbsp;run()&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;{&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;&nbsp;&nbsp;ready_m&nbsp;=&nbsp;false;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;&nbsp;&nbsp;Pooma::remoteEngineHandler()-&gt;request(fromContext_m,&nbsp;tag_m,&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This_t::handle,&nbsp;this);&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;+&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Be&nbsp;sure&nbsp;we&nbsp;have&nbsp;received&nbsp;the&nbsp;data.&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(!ready_m)&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;&nbsp;&nbsp;{&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Pooma::poll();&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;&nbsp;&nbsp;}&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;+&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;+&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Release&nbsp;the&nbsp;received&nbsp;block:&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;+&nbsp;&nbsp;&nbsp;&nbsp;DataObjectRequest&lt;WriteRelease&gt;&nbsp;writeReq;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;+&nbsp;&nbsp;&nbsp;&nbsp;engineFunctor(viewLocal,&nbsp;writeReq);&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;+&nbsp;&nbsp;&nbsp;&nbsp;Pooma::gotIncomingMessage();&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;&nbsp;}&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;-#else&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;+&nbsp;&nbsp;//&nbsp;Unlike&nbsp;typical&nbsp;iterates,&nbsp;the&nbsp;work&nbsp;implied&nbsp;by&nbsp;this&nbsp;iterate&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;+&nbsp;&nbsp;//&nbsp;isn't&nbsp;actually&nbsp;performed&nbsp;in&nbsp;the&nbsp;run&nbsp;method.&nbsp;&nbsp;The&nbsp;run&nbsp;method&nbsp;merely&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;+&nbsp;&nbsp;//&nbsp;registers&nbsp;a&nbsp;method&nbsp;that&nbsp;gets&nbsp;handled&nbsp;by&nbsp;cheetah&nbsp;when&nbsp;the&nbsp;appropriate&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;+&nbsp;&nbsp;//&nbsp;message&nbsp;arrives.&nbsp;So&nbsp;we&nbsp;need&nbsp;to&nbsp;be&nbsp;careful&nbsp;we&nbsp;finished&nbsp;processing&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;+&nbsp;&nbsp;//&nbsp;before&nbsp;we&nbsp;destruct&nbsp;the&nbsp;iterate.&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;&nbsp;virtual&nbsp;void&nbsp;run()&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;&nbsp;{&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Pooma::remoteEngineHandler()-&gt;request(fromContext_m,&nbsp;tag_m,&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This_t::apply,&nbsp;view_m);&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This_t::apply,&nbsp;this);&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;&nbsp;}&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;-#endif&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;private:&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;static&nbsp;void&nbsp;apply(const&nbsp;View&nbsp;&amp;viewLocal,&nbsp;IncomingView&nbsp;&amp;viewMessage)&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;+&nbsp;&nbsp;static&nbsp;void&nbsp;apply(This_t&nbsp;*me,&nbsp;IncomingView&nbsp;&amp;viewMessage)&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;&nbsp;{&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;For&nbsp;now,&nbsp;we&nbsp;just&nbsp;copy&nbsp;the&nbsp;message&nbsp;into&nbsp;the&nbsp;brick&nbsp;accepting&nbsp;the&nbsp;data.&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;&nbsp;&nbsp;KernelEvaluator&lt;InlineKernelTag&gt;::evaluate(viewLocal,&nbsp;OpAssign(),&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;+&nbsp;&nbsp;&nbsp;&nbsp;KernelEvaluator&lt;InlineKernelTag&gt;::evaluate(me-&gt;view_m,&nbsp;OpAssign(),&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;viewMessage);&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Release&nbsp;the&nbsp;received&nbsp;block:&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;&nbsp;&nbsp;DataObjectRequest&lt;WriteRelease&gt;&nbsp;writeReq;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;&nbsp;&nbsp;engineFunctor(viewLocal,&nbsp;writeReq);&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;-&nbsp;&nbsp;&nbsp;&nbsp;Pooma::gotIncomingMessage();&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;+&nbsp;&nbsp;&nbsp;&nbsp;me-&gt;ready_m&nbsp;=&nbsp;true;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;&nbsp;}&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;&nbsp;//&nbsp;Context&nbsp;we're&nbsp;sending&nbsp;the&nbsp;data&nbsp;to.&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;@@&nbsp;-239,6&nbsp;+215,10&nbsp;@@&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;&nbsp;//&nbsp;engine).;&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;&nbsp;View&nbsp;view_m;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;+&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;+&nbsp;&nbsp;//&nbsp;Flag&nbsp;if&nbsp;we&nbsp;have&nbsp;received&nbsp;the&nbsp;data.&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;+&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;+&nbsp;&nbsp;bool&nbsp;ready_m;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;};&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;/**&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;/BODY&gt;<br>
&lt;/HTML&gt;
</tt>
