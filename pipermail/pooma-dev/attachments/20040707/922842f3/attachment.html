<tt>
&lt;!DOCTYPE&nbsp;HTML&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;HTML&nbsp;3.2//EN&quot;&gt;<br>
&lt;HTML&gt;<br>
&lt;HEAD&gt;<br>
&lt;META&nbsp;HTTP-EQUIV=&quot;Content-Type&quot;&nbsp;CONTENT=&quot;text/html;&nbsp;charset=us-ascii&quot;&gt;<br>
&lt;META&nbsp;NAME=&quot;Generator&quot;&nbsp;CONTENT=&quot;MS&nbsp;Exchange&nbsp;Server&nbsp;version&nbsp;5.5.2653.12&quot;&gt;<br>
&lt;TITLE&gt;RE:&nbsp;[pooma-dev]&nbsp;[RFC]&nbsp;Specialize&nbsp;(internal)&nbsp;guard&nbsp;cell&nbsp;handling,&nbsp;more&nbsp;data-flow&nbsp;analysis&lt;/TITLE&gt;<br>
&lt;/HEAD&gt;<br>
&lt;BODY&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;It's&nbsp;closing&nbsp;in&nbsp;on&nbsp;four&nbsp;years&nbsp;since&nbsp;the&nbsp;POOMA&nbsp;team&nbsp;left&nbsp;the&nbsp;lab,&nbsp;so&nbsp;memory&nbsp;is&nbsp;rusting&nbsp;in&nbsp;this&nbsp;regard,&nbsp;but...&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;Smarts&nbsp;did&nbsp;apply&nbsp;data-flow&nbsp;to&nbsp;filling&nbsp;the&nbsp;guards.&nbsp;However,&nbsp;it&nbsp;wasn't&nbsp;perfectly&nbsp;efficient&nbsp;as&nbsp;there&nbsp;was&nbsp;only&nbsp;one&nbsp;Smarts&nbsp;DataObject&nbsp;associated&nbsp;with&nbsp;each&nbsp;patch.&nbsp;More&nbsp;parallelism&nbsp;could&nbsp;have&nbsp;been&nbsp;achieved&nbsp;by&nbsp;having&nbsp;a&nbsp;data&nbsp;object&nbsp;for&nbsp;each&nbsp;guard&nbsp;region,&nbsp;and&nbsp;this&nbsp;idea&nbsp;was&nbsp;thrown&nbsp;around,&nbsp;but&nbsp;never&nbsp;seriously&nbsp;studied.&nbsp;(This&nbsp;would&nbsp;allow&nbsp;multiple&nbsp;parts&nbsp;of&nbsp;the&nbsp;brick&nbsp;to&nbsp;be&nbsp;written&nbsp;into&nbsp;in&nbsp;parallel&nbsp;-&nbsp;obviously&nbsp;care&nbsp;would&nbsp;have&nbsp;to&nbsp;be&nbsp;taken&nbsp;in&nbsp;implementing&nbsp;this.)&nbsp;&lt;/FONT&gt;&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;We&nbsp;also&nbsp;discussed&nbsp;aggregating&nbsp;all&nbsp;of&nbsp;the&nbsp;guard&nbsp;updates&nbsp;for&nbsp;a&nbsp;single&nbsp;brick&nbsp;into&nbsp;a&nbsp;single&nbsp;iterate&nbsp;-&nbsp;the&nbsp;current&nbsp;behavior&nbsp;creates&nbsp;lots&nbsp;of&nbsp;small&nbsp;iterates&nbsp;and&nbsp;the&nbsp;overhead&nbsp;can&nbsp;kill&nbsp;you.&nbsp;This&nbsp;may&nbsp;be&nbsp;more&nbsp;along&nbsp;the&nbsp;lines&nbsp;of&nbsp;what&nbsp;you're&nbsp;considering.&lt;/FONT&gt;&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;I&nbsp;personally&nbsp;don't&nbsp;like&nbsp;the&nbsp;idea&nbsp;of&nbsp;putting&nbsp;anything&nbsp;to&nbsp;do&nbsp;with&nbsp;guards,&nbsp;dirty-ness,&nbsp;etc&nbsp;in&nbsp;BrickEngine.&nbsp;It&nbsp;is&nbsp;a&nbsp;clean&nbsp;abstraction.&nbsp;If&nbsp;you&nbsp;need&nbsp;an&nbsp;enhanced&nbsp;abstraction&nbsp;for&nbsp;MultiPatchEngine&nbsp;to&nbsp;work&nbsp;with,&nbsp;then&nbsp;I'd&nbsp;build&nbsp;it&nbsp;on&nbsp;top&nbsp;of&nbsp;BrickEngine.&nbsp;That's&nbsp;my&nbsp;2&nbsp;pfennigs&nbsp;anyway.&nbsp;:)&lt;/FONT&gt;&lt;/P&gt;<br>
<br>
&lt;P&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;FONT&nbsp;SIZE=2&gt;Jim&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;------------------------------------------------------------------------&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;James&nbsp;A.&nbsp;Crotinger&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;email:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jimc@numerix.com&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;NumeriX,&nbsp;LLC&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;phone:&nbsp;&nbsp;(505)&nbsp;424-4477&nbsp;x104&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;2960&nbsp;Rodeo&nbsp;Park&nbsp;Dr.&nbsp;W.&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;Santa&nbsp;Fe,&nbsp;NM&nbsp;87505&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
&lt;BR&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;-----Original&nbsp;Message-----&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;From:&nbsp;Richard&nbsp;Guenther&nbsp;[&lt;A&nbsp;HREF=&quot;mailto:rguenth@tat.physik.uni-tuebingen.de&quot;&gt;mailto:rguenth@tat.physik.uni-tuebingen.de&lt;/A&gt;]&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;Sent:&nbsp;Wednesday,&nbsp;July&nbsp;07,&nbsp;2004&nbsp;11:23&nbsp;AM&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;To:&nbsp;pooma-dev@pooma.codesourcery.com&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;Subject:&nbsp;[pooma-dev]&nbsp;[RFC]&nbsp;Specialize&nbsp;(internal)&nbsp;guard&nbsp;cell&nbsp;handling,&nbsp;more&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;data-flow&nbsp;analysis&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;I'm&nbsp;at&nbsp;the&nbsp;point&nbsp;thinking&nbsp;on&nbsp;how&nbsp;to&nbsp;improve&nbsp;MPI&nbsp;scalarization&nbsp;even&nbsp;more.&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;&nbsp;&nbsp;And&nbsp;again&nbsp;the&nbsp;obvious&nbsp;point&nbsp;is&nbsp;we're&nbsp;doing&nbsp;way&nbsp;too&nbsp;much&nbsp;(unnecessary)&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;communication.&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;The&nbsp;problem&nbsp;is&nbsp;we&nbsp;&quot;lower&quot;&nbsp;the&nbsp;representation&nbsp;of&nbsp;guard&nbsp;cells&nbsp;and&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;necessary&nbsp;updates&nbsp;of&nbsp;them&nbsp;too&nbsp;early&nbsp;(in&nbsp;the&nbsp;intersectors)&nbsp;and&nbsp;create&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;usual&nbsp;iterates&nbsp;out&nbsp;of&nbsp;them.&nbsp;&nbsp;A&nbsp;better&nbsp;approach&nbsp;would&nbsp;be&nbsp;to&nbsp;compute&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;necessary&nbsp;guards&nbsp;at&nbsp;intersection&nbsp;time&nbsp;only&nbsp;(as&nbsp;I&nbsp;introduced&nbsp;in&nbsp;the&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;previous&nbsp;performance&nbsp;improvement&nbsp;patches),&nbsp;_not_&nbsp;update&nbsp;them,&nbsp;but&nbsp;store&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;this&nbsp;information&nbsp;in&nbsp;the&nbsp;iterates.&nbsp;&nbsp;We&nbsp;can&nbsp;then,&nbsp;before&nbsp;finally&nbsp;issuing&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;the&nbsp;iterates,&nbsp;do&nbsp;data-flow&nbsp;analysis&nbsp;of&nbsp;the&nbsp;necessary&nbsp;guard&nbsp;cells&nbsp;and&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;insert&nbsp;optimal&nbsp;update&nbsp;iterates&nbsp;at&nbsp;optimal&nbsp;places&nbsp;(in&nbsp;principle).&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;As&nbsp;iterates&nbsp;are&nbsp;per-patch,&nbsp;in&nbsp;the&nbsp;process&nbsp;of&nbsp;getting&nbsp;the&nbsp;above&nbsp;done,&nbsp;I'd&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;suggest&nbsp;moving&nbsp;the&nbsp;dirty&nbsp;flag&nbsp;and&nbsp;its&nbsp;handling&nbsp;from&nbsp;the&nbsp;MultiPatchEngine&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;down&nbsp;to&nbsp;the&nbsp;BrickEngine,&nbsp;together&nbsp;with&nbsp;more&nbsp;accurate&nbsp;information&nbsp;about&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;the&nbsp;up-to-date-ness&nbsp;of&nbsp;the&nbsp;guards&nbsp;(use&nbsp;f.i.&nbsp;a&nbsp;GuardLayer&lt;&gt;&nbsp;to&nbsp;count&nbsp;the&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;up-to-date&nbsp;cells).&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;Were&nbsp;there&nbsp;any&nbsp;previous&nbsp;plans&nbsp;on&nbsp;improving&nbsp;this&nbsp;situation&nbsp;within&nbsp;POOMA?&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;&nbsp;&nbsp;Did&nbsp;you&nbsp;never&nbsp;experience&nbsp;performance&nbsp;problems&nbsp;with&nbsp;the&nbsp;communication?&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;&nbsp;&nbsp;How&nbsp;did&nbsp;SMARTS&nbsp;improve&nbsp;situation&nbsp;with&nbsp;the&nbsp;guard&nbsp;updates&nbsp;(did&nbsp;it?)?&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;Thanks&nbsp;for&nbsp;any&nbsp;input&nbsp;(before&nbsp;I&nbsp;start&nbsp;hacking&nbsp;this&nbsp;up)!&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&gt;&nbsp;Richard.&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;/BODY&gt;<br>
&lt;/HTML&gt;
</tt>
