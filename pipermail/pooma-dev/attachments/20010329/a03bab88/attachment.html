<tt>
&lt;!DOCTYPE&nbsp;HTML&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;HTML&nbsp;3.2//EN&quot;&gt;<br>
&lt;HTML&gt;<br>
&lt;HEAD&gt;<br>
&lt;META&nbsp;HTTP-EQUIV=&quot;Content-Type&quot;&nbsp;CONTENT=&quot;text/html;&nbsp;charset=iso-8859-1&quot;&gt;<br>
&lt;META&nbsp;NAME=&quot;Generator&quot;&nbsp;CONTENT=&quot;MS&nbsp;Exchange&nbsp;Server&nbsp;version&nbsp;5.5.2650.12&quot;&gt;<br>
&lt;TITLE&gt;RE:&nbsp;[pooma-dev]&nbsp;how&nbsp;does&nbsp;one&nbsp;do&nbsp;a&nbsp;reduce&lt;/TITLE&gt;<br>
&lt;/HEAD&gt;<br>
&lt;BODY&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;To&nbsp;answer&nbsp;the&nbsp;simple&nbsp;question&nbsp;first,&nbsp;Tulip&nbsp;is&nbsp;the&nbsp;old&nbsp;name&nbsp;for&nbsp;Cheetah,&nbsp;which&nbsp;is&nbsp;the&nbsp;messaging&nbsp;layer&nbsp;that&nbsp;r2&nbsp;sits&nbsp;on&nbsp;top&nbsp;of.&nbsp;Tulip&nbsp;was&nbsp;supposed&nbsp;to&nbsp;be&nbsp;renamed&nbsp;for&nbsp;the&nbsp;2.3&nbsp;release,&nbsp;but&nbsp;apparently&nbsp;that&nbsp;didn't&nbsp;happen.&lt;/FONT&gt;&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;Now,&nbsp;for&nbsp;reductions.&nbsp;The&nbsp;implementation&nbsp;is&nbsp;in&nbsp;Tulip/ReduceOverContexts.h.&nbsp;This&nbsp;is&nbsp;used&nbsp;in&nbsp;DynamicLayout.cmpl.cpp,&nbsp;for&nbsp;example,&nbsp;to&nbsp;globally&nbsp;check&nbsp;the&nbsp;dirty&nbsp;flag,&nbsp;etc.&nbsp;Here&nbsp;is&nbsp;an&nbsp;example:&lt;/FONT&gt;&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;typedef&nbsp;ReduceOverContexts&lt;int,&nbsp;OpAddAssign&gt;&nbsp;GlobalSum_t;&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;//&nbsp;Do&nbsp;a&nbsp;global&nbsp;reduction&nbsp;on&nbsp;the&nbsp;initialized&nbsp;and&nbsp;dirty&nbsp;flags&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;int&nbsp;globalInitialized;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;GlobalSum_t(int(initialized())).broadcast(globalInitialized);&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;Where&nbsp;initialized()&nbsp;returns&nbsp;the&nbsp;local&nbsp;value&nbsp;of&nbsp;the&nbsp;initialized&nbsp;field&nbsp;of&nbsp;the&nbsp;layout.&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;We&nbsp;probably&nbsp;could&nbsp;wrap&nbsp;this&nbsp;basic&nbsp;functionality&nbsp;in&nbsp;a&nbsp;template&nbsp;function.&nbsp;Something&nbsp;like&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;#include&nbsp;&quot;Tulip/ReduceOverContexts.h&quot;&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;namespace&nbsp;Pooma&nbsp;{&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;template&nbsp;&lt;class&nbsp;T,&nbsp;class&nbsp;ReductionOp&gt;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;reduce(T&nbsp;&amp;globalVal,&nbsp;const&nbsp;T&nbsp;&amp;localVal,&nbsp;ReductionOp)&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;{&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;&nbsp;&nbsp;typedef&nbsp;ReduceOverContexts&lt;T,&nbsp;ReductionOp&gt;&nbsp;Reducer_t;&nbsp;&nbsp;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;&nbsp;&nbsp;Reducer_t(localVal).broadcast(globalVal);&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;&nbsp;}&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;}&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;I&nbsp;haven't&nbsp;tested&nbsp;this,&nbsp;and&nbsp;it's&nbsp;been&nbsp;almost&nbsp;a&nbsp;year&nbsp;since&nbsp;I&nbsp;messed&nbsp;with&nbsp;any&nbsp;of&nbsp;this&nbsp;code,&nbsp;but&nbsp;I&nbsp;think&nbsp;something&nbsp;like&nbsp;this&nbsp;would&nbsp;make&nbsp;reductions&nbsp;a&nbsp;bit&nbsp;easier.&nbsp;I'd&nbsp;also&nbsp;like&nbsp;one&nbsp;the&nbsp;just&nbsp;does&nbsp;a&nbsp;global&nbsp;AND&nbsp;or&nbsp;OR&nbsp;of&nbsp;local&nbsp;bools.&nbsp;&lt;/FONT&gt;&lt;/P&gt;<br>
<br>
&lt;P&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;FONT&nbsp;SIZE=2&gt;Jim&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;---------------------------------------------------&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;James&nbsp;A.&nbsp;Crotinger&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;Software&nbsp;Research&nbsp;Scientist&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;Proximation,&nbsp;LLC&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;&nbsp;-----Original&nbsp;Message-----&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;From:&nbsp;&nbsp;&nbsp;Steve&nbsp;Nolen&nbsp;[&lt;A&nbsp;HREF=&quot;mailto:drnuke@lanl.gov&quot;&gt;mailto:drnuke@lanl.gov&lt;/A&gt;]&nbsp;&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;Sent:&nbsp;&nbsp;&nbsp;Thursday,&nbsp;March&nbsp;29,&nbsp;2001&nbsp;4:38&nbsp;PM&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;To:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Pooma&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;Subject:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[pooma-dev]&nbsp;how&nbsp;does&nbsp;one&nbsp;do&nbsp;a&nbsp;reduce&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
&lt;BR&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;i&nbsp;want&nbsp;to&nbsp;do&nbsp;a&nbsp;reduction&nbsp;operation&nbsp;over&nbsp;all&nbsp;the&nbsp;contexts&nbsp;looking&nbsp;for&nbsp;a&lt;/FONT&gt;<br>
&lt;BR&gt;&lt;FONT&nbsp;SIZE=2&gt;single&nbsp;double.&nbsp;&nbsp;in&nbsp;r1&nbsp;it&nbsp;was&nbsp;as&nbsp;simple&nbsp;as&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;reduce(&nbsp;TotalVal,&nbsp;LocalVal,&nbsp;OpAddAssign()&nbsp;);&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;how&nbsp;does&nbsp;this&nbsp;work&nbsp;in&nbsp;r2?&nbsp;&nbsp;what&nbsp;is&nbsp;tulip?&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;P&gt;&lt;FONT&nbsp;SIZE=2&gt;-steve&lt;/FONT&gt;<br>
&lt;/P&gt;<br>
<br>
&lt;/BODY&gt;<br>
&lt;/HTML&gt;
</tt>
