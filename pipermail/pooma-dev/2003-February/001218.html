<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [pooma-dev] KCC versus icc
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:pooma-dev%40codesourcery.com?Subject=Re%3A%20%5Bpooma-dev%5D%20KCC%20versus%20icc&In-Reply-To=%3CPine.LNX.4.44.0302262025490.1143-100000%40goofy%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001217.html">
   
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[pooma-dev] KCC versus icc</H1>
    <B>Richard Guenther</B> 
    <A HREF="mailto:pooma-dev%40codesourcery.com?Subject=Re%3A%20%5Bpooma-dev%5D%20KCC%20versus%20icc&In-Reply-To=%3CPine.LNX.4.44.0302262025490.1143-100000%40goofy%3E"
       TITLE="[pooma-dev] KCC versus icc">rguenth at tat.physik.uni-tuebingen.de
       </A><BR>
    <I>Wed Feb 26 19:27:12 UTC 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="001217.html">[pooma-dev] KCC versus icc
</A></li>
        
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1218">[ date ]</a>
              <a href="thread.html#1218">[ thread ]</a>
              <a href="subject.html#1218">[ subject ]</a>
              <a href="author.html#1218">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi!

I remember problems with the inliner, i.e. it refused to inline
some of the expression template machinery. You might want to search
for an option letting you tune the inlining behavior or try profile
directed optimizations. With standard -O3 icc is not always faster
than gcc3.2.2 with -O3.

Richard.

On Tue, 25 Feb 2003, Paul A. Renard wrote:

&gt;<i> Hope I'm asking the correct crowd...
</I>&gt;<i>
</I>&gt;<i> Given the following:
</I>&gt;<i>
</I>&gt;<i> &#160;const int N=128;
</I>&gt;<i> &#160;Array&lt;2,complex&lt;float&gt; &gt; u(N,N);
</I>&gt;<i> &#160;Iota&lt;2&gt;::Iota_t ij(iota(u.domain());
</I>&gt;<i> &#160;Iota&lt;2&gt;::Index_t I(ij.comp(0));
</I>&gt;<i> &#160;Iota&lt;2&gt;::Index_t J(ij.comp(1));
</I>&gt;<i> &#160;Array&lt;1,complex&lt;float&gt; &gt; cx(N), cy(N);
</I>&gt;<i>
</I>&gt;<i> &#160;// Values for u, cx, cy are filled elsewhere.
</I>&gt;<i>
</I>&gt;<i> &#160;// Then the following is called:
</I>&gt;<i> &#160;void compute(){
</I>&gt;<i> &#160; u *= cx(I)*cy(J);&#160;&#160;&#160; // runs 4X slower with icc than KCC
</I>&gt;<i> &#160;}
</I>&gt;<i>
</I>&gt;<i> &#160;When I time this routine, I find that it runs about 4X slower when compiled with
</I>&gt;<i> Intel's icc (Version 7, -O3 -DNOPAssert -DNOCTASSERT) than with KCC (version 4.0f,
</I>&gt;<i> +K3 -DNOPAssert, -DNOCTAssert).&#160; As expected, the KCC version runs as fast as
</I>&gt;<i> hand-written loops.
</I>&gt;<i>
</I>&gt;<i> Do others observe this same sluggish behavior with icc?&#160; Am I missing some obvious
</I>&gt;<i> compile flag?&#160;
</I>&gt;<i>
</I>&gt;<i> thanks
</I>&gt;<i> Paul
</I>&gt;<i>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001217.html">[pooma-dev] KCC versus icc
</A></li>
	
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1218">[ date ]</a>
              <a href="thread.html#1218">[ thread ]</a>
              <a href="subject.html#1218">[ subject ]</a>
              <a href="author.html#1218">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://sourcerytools.com/cgi-bin/mailman/listinfo/pooma-dev">More information about the pooma-dev
mailing list</a><br>
</body></html>
