<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [pooma-dev] question for language gurus
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:pooma-dev%40codesourcery.com?Subject=Re%3A%20%5Bpooma-dev%5D%20question%20for%20language%20gurus&In-Reply-To=%3C3ADE062F.AFB14A1B%40cacr.caltech.edu%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000266.html">
   <LINK REL="Next"  HREF="000260.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[pooma-dev] question for language gurus</H1>
    <B>Julian Cummings</B> 
    <A HREF="mailto:pooma-dev%40codesourcery.com?Subject=Re%3A%20%5Bpooma-dev%5D%20question%20for%20language%20gurus&In-Reply-To=%3C3ADE062F.AFB14A1B%40cacr.caltech.edu%3E"
       TITLE="[pooma-dev] question for language gurus">cummings at cacr.caltech.edu
       </A><BR>
    <I>Wed Apr 18 21:25:03 UTC 2001</I>
    <P><UL>
        <LI>Previous message: <A HREF="000266.html">[pooma-dev] question for language gurus
</A></li>
        <LI>Next message: <A HREF="000260.html">question in Intersector.h
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#268">[ date ]</a>
              <a href="thread.html#268">[ thread ]</a>
              <a href="subject.html#268">[ subject ]</a>
              <a href="author.html#268">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Jeffrey Oldham wrote:

&gt;<i> On Tue, Apr 17, 2001 at 07:34:05PM -0700, Julian Cummings wrote:
</I>&gt;<i> &gt; Is the code at line 1421 of DynamicLayout.h legit?
</I>&gt;<i> &gt; This is a templated constructor for DynamicLayoutViewData
</I>&gt;<i> &gt; that takes a DynamicLayoutView object as its first argument.
</I>&gt;<i> &gt; The aCC compiler complains about calling member functions
</I>&gt;<i> &gt; of the DynamicLayoutView argument because the class has
</I>&gt;<i> &gt; not yet been defined (it is defined further down in the file)
</I>&gt;<i> &gt; and is thus incomplete.  The aCC compiler swallows the code
</I>&gt;<i> &gt; if I move this constructor definition outside the class definition
</I>&gt;<i> &gt; and below the definition of class DynamicLayoutView.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; The point of instantiation for this templated constructor clearly
</I>&gt;<i> &gt; happens later in some other file that is including DynamicLayout.h.
</I>&gt;<i> &gt; But since DynamicLayoutView is not a templated type, it is not
</I>&gt;<i> &gt; dependent on the template parameter for the constructor.  So perhaps
</I>&gt;<i> &gt; this is a legitimate error and the code must be moved out of line and
</I>&gt;<i> &gt; after the definition of DynamicLayoutView.  Comments?
</I>&gt;<i>
</I>&gt;<i> I prefer to make it compile without complaint.
</I>&gt;<i>
</I>&gt;<i> Thanks,
</I>&gt;<i> Jeffrey D. Oldham
</I>&gt;<i> <A HREF="http://sourcerytools.com/cgi-bin/mailman/listinfo/pooma-dev">oldham at codesourcery.com</A>
</I>
Well, OK.  But I don't know if any other compilers besides aCC are
annoyed by this.  I was really asking whether the code structure here
is legal or not.  BTW, I found another case of this sort of thing in
TensorElements.h.  There is a class Unwritable that is forward declared,
and then defined later on.  Before the definition of Unwritable, there
is a class template defined that uses the Unwritable constructor to
create and return an Unwritable object.  aCC complains unless the
definition of Unwritable is moved ahead of this class template definition.

Even if it is technically legal, would it be OK with folks to do this
amount of modest code reordering, so that a class definition is seen
before an object of the class is used in a class or function template?

Julian C.


--
Dr. Julian C. Cummings                       E-mail: <A HREF="http://sourcerytools.com/cgi-bin/mailman/listinfo/pooma-dev">cummings at cacr.caltech.edu</A>
California Institute of Technology           Phone:  626-395-2543
1200 E. California Blvd., Mail Code 158-79   Fax:    626-584-5917
Pasadena, CA 91125




</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000266.html">[pooma-dev] question for language gurus
</A></li>
	<LI>Next message: <A HREF="000260.html">question in Intersector.h
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#268">[ date ]</a>
              <a href="thread.html#268">[ thread ]</a>
              <a href="subject.html#268">[ subject ]</a>
              <a href="author.html#268">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://sourcerytools.com/cgi-bin/mailman/listinfo/pooma-dev">More information about the pooma-dev
mailing list</a><br>
</body></html>
