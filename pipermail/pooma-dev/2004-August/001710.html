<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [pooma-dev] [RFC] Removing workarounds for pre-ISO C++ compilers
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:pooma-dev%40codesourcery.com?Subject=Re%3A%20%5Bpooma-dev%5D%20%5BRFC%5D%20Removing%20workarounds%20for%20pre-ISO%20C%2B%2B%20compilers&In-Reply-To=%3C412376E4.6060907%40codesourcery.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001708.html">
   <LINK REL="Next"  HREF="001713.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[pooma-dev] [RFC] Removing workarounds for pre-ISO C++ compilers</H1>
    <B>Jeffrey D. Oldham</B> 
    <A HREF="mailto:pooma-dev%40codesourcery.com?Subject=Re%3A%20%5Bpooma-dev%5D%20%5BRFC%5D%20Removing%20workarounds%20for%20pre-ISO%20C%2B%2B%20compilers&In-Reply-To=%3C412376E4.6060907%40codesourcery.com%3E"
       TITLE="[pooma-dev] [RFC] Removing workarounds for pre-ISO C++ compilers">oldham at codesourcery.com
       </A><BR>
    <I>Wed Aug 18 15:33:56 UTC 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="001708.html">[pooma-dev] [RFC] Removing workarounds for pre-ISO C++ compilers
</A></li>
        <LI>Next message: <A HREF="001713.html">Compilers (was: Re: [pooma-dev] [RFC] Removing workarounds for pre-ISO C++ compilers)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1710">[ date ]</a>
              <a href="thread.html#1710">[ thread ]</a>
              <a href="subject.html#1710">[ subject ]</a>
              <a href="author.html#1710">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Richard Guenther wrote:

&gt;<i>On Tue, 17 Aug 2004, Jeffrey D. Oldham wrote:
</I>&gt;<i>
</I>&gt;<i>  
</I>&gt;<i>
</I>&gt;&gt;<i>I would prefer to keep the compiler list relatively short and containing
</I>&gt;&gt;<i>the most popular compliant compilers.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>Would you be willing to start modifying the README file for a release?
</I>&gt;&gt;<i>    
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>Like the following?
</I>&gt;<i>
</I>&gt;<i>Richard.
</I>&gt;<i>  
</I>&gt;<i>
</I>
Yes, like the following.  Thanks for making all these changes.  Perhaps, 
we should add one paragraph describing the purpose of Pooma to the very 
beginning of the README file.

POOMA is a C++ library supporting element-wise, data-parallel, and 
stencil-based physics computations using one or more processors.  The 
library automatically handles all interprocessor communication, 
obviating the need for any explicit communication code and enabling the 
same program to be run on one or thousands of processors.  The library 
supports high-level syntax close to mathematical or algorithmic syntax, 
easing the conversion from algorithms to code.  Pooma, originally 
developed at Los Alamos National Laboratory to support nuclear 
simulations, is now used throughout the physics establishment around the 
world.

&gt;<i>Index: README
</I>&gt;<i>===================================================================
</I>&gt;<i>RCS file: /home/pooma/Repository/r2/README,v
</I>&gt;<i>retrieving revision 1.63
</I>&gt;<i>diff -u -u -r1.63 README
</I>&gt;<i>--- README	11 Jul 2002 21:28:52 -0000	1.63
</I>&gt;<i>+++ README	18 Aug 2004 12:20:42 -0000
</I>&gt;<i>@@ -1,5 +1,35 @@
</I>&gt;<i> ////////////////////////////////////////////////////////////////////
</I>&gt;<i>
</I>&gt;<i>+RELEASE NOTES v2.4.1
</I>&gt;<i>+
</I>&gt;<i>+////////////////////////////////////////////////////////////////////
</I>&gt;<i>+
</I>&gt;<i>+Version 2.4.1 cleans up the codebase to be ISO C++ conformant.  As
</I>&gt;<i>+such an ISO C++ conforming compiler and standard library is recommended,
</I>&gt;<i>+but still compilers close to that may be supported (gcc 3.3 and Intel 7.2
</I>&gt;<i>+are).
</I>&gt;<i>+
</I>&gt;<i>+Most visible enhancements in this release are the addition of native
</I>&gt;<i>+MPI support for message passing parallelism and OpenMP support for
</I>&gt;<i>+thread parallelism.  MPI support was tested with the MPICH and LAM MPI
</I>&gt;<i>+implementations, OpenMP support was tested with the Intel compiler
</I>&gt;<i>+on ia32 and ia64 architectures.  Message passing parallelism through
</I>&gt;<i>+using the Cheetah library is still supported.
</I>&gt;<i>+
</I>&gt;<i>+Numerous restrictions on the use of Arrays, Fields and expressions in
</I>&gt;<i>+certain constructs were lifted.  Also may bugs were fixed and performance
</I>&gt;<i>+was improved.
</I>&gt;<i>+
</I>&gt;<i>+The status of POOMA particles, especially parallel particles, is
</I>&gt;<i>+undetermined.  So is the status of thread parallelism based on the
</I>&gt;<i>+SMARTS library.
</I>&gt;<i>+
</I>&gt;<i>+Support libraries for POOMA such as Cheetah, SMARTS and PETE can be
</I>&gt;<i>+obtained from <A HREF="http://www.pooma.com/.">http://www.pooma.com/.</A>
</I>&gt;<i>+
</I>&gt;<i>+
</I>&gt;<i>+////////////////////////////////////////////////////////////////////
</I>&gt;<i>+
</I>&gt;<i> RELEASE NOTES v2.4.0
</I>&gt;<i>
</I>&gt;<i> ////////////////////////////////////////////////////////////////////
</I>&gt;<i>Index: INSTALL.unix
</I>&gt;<i>===================================================================
</I>&gt;<i>RCS file: /home/pooma/Repository/r2/INSTALL.unix,v
</I>&gt;<i>retrieving revision 1.28
</I>&gt;<i>diff -u -u -r1.28 INSTALL.unix
</I>&gt;<i>--- INSTALL.unix	12 Jan 2003 16:16:15 -0000	1.28
</I>&gt;<i>+++ INSTALL.unix	18 Aug 2004 12:20:42 -0000
</I>&gt;<i>@@ -1,7 +1,7 @@
</I>&gt;<i> /*******************************************************************
</I>&gt;<i>  *                                                                 *
</I>&gt;<i>  *       POOMA build and installation instructions for UNIX        *
</I>&gt;<i>- *                          Version 2.4.0                          *
</I>&gt;<i>+ *                          Version 2.4.1                          *
</I>&gt;<i>  *                                                                 *
</I>&gt;<i>  *******************************************************************
</I>&gt;<i>  *    For release notes, see README.                               *
</I>&gt;<i>@@ -26,42 +26,25 @@
</I>&gt;<i>                 SUPPORTED PLATFORMS AND COMPILERS:
</I>&gt;<i>                 ----------------------------------
</I>&gt;<i>
</I>&gt;<i>-POOMA version 2.4.0 has been ported to the following platforms and
</I>&gt;<i>+POOMA version 2.4.1 has been tested on the following platforms and
</I>&gt;<i> compilers; please find the instructions for your platform within this
</I>&gt;<i> document and follow the steps.
</I>&gt;<i>
</I>&gt;<i>-	o SGI IRIX 6.X, with the Kuck and Associates KCC compiler
</I>&gt;<i>-	  (v3.3d or later, including 3.4x)
</I>&gt;<i>-	o SGI IRIX 6.X, with the GCC compiler
</I>&gt;<i>-	  (v2.95 or greater)
</I>&gt;<i>-	o SGI IRIX 6.X, with SGI C++ 7.3 or later compiler
</I>&gt;<i>-	  (without patch 3659!)
</I>&gt;<i>-	o Linux, with the Kuck and Associates KCC compiler
</I>&gt;<i>-	  (v3.3d or later, including 3.4x)
</I>&gt;<i> 	o Linux, with the GCC compiler
</I>&gt;<i>-	  (v2.95 or greater)
</I>&gt;<i>+	  (v3.3 or greater)
</I>&gt;<i> 	o Linux, with the Intel icpc compiler
</I>&gt;<i>-	  (v6.0 or greater)
</I>&gt;<i>+	  (v7.2 or greater)
</I>&gt;<i>
</I>&gt;<i> More information about the compilers above can be obtained from
</I>&gt;<i> the following URLs:
</I>&gt;<i>
</I>&gt;<i>         o GCC Home Page (GCC):            <A HREF="http://gcc.gnu.org">http://gcc.gnu.org</A>
</I>&gt;<i>-        o Silicon Graphics (SGI C++):     <A HREF="http://www.sgi.com">http://www.sgi.com</A>
</I>&gt;<i> 	o Intel (icpc):                   <A HREF="http://www.intel.com">http://www.intel.com</A>
</I>&gt;<i>-	o The Kuck and Associates (KCC) is no longer available.
</I>&gt;<i>
</I>&gt;<i> On Unix machines, POOMA can be compiled with one or more optional
</I>&gt;<i> packages. The currently available optional packages are:
</I>&gt;<i>
</I>&gt;<i>-	o SMARTS, for multithreaded parallelism and dataflow analysis
</I>&gt;<i>-
</I>&gt;<i>-	o PDT, for static analysis of source code
</I>&gt;<i>-
</I>&gt;<i>-	o TAU, for automatic source code profiling
</I>&gt;<i>-
</I>&gt;<i>-	o PAWS, for run-time coupling of parallel data structures with
</I>&gt;<i>-          other parallel programs.
</I>&gt;<i>+	o Cheetah, for message passing or shared memory parallelism
</I>&gt;<i>
</I>&gt;<i> When compiling with other packages, be sure to check the section on known
</I>&gt;<i> problems section at the end of this document.  Some combinations of packages
</I>&gt;<i>@@ -76,7 +59,7 @@
</I>&gt;<i> Since you're reading this file, you've successfully expanded the .tgz
</I>&gt;<i> file you downloaded from the net.
</I>&gt;<i>
</I>&gt;<i>-You should notice the following files/folders inside of pooma-2.4.0:
</I>&gt;<i>+You should notice the following files/folders inside of pooma-2.4.1:
</I>&gt;<i>
</I>&gt;<i>    configure ..................... used for Unix builds
</I>&gt;<i>    CREDITS ....................... the people who developed POOMA and this CD
</I>&gt;<i>@@ -120,12 +103,12 @@
</I>&gt;<i> directories.  To build POOMA for a given &quot;suite&quot; you set the environment
</I>&gt;<i> variable POOMASUITE to the name of that suite and then execute make at
</I>&gt;<i> the top level.  Basic configurations for various systems and compilers
</I>&gt;<i>-are found in the config/arch directory (for example LINUXKCC.conf contains
</I>&gt;<i>-definitions for building with the KAI compiler on Linux systems).  You
</I>&gt;<i>+are found in the config/arch directory (for example LINUXgcc.conf contains
</I>&gt;<i>+definitions for building with the GCC compiler on Linux systems).  You
</I>&gt;<i> should start by finding one of the .conf files that most closely matches
</I>&gt;<i> your system and possibly editing the definitions in it where they are
</I>&gt;<i>-incorrect.  (You may also copy a .conf file and use the new name as an
</I>&gt;<i>-option to configure.)
</I>&gt;<i>+incorrect.  You may also copy a .conf file and use the new name as an
</I>&gt;<i>+option to configure.
</I>&gt;<i>
</I>&gt;<i> In general, the configure command will look like:
</I>&gt;<i>
</I>&gt;<i>@@ -144,64 +127,6 @@
</I>&gt;<i>
</I>&gt;<i> In addition, configure may look at several environment variables,
</I>&gt;<i> SMARTSDIR, CHEETAHDIR, TAUDIR, PDTDIR etc. to find the locations of other
</I>&gt;<i>-installed packages.
</I>&gt;<i>-
</I>&gt;<i>-To see some examples of building POOMA for different systems look at
</I>&gt;<i>-some of the following files.  These files are scripts that assume you have
</I>&gt;<i>-downloaded the tar'd distributions of all the necessary packages to one
</I>&gt;<i>-location and want to build them in place:
</I>&gt;<i>-
</I>&gt;<i>-scripts/buildPoomaLinuxEgcs     - build pooma and an example on Linux
</I>&gt;<i>-scripts/buildPoomaSGI           - build pooma and an example on IRIX
</I>&gt;<i>-scripts/buildPoomaCheetaLinux   - build pooma with Cheetah
</I>&gt;<i>-scripts/buildPoomaCheetaTauSGI  - build pooma with Cheetah and Tau
</I>&gt;<i>-
</I>&gt;<i>-The SMARTS distribution also comes with some scripts that demonstrate
</I>&gt;<i>-building pooma with smarts.
</I>&gt;<i>-
</I>&gt;<i>-
</I>&gt;<i>-* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
</I>&gt;<i>-
</I>&gt;<i>-               NOTES ON KNOWN PROBLEMS:
</I>&gt;<i>-               ------------------------
</I>&gt;<i>-
</I>&gt;<i>-Linux with RedHat 6 (and possibly other distributions):
</I>&gt;<i>--------------------------------------------------------
</I>&gt;<i>-We have observed an odd problem with gmake on RedHat 6 installations,
</I>&gt;<i>-where a target will be built successfully, but then gmake will attempt
</I>&gt;<i>-to build one more incorrectly specified target.  The latter should not
</I>&gt;<i>-happen, but does.  It will just print a strange error message and
</I>&gt;<i>-exit, but will not affect the target that was actually built
</I>&gt;<i>-properly.  If you see such behavior, add the '-r' flag to your 'gmake'
</I>&gt;<i>-commands, to turn off implicit build rules in GNU make.  This should
</I>&gt;<i>-prevent these errors from happening.
</I>&gt;<i>-
</I>&gt;<i>-KCC 3.4d compiler:
</I>&gt;<i>-------------------
</I>&gt;<i>-We have run across some compiler bugs triggered by our developer test
</I>&gt;<i>-codes.  These bugs have been reported but are not yet resolved.
</I>&gt;<i>-
</I>&gt;<i>-GCC compiler:
</I>&gt;<i>---------------
</I>&gt;<i>-Some codes may cause the GCC v2.95 compiler to exhaust virtual memory while
</I>&gt;<i>-compiling, leading to an error message from g++ such as &quot;Cannot allocate
</I>&gt;<i>-XXX bytes&quot;, where XXX is some number.  This is especially common when
</I>&gt;<i>-compiling with optimization turned on.  Two possible solutions are to
</I>&gt;<i>-turn down the level of optimization (by modifying the optimization settings
</I>&gt;<i>-in the appropriate .conf file) or to break the code up into smaller
</I>&gt;<i>-source code files.
</I>&gt;<i>-
</I>&gt;<i>-Using more recent versions of GCC (3.2 and up) is recommended and will fix
</I>&gt;<i>-this particular and many other problems. Note that GCC v3.0 and v3.1 generate
</I>&gt;<i>-wrong code under certain circumstances when using optimization. Use of them
</I>&gt;<i>-is not recommended.
</I>&gt;<i>-
</I>&gt;<i>-
</I>&gt;<i>-Using SMARTS:
</I>&gt;<i>--------------
</I>&gt;<i>-
</I>&gt;<i>-SMARTS places particular requirements on the thread-safety of the compilers
</I>&gt;<i>-used.  See the SMARTS documentation for details, but in some situations this
</I>&gt;<i>-may restrict your choice of build options.  (For example, with KCC 3.4g, the
</I>&gt;<i>-thread-safe version requires that exceptions be turned on.)
</I>&gt;<i>+installed packages.  Refer to the configure script for further information
</I>&gt;<i>+in case of problems.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>  
</I>&gt;<i>
</I>

-- 
Jeffrey D. Oldham
<A HREF="http://sourcerytools.com/cgi-bin/mailman/listinfo/pooma-dev">oldham at codesourcery.com</A>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001708.html">[pooma-dev] [RFC] Removing workarounds for pre-ISO C++ compilers
</A></li>
	<LI>Next message: <A HREF="001713.html">Compilers (was: Re: [pooma-dev] [RFC] Removing workarounds for pre-ISO C++ compilers)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1710">[ date ]</a>
              <a href="thread.html#1710">[ thread ]</a>
              <a href="subject.html#1710">[ subject ]</a>
              <a href="author.html#1710">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://sourcerytools.com/cgi-bin/mailman/listinfo/pooma-dev">More information about the pooma-dev
mailing list</a><br>
</body></html>
