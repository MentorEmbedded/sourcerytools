<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [PATCH] Fix some of Particle - Field interaction
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:pooma-dev%40codesourcery.com?Subject=Re%3A%20%5BPATCH%5D%20Fix%20some%20of%20Particle%20-%20Field%20interaction&In-Reply-To=%3C40F46E93.3060700%40codesourcery.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001618.html">
   <LINK REL="Next"  HREF="001633.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[PATCH] Fix some of Particle - Field interaction</H1>
    <B>Jeffrey D. Oldham</B> 
    <A HREF="mailto:pooma-dev%40codesourcery.com?Subject=Re%3A%20%5BPATCH%5D%20Fix%20some%20of%20Particle%20-%20Field%20interaction&In-Reply-To=%3C40F46E93.3060700%40codesourcery.com%3E"
       TITLE="[PATCH] Fix some of Particle - Field interaction">oldham at codesourcery.com
       </A><BR>
    <I>Tue Jul 13 23:21:55 UTC 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="001618.html">[PATCH] Fix some of Particle - Field interaction
</A></li>
        <LI>Next message: <A HREF="001633.html">[pooma-dev] Re: [PATCH] Fix some of Particle - Field interaction
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1630">[ date ]</a>
              <a href="thread.html#1630">[ thread ]</a>
              <a href="subject.html#1630">[ subject ]</a>
              <a href="author.html#1630">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Richard Guenther wrote:

&gt;<i> Inspired by the simplicity of some of the fixes by Roman Krylov I ran 
</I>&gt;<i> over the interpolate.cpp particle test and tried to make it compile.
</I>&gt;<i> The following patch makes that and also makes it pass (by pure luck).
</I>&gt;<i> The only transformation I'm not sure about is
</I>&gt;<i>   Geometry::indexPoint() -&gt; Mesh::vertexPosition()
</I>&gt;<i> Maybe one of the former developers can comment.
</I>&gt;<i>
</I>&gt;<i> I also needed to introduce setExternalGuards() which implementation 
</I>&gt;<i> may not be optimal.  But well, better than before.
</I>&gt;<i>
</I>&gt;<i> Tested particles with no regressions, interpolation now passing.
</I>&gt;<i>
</I>&gt;<i> Ok?
</I>
Yes, it's good progress.  I appreciate Krylov's and your work on this.  
Please see the questions below.
There's no need to send replies before committing.

Somewhere in the patch, an 'Interpolater' template parameter was added, 
but I did not see its use within the structure.

&gt;<i>@@ -328,8 +317,8 @@
</I>&gt;<i>                &lt;&lt; sum(chargeDensity)
</I>&gt;<i> 	       &lt;&lt; std::endl;
</I>&gt;<i>   tester.check(&quot;chargeDensity(NGP,attrib) == numparticles&quot;,
</I>&gt;<i>-               abs(sum(chargeDensity) -
</I>&gt;<i>-                   static_cast&lt;double&gt;(createnum))&lt;1.0e-5);
</I>&gt;<i>+               fabs(sum(chargeDensity) -
</I>&gt;<i>+		    static_cast&lt;double&gt;(createnum))&lt;1.0e-5);
</I>&gt;<i> 
</I>&gt;<i>  
</I>&gt;<i>
</I>In C++, std::abs is overloaded to mean std::fabs.  In other words, the 
language designers finally get it right.

-- 
Jeffrey D. Oldham
<A HREF="http://sourcerytools.com/cgi-bin/mailman/listinfo/pooma-dev">oldham at codesourcery.com</A>



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001618.html">[PATCH] Fix some of Particle - Field interaction
</A></li>
	<LI>Next message: <A HREF="001633.html">[pooma-dev] Re: [PATCH] Fix some of Particle - Field interaction
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1630">[ date ]</a>
              <a href="thread.html#1630">[ thread ]</a>
              <a href="subject.html#1630">[ subject ]</a>
              <a href="author.html#1630">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://sourcerytools.com/cgi-bin/mailman/listinfo/pooma-dev">More information about the pooma-dev
mailing list</a><br>
</body></html>
