<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [PATCH] Fix more ISO conformance problems
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:pooma-dev%40codesourcery.com?Subject=Re%3A%20%5BPATCH%5D%20Fix%20more%20ISO%20conformance%20problems&In-Reply-To=%3CPine.LNX.4.44.0301232239320.543-100000%40goofy%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001179.html">
   <LINK REL="Next"  HREF="001181.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[PATCH] Fix more ISO conformance problems</H1>
    <B>Richard Guenther</B> 
    <A HREF="mailto:pooma-dev%40codesourcery.com?Subject=Re%3A%20%5BPATCH%5D%20Fix%20more%20ISO%20conformance%20problems&In-Reply-To=%3CPine.LNX.4.44.0301232239320.543-100000%40goofy%3E"
       TITLE="[PATCH] Fix more ISO conformance problems">rguenth at tat.physik.uni-tuebingen.de
       </A><BR>
    <I>Thu Jan 23 21:42:44 UTC 2003</I>
    <P><UL>
        <LI>Previous message: <A HREF="001179.html">[PATCH] add necessary includes to autogenerated files
</A></li>
        <LI>Next message: <A HREF="001181.html">[Q] Field/Relations/RelationList.h:makeOwnCopy()
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1180">[ date ]</a>
              <a href="thread.html#1180">[ thread ]</a>
              <a href="subject.html#1180">[ subject ]</a>
              <a href="author.html#1180">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Ok?

2003Jan23  Richard Guenther &lt;<A HREF="http://sourcerytools.com/cgi-bin/mailman/listinfo/pooma-dev">richard.guenther at uni-tuebingen.de</A>&gt;

	* src/Array/tests/ScalarAdvection.cpp: forward declare badOption()
	and badValue().
	src/Domain/NewDomain.h: use enum rather than not compile-time
	constant const int.
	src/Layout/GridLayout.cpp: use GCFillInfo_t typename for
	constructing LayoutBaseData&lt;Dim&gt;::GCFillInfo.
	src/Layout/SparseTileLayout.cpp: likewise.
	src/Layout/UniformGridLayout.cpp: likewise.

Index: src/Array/tests/ScalarAdvection.cpp
===================================================================
RCS file: /home/pooma/Repository/r2/src/Array/tests/ScalarAdvection.cpp,v
retrieving revision 1.5
diff -u -u -r1.5 ScalarAdvection.cpp
--- src/Array/tests/ScalarAdvection.cpp	10 Oct 2001 17:55:01 -0000	1.5
+++ src/Array/tests/ScalarAdvection.cpp	23 Jan 2003 21:39:40 -0000
@@ -72,6 +72,12 @@
 template &lt;int D, class OStr&gt;
 void print(const SAOptions&lt;D&gt; &amp;opts, OStr &amp;out);

+template &lt;class OStr&gt;
+void badOption(OStr &amp;out, const char *str, const std::string &amp;option);
+
+template &lt;class OStr&gt;
+void badValue(OStr &amp;out, const std::string &amp;option);
+
 template &lt;int D&gt;
 class SAOptions
 {
Index: src/Domain/NewDomain.h
===================================================================
RCS file: /home/pooma/Repository/r2/src/Domain/NewDomain.h,v
retrieving revision 1.31
diff -u -u -r1.31 NewDomain.h
--- src/Domain/NewDomain.h	14 Jan 2002 16:48:21 -0000	1.31
+++ src/Domain/NewDomain.h	23 Jan 2003 21:39:49 -0000
@@ -417,8 +417,8 @@
   inline static RT &amp;fillSlice(RT &amp;retval, const UT &amp;u,
 			      const T1 &amp;a, const T2 &amp;b)
     {
-      const bool RDX =
-        DomainTraits&lt;RT&gt;::dimensions &gt; DomainTraits&lt;RT&gt;::sliceDimensions;
+      enum { RDX =
+        DomainTraits&lt;RT&gt;::dimensions &gt; DomainTraits&lt;RT&gt;::sliceDimensions };
       CombineSliceDomain&lt;RT,UT,T1,0,0,(DX1&gt;0 &amp;&amp; RDX)&gt;::
 	combine(retval,u,a);
       CombineSliceDomain&lt;RT,UT,T2,S2,DX1,(DX2&gt;0 &amp;&amp; RDX)&gt;::
@@ -828,8 +828,8 @@
   inline static RT &amp;fillSlice(RT &amp;retval, const UT &amp;u,
 			      const T1 &amp;a)
     {
-      const bool RDX =
-        DomainTraits&lt;RT&gt;::dimensions &gt; DomainTraits&lt;RT&gt;::sliceDimensions;
+      enum { RDX =
+        DomainTraits&lt;RT&gt;::dimensions &gt; DomainTraits&lt;RT&gt;::sliceDimensions };
       CombineSliceDomain&lt;RT,UT,T1,0,0,(DX1&gt;0 &amp;&amp; RDX)&gt;::combine(retval,u,a);
       return retval;
     }
@@ -878,8 +878,8 @@
   inline static RT &amp;fillSlice(RT &amp;retval, const UT &amp;u,
 			      const T1 &amp;a, const T2 &amp;b, const T3 &amp;c)
     {
-      const bool RDX =
-        DomainTraits&lt;RT&gt;::dimensions &gt; DomainTraits&lt;RT&gt;::sliceDimensions;
+      enum { RDX =
+        DomainTraits&lt;RT&gt;::dimensions &gt; DomainTraits&lt;RT&gt;::sliceDimensions };
       CombineSliceDomain&lt;RT,UT,T1,0,0,(DX1&gt;0 &amp;&amp; RDX)&gt;::combine(retval,u,a);
       CombineSliceDomain&lt;RT,UT,T2,S2,DX1,(DX2&gt;0 &amp;&amp; RDX)&gt;::combine(retval,u,b);
       CombineSliceDomain&lt;RT,UT,T3,S3,DX1+DX2,(DX3&gt;0 &amp;&amp; RDX)&gt;::
@@ -939,8 +939,8 @@
 			      const T1 &amp;a, const T2 &amp;b, const T3 &amp;c,
 			      const T4 &amp;d)
     {
-      const bool RDX =
-        DomainTraits&lt;RT&gt;::dimensions &gt; DomainTraits&lt;RT&gt;::sliceDimensions;
+      enum { RDX =
+        DomainTraits&lt;RT&gt;::dimensions &gt; DomainTraits&lt;RT&gt;::sliceDimensions };
       CombineSliceDomain&lt;RT,UT,T1,0,0,(DX1&gt;0 &amp;&amp; RDX)&gt;::combine(retval,u,a);
       CombineSliceDomain&lt;RT,UT,T2,S2,DX1,(DX2&gt;0 &amp;&amp; RDX)&gt;::combine(retval,u,b);
       CombineSliceDomain&lt;RT,UT,T3,S3,DX1+DX2,(DX3&gt;0 &amp;&amp; RDX)&gt;::
@@ -1005,8 +1005,8 @@
 			      const T1 &amp;a, const T2 &amp;b, const T3 &amp;c,
 			      const T4 &amp;d, const T5 &amp;e)
     {
-      const bool RDX =
-        DomainTraits&lt;RT&gt;::dimensions &gt; DomainTraits&lt;RT&gt;::sliceDimensions;
+      enum { RDX =
+        DomainTraits&lt;RT&gt;::dimensions &gt; DomainTraits&lt;RT&gt;::sliceDimensions };
       CombineSliceDomain&lt;RT,UT,T1,0,0,(DX1&gt;0 &amp;&amp; RDX)&gt;::combine(retval,u,a);
       CombineSliceDomain&lt;RT,UT,T2,S2,DX1,(DX2&gt;0 &amp;&amp; RDX)&gt;::combine(retval,u,b);
       CombineSliceDomain&lt;RT,UT,T3,S3,DX1+DX2,(DX3&gt;0 &amp;&amp; RDX)&gt;::
@@ -1080,8 +1080,8 @@
 			      const T1 &amp;a, const T2 &amp;b, const T3 &amp;c,
 			      const T4 &amp;d, const T5 &amp;e, const T6 &amp;f)
     {
-      const bool RDX =
-        DomainTraits&lt;RT&gt;::dimensions &gt; DomainTraits&lt;RT&gt;::sliceDimensions;
+      enum { RDX =
+        DomainTraits&lt;RT&gt;::dimensions &gt; DomainTraits&lt;RT&gt;::sliceDimensions };
       CombineSliceDomain&lt;RT,UT,T1,0,0,(DX1&gt;0 &amp;&amp; RDX)&gt;::combine(retval,u,a);
       CombineSliceDomain&lt;RT,UT,T2,S2,DX1,(DX2&gt;0 &amp;&amp; RDX)&gt;::combine(retval,u,b);
       CombineSliceDomain&lt;RT,UT,T3,S3,DX1+DX2,(DX3&gt;0 &amp;&amp; RDX)&gt;::
@@ -1166,8 +1166,8 @@
 			      const T5 &amp;e, const T6 &amp;f,
 			      const T7 &amp;g)
     {
-      const bool RDX =
-        DomainTraits&lt;RT&gt;::dimensions &gt; DomainTraits&lt;RT&gt;::sliceDimensions;
+      enum { RDX =
+        DomainTraits&lt;RT&gt;::dimensions &gt; DomainTraits&lt;RT&gt;::sliceDimensions };
       CombineSliceDomain&lt;RT,UT,T1,0,0,(DX1&gt;0 &amp;&amp; RDX)&gt;::combine(retval,u,a);
       CombineSliceDomain&lt;RT,UT,T2,S2,DX1,(DX2&gt;0 &amp;&amp; RDX)&gt;::combine(retval,u,b);
       CombineSliceDomain&lt;RT,UT,T3,S3,DX1+DX2,(DX3&gt;0 &amp;&amp; RDX)&gt;::
Index: src/Layout/GridLayout.cpp
===================================================================
RCS file: /home/pooma/Repository/r2/src/Layout/GridLayout.cpp,v
retrieving revision 1.87
diff -u -u -r1.87 GridLayout.cpp
--- src/Layout/GridLayout.cpp	23 Jan 2003 21:29:49 -0000	1.87
+++ src/Layout/GridLayout.cpp	23 Jan 2003 21:39:56 -0000
@@ -429,8 +429,7 @@

 		      // Now, push IDs and source into cache...

-		      this-&gt;gcFillList_m.push_back(LayoutBaseData&lt;Dim&gt;::GCFillInfo(gcdom,
-							sourceID, destID));
+		      this-&gt;gcFillList_m.push_back(GCFillInfo_t(gcdom, sourceID, destID));
 		    }
 		}
 	    }
@@ -482,8 +481,7 @@

 		      // Now, push IDs and source into cache...

-		      this-&gt;gcFillList_m.push_back(LayoutBaseData&lt;Dim&gt;::GCFillInfo(gcdom,
-							sourceID, destID));
+		      this-&gt;gcFillList_m.push_back(GCFillInfo_t(gcdom, sourceID, destID));
 		    }
 		}
 	    }
Index: src/Layout/SparseTileLayout.cpp
===================================================================
RCS file: /home/pooma/Repository/r2/src/Layout/SparseTileLayout.cpp,v
retrieving revision 1.29
diff -u -u -r1.29 SparseTileLayout.cpp
--- src/Layout/SparseTileLayout.cpp	23 Jan 2003 21:29:49 -0000	1.29
+++ src/Layout/SparseTileLayout.cpp	23 Jan 2003 21:40:00 -0000
@@ -449,9 +449,9 @@
       for ( ; GCLstart!=GCLend ; ++GCLstart )
 	{
 	  //  removed the external guard layer area.
-	  this-&gt;gcFillList_m.push_back(LayoutBaseData&lt;Dim&gt;::GCFillInfo((*GCLstart).domain(),
-						  (*GCLstart).globalID(),
-						  (*start)-&gt;globalID()));
+	  this-&gt;gcFillList_m.push_back(GCFillInfo_t((*GCLstart).domain(),
+						    (*GCLstart).globalID(),
+						    (*start)-&gt;globalID()));
 	}
       tlist.clear();
     }
Index: src/Layout/UniformGridLayout.cpp
===================================================================
RCS file: /home/pooma/Repository/r2/src/Layout/UniformGridLayout.cpp,v
retrieving revision 1.38
diff -u -u -r1.38 UniformGridLayout.cpp
--- src/Layout/UniformGridLayout.cpp	23 Jan 2003 21:29:49 -0000	1.38
+++ src/Layout/UniformGridLayout.cpp	23 Jan 2003 21:40:01 -0000
@@ -370,7 +370,7 @@
 		    this-&gt;all_m[sourceID]-&gt;context() == Pooma::context() ||
  		    this-&gt;all_m[destID]-&gt;context() == Pooma::context()
 		    )
-                this-&gt;gcFillList_m.push_back(LayoutBaseData&lt;Dim&gt;::GCFillInfo(gcdom,sourceID,destID));
+                this-&gt;gcFillList_m.push_back(GCFillInfo_t(gcdom,sourceID,destID));
               }
           }

@@ -417,7 +417,7 @@
 		    this-&gt;all_m[sourceID]-&gt;context() == Pooma::context() ||
  		    this-&gt;all_m[destID]-&gt;context() == Pooma::context()
 		    )
-		  this-&gt;gcFillList_m.push_back(LayoutBaseData&lt;Dim&gt;::GCFillInfo(gcdom,sourceID,destID));
+		  this-&gt;gcFillList_m.push_back(GCFillInfo_t(gcdom,sourceID,destID));
               }
           }
       }


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001179.html">[PATCH] add necessary includes to autogenerated files
</A></li>
	<LI>Next message: <A HREF="001181.html">[Q] Field/Relations/RelationList.h:makeOwnCopy()
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1180">[ date ]</a>
              <a href="thread.html#1180">[ thread ]</a>
              <a href="subject.html#1180">[ subject ]</a>
              <a href="author.html#1180">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://sourcerytools.com/cgi-bin/mailman/listinfo/pooma-dev">More information about the pooma-dev
mailing list</a><br>
</body></html>
