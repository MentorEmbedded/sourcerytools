<tt>
&lt;html&gt;&lt;body&gt;&lt;div&nbsp;style=&quot;color:#000;&nbsp;background-color:#fff;&nbsp;font-family:times&nbsp;new&nbsp;roman,&nbsp;new&nbsp;york,&nbsp;times,&nbsp;serif;font-size:12pt&quot;&gt;&lt;div&gt;&lt;span&gt;Sorry,&nbsp;I'm&nbsp;a&nbsp;little&nbsp;confused.&nbsp;&nbsp;I'm&nbsp;getting&nbsp;an&nbsp;error&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;bi/4.5.2/../../../../arm-none-eabi/bin/ld.exe:&nbsp;section&nbsp;.data&nbsp;loaded&nbsp;at&nbsp;[00028bc0,00028bcf]&nbsp;overlaps&nbsp;section&nbsp;.sram1&nbsp;loaded&nbsp;at&nbsp;[00028bc0,00028c7b]&lt;br&gt;collect2:&nbsp;ld&nbsp;returned&nbsp;1&nbsp;exit&nbsp;status&lt;br&gt;cs-make:&nbsp;***&nbsp;[RTOSDemo.axf]&nbsp;Error&nbsp;1&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;so&nbsp;something&nbsp;is&nbsp;wrong.&nbsp;&nbsp;I'm&nbsp;fairly&nbsp;sure&nbsp;I&nbsp;misinterpreted&nbsp;the&nbsp;change&nbsp;you&nbsp;suggested.&nbsp;&nbsp;&lt;br&gt;&lt;span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;MEMORY&lt;br&gt;{&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;FLASH&nbsp;(rx)&nbsp;:&nbsp;ORIGIN&nbsp;=&nbsp;0x00001000,&nbsp;LENGTH&nbsp;=&nbsp;252K&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;SRAM1&nbsp;(rwx)&nbsp;:&nbsp;ORIGIN&nbsp;=&nbsp;0x20000000,&nbsp;LENGTH&nbsp;=&nbsp;464&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;DMA&nbsp;(rwx)&nbsp;:&nbsp;ORIGIN&nbsp;=&nbsp;0x200001D0,&nbsp;LENGTH&nbsp;=&nbsp;16&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;SRAM2&nbsp;(rwx)&nbsp;:&nbsp;ORIGIN&nbsp;=&nbsp;0x200001E0,&nbsp;LENGTH&nbsp;=<br>
&nbsp;97824&lt;br&gt;}&lt;br&gt;&lt;br&gt;SECTIONS&lt;br&gt;{&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;.text&nbsp;:&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;{&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;KEEP(*(.isr_vector))&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*(.text*)&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*(.rodata*)&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_etext&nbsp;=&nbsp;.;&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&gt;&nbsp;FLASH&lt;br&gt;&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;.sram1&nbsp;:&nbsp;&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;{&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*(.sram1_data)&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sram1_bss&nbsp;=&nbsp;.;&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*(.sram1_bss)&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&gt;&nbsp;SRAM1&nbsp;AT&nbsp;&gt;&nbsp;FLASH&lt;br&gt;&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;sram1_loadaddr&nbsp;=&nbsp;LOADADDR(.sram1);&lt;br&gt;&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;.data&nbsp;:&nbsp;AT&nbsp;(ADDR(.text)&nbsp;+&nbsp;SIZEOF(.text))&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;{&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_data&nbsp;=&nbsp;.;&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*(vtable)&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;*(.data*)&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_edata&nbsp;=&nbsp;.;&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&gt;&nbsp;SRAM2&lt;br&gt;&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;.bss(NOLOAD)&nbsp;:&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;{&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_bss&nbsp;=&nbsp;.;&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*(.bss*)&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*(COMMON)&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_ebss&nbsp;=&nbsp;.;&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.&nbsp;=&nbsp;ALIGN&nbsp;(8);&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_end&nbsp;=&nbsp;.;&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&gt;&nbsp;SRAM2&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;.dmaRegisters&nbsp;&nbsp;0x200001D0&nbsp;(NOLOAD)&nbsp;:&nbsp;&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;{&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*(.dmaRegisters)&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&gt;&nbsp;DMA&nbsp;&nbsp;&nbsp;&nbsp;&lt;br&gt;&lt;br&gt;}&lt;br&gt;&lt;br&gt;/*&nbsp;end&nbsp;of&nbsp;allocated&nbsp;ram&nbsp;_end&nbsp;*/&lt;br&gt;PROVIDE(&nbsp;_HEAP_START&nbsp;=&nbsp;_end&nbsp;);&lt;br&gt;&lt;br&gt;/*&nbsp;end&nbsp;of&nbsp;the&nbsp;heap&nbsp;-&gt;&nbsp;align&nbsp;8&nbsp;byte&nbsp;*/&nbsp;&lt;br&gt;PROVIDE&nbsp;(&nbsp;_HEAP_END&nbsp;=&nbsp;ALIGN(ORIGIN(SRAM2)&nbsp;+&nbsp;LENGTH(SRAM2),8)<br>
&nbsp;);&lt;br&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&nbsp;&nbsp;&lt;div&nbsp;style=&quot;font-family:&nbsp;times&nbsp;new&nbsp;roman,&nbsp;new&nbsp;york,&nbsp;times,&nbsp;serif;&nbsp;font-size:&nbsp;12pt;&quot;&gt;&nbsp;&lt;div&nbsp;style=&quot;font-family:&nbsp;times&nbsp;new&nbsp;roman,&nbsp;new&nbsp;york,&nbsp;times,&nbsp;serif;&nbsp;font-size:&nbsp;12pt;&quot;&gt;&nbsp;&lt;div&nbsp;dir=&quot;ltr&quot;&gt;&nbsp;&lt;font&nbsp;face=&quot;Arial&quot;&nbsp;size=&quot;2&quot;&gt;&nbsp;&lt;hr&nbsp;size=&quot;1&quot;&gt;&nbsp;&nbsp;&lt;b&gt;&lt;span&nbsp;style=&quot;font-weight:bold;&quot;&gt;From:&lt;/span&gt;&lt;/b&gt;&nbsp;42Bastian&nbsp;&lt;list-bastian.schick@sciopta.com&gt;&lt;br&gt;&nbsp;&lt;b&gt;&lt;span&nbsp;style=&quot;font-weight:&nbsp;bold;&quot;&gt;To:&lt;/span&gt;&lt;/b&gt;&nbsp;arm-gnu@codesourcery.com&nbsp;&lt;br&gt;&nbsp;&lt;b&gt;&lt;span&nbsp;style=&quot;font-weight:&nbsp;bold;&quot;&gt;Sent:&lt;/span&gt;&lt;/b&gt;&nbsp;Friday,&nbsp;April&nbsp;6,&nbsp;2012&nbsp;6:57&nbsp;AM&lt;br&gt;&nbsp;&lt;b&gt;&lt;span&nbsp;style=&quot;font-weight:&nbsp;bold;&quot;&gt;Subject:&lt;/span&gt;&lt;/b&gt;&nbsp;Re:&nbsp;[arm-gnu]&nbsp;Placing&nbsp;variable&nbsp;at&nbsp;absolute&nbsp;address&nbsp;in&nbsp;RAM&lt;br&gt;&nbsp;&lt;/font&gt;&nbsp;&lt;/div&gt;&nbsp;&lt;br&gt;<br>
Hi&lt;br&gt;&lt;br&gt;&gt;&nbsp;I&nbsp;manually&nbsp;chose&nbsp;several&nbsp;static&nbsp;and&nbsp;global&nbsp;variables&nbsp;to&nbsp;go&nbsp;into&nbsp;SRAM1&lt;br&gt;&gt;&nbsp;using&nbsp;&quot;__attribute__&nbsp;((section(&quot;.sram1&quot;)))&quot;,&nbsp;and&nbsp;this&nbsp;works&nbsp;pretty&nbsp;well&lt;br&gt;&gt;&nbsp;linker-wise.&nbsp;&nbsp;The&nbsp;problem&nbsp;is,&nbsp;some&nbsp;of&nbsp;these&nbsp;variables&nbsp;no&nbsp;longer&lt;br&gt;&gt;&nbsp;function.&nbsp;&nbsp;I&nbsp;can't&nbsp;say&nbsp;how&nbsp;exactly&nbsp;because&nbsp;they&nbsp;are&nbsp;from&nbsp;a&nbsp;third&nbsp;party&lt;br&gt;&gt;&nbsp;library&nbsp;(lwIP)&nbsp;and&nbsp;I&nbsp;haven't&nbsp;debugged&nbsp;yet,&nbsp;but&nbsp;I&nbsp;know&nbsp;if&nbsp;I&nbsp;let&nbsp;the&lt;br&gt;&gt;&nbsp;linker&nbsp;allocate&nbsp;automatically,&nbsp;they're&nbsp;ok.&lt;br&gt;&lt;br&gt;For&nbsp;variables&nbsp;that&nbsp;do&nbsp;not&nbsp;go&nbsp;to&nbsp;the&nbsp;standard&nbsp;places&nbsp;.data&nbsp;and&nbsp;.bss&nbsp;you&lt;br&gt;need&nbsp;to&nbsp;initialize&nbsp;them&nbsp;with&nbsp;your&nbsp;own&nbsp;code.&lt;br&gt;&lt;br&gt;If&nbsp;you&nbsp;are&nbsp;lucky,&nbsp;those&nbsp;variables&nbsp;are&nbsp;initialized&nbsp;to&nbsp;zero,&nbsp;so&nbsp;you&nbsp;can&nbsp;do&lt;br&gt;a&nbsp;memset()&nbsp;of&nbsp;SRAM&nbsp;by&nbsp;hand.&lt;br&gt;&lt;br&gt;If&nbsp;initialized&nbsp;you&nbsp;need&nbsp;to&nbsp;enhance&nbsp;your&nbsp;linker&nbsp;script&nbsp;like&nbsp;this:&lt;br&gt;&lt;br&gt;&nbsp;.sram1&nbsp;:&nbsp;{&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;*(.sram1_data)&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;sram1_bss&nbsp;=&nbsp;.;&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;*(.sram1_bss)&lt;br&gt;&nbsp;}&nbsp;&gt;&nbsp;SRAM1&nbsp;AT&nbsp;&gt;&nbsp;FLASH&lt;br&gt;&lt;br&gt;sram1_loadaddr&nbsp;=<br>
&nbsp;LOADADDR(.sram1);&lt;br&gt;&lt;br&gt;&gt;&nbsp;.data&nbsp;:&nbsp;AT&nbsp;(ADDR(.text)&nbsp;+&nbsp;SIZEOF(.text))&nbsp;{&nbsp;_data&nbsp;=&nbsp;.;&nbsp;*(vtable)&nbsp;&lt;br&gt;&gt;&nbsp;*(.data*)&nbsp;_edata&nbsp;=&nbsp;.;&nbsp;}&nbsp;&gt;&nbsp;SRAM2&lt;br&gt;&lt;br&gt;BTW:&nbsp;Better&nbsp;way&nbsp;is&lt;br&gt;.data&nbsp;:&nbsp;{&lt;br&gt;&lt;br&gt;}&nbsp;&gt;&nbsp;SRAM2&nbsp;AT&nbsp;&gt;&nbsp;FLASH&lt;br&gt;(Leave&nbsp;it&nbsp;to&nbsp;ld&nbsp;to&nbsp;do&nbsp;the&nbsp;calculation.)&lt;br&gt;&lt;br&gt;&lt;br&gt;--&nbsp;&lt;br&gt;42Bastian&lt;br&gt;+&lt;br&gt;|&nbsp;http://www.sciopta.com&lt;br&gt;|&nbsp;Fastest&nbsp;direct&nbsp;message&nbsp;passing&nbsp;kernel.&lt;br&gt;|&nbsp;IEC61508&nbsp;certified.&lt;br&gt;+&lt;br&gt;_______________________________________________&lt;br&gt;arm-gnu&nbsp;mailing&nbsp;list&lt;br&gt;&lt;a&nbsp;ymailto=&quot;mailto:arm-gnu@codesourcery.com&quot;&nbsp;href=&quot;mailto:arm-gnu@codesourcery.com&quot;&gt;arm-gnu@codesourcery.com&lt;/a&gt;&lt;br&gt;http://sourcerytools.com/cgi-bin/mailman/listinfo/arm-gnu&lt;br&gt;&lt;br&gt;&lt;br&gt;&nbsp;&lt;/div&gt;&nbsp;&lt;/div&gt;&nbsp;&nbsp;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;
</tt>
