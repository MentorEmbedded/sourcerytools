<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [arm-gnu] undefined reference to _init
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:arm-gnu%40codesourcery.com?Subject=Re%3A%20%5Barm-gnu%5D%20undefined%20reference%20to%20_init&In-Reply-To=%3C40786BD4949BFE469E0E6800967D3F0B2029D0BD%40CORMS1.hemi.corp.local%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000194.html">
   <LINK REL="Next"  HREF="000191.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[arm-gnu] undefined reference to _init</H1>
    <B>Brad Badke</B> 
    <A HREF="mailto:arm-gnu%40codesourcery.com?Subject=Re%3A%20%5Barm-gnu%5D%20undefined%20reference%20to%20_init&In-Reply-To=%3C40786BD4949BFE469E0E6800967D3F0B2029D0BD%40CORMS1.hemi.corp.local%3E"
       TITLE="[arm-gnu] undefined reference to _init">BBadke at hemispheregps.com
       </A><BR>
    <I>Sat Oct 20 01:56:12 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="000194.html">[arm-gnu] undefined reference to _init
</A></li>
        <LI>Next message: <A HREF="000191.html">[arm-gnu] Release notes comment and question (bit-fields)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#195">[ date ]</a>
              <a href="thread.html#195">[ thread ]</a>
              <a href="subject.html#195">[ subject ]</a>
              <a href="author.html#195">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I have some other issue to work through and clean up, but I wrote my own __libc_init_array and now my mixed C/C++ app runs on my GNSS receiver board. I suspect someday I will figure out what I need to do with my linker script to make the __libc_init_array supplied by CodeSourcery work, but not sure I care anymore!

 
-----Original Message-----
From: Freddie Chopin [mailto:<A HREF="http://sourcerytools.com/cgi-bin/mailman/listinfo/arm-gnu">freddie_chopin at op.pl</A>] 
Sent: Thursday, October 18, 2012 11:35 PM
To: Brad Badke
Cc: <A HREF="http://sourcerytools.com/cgi-bin/mailman/listinfo/arm-gnu">arm-gnu at codesourcery.com</A>
Subject: Re: [arm-gnu] undefined reference to _init

W dniu 2012-10-18 20:18, Brad Badke pisze:
&gt;<i> Thanks for your response. Your examples look well written. So I found I have to manually link in CodeSourcery/Sourcery_CodeBench_Lite_for_ARM_EABI/lib/gcc/arm-none-eabi/4.6.3/crti.o to get rid of the _init problem. I have to do this even if I don't use the -nostartfiles flag.
</I>
I never had to explicitly link any library...

&gt;<i> Anyway, I am pretty new to the GCC stuff and make files but have been using ARM for 9 years (code warrior and eclipse IDEs). I have already converted my boot code over to GCC and am pretty happy with that --- but I did notice that GCC sprintf is a real space hog compared to ARM. If I don't use sprintf my ARM and GCC compile to within 2KB of each other. If I use sprintf, the GCC code is 18KB bigger than ARM. Rather significant since my boot code binary is only 38KB.
</I>
You could try &quot;integer-only&quot; version that does not support floats - siprintf(), iprintf(), fiprintf() etc. - these are smaller.

&gt;<i> Anyway, my boot code reads my app code .bin out of NAND flash and puts it in RAM. Then the boot jumps to the app startup and that is where my difficulty is. Anyway by the time I get to the app I am strictly in RAM but I still have to contend with C/C++ and initializing the run time library. So now I get my app to compile and link but at some point in __libc_init_array my app startup an exception occurs and dumps me back to my boot loader trap. Progress, but I clearly still don't have everything correct in my make file and/or my linker script.
</I>
If you're in a trap exception, you can check which instruction (address) generated the exception, this way you could get to the real culprit. Or just use a debugger - if you can (;

4\/3!!

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000194.html">[arm-gnu] undefined reference to _init
</A></li>
	<LI>Next message: <A HREF="000191.html">[arm-gnu] Release notes comment and question (bit-fields)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#195">[ date ]</a>
              <a href="thread.html#195">[ thread ]</a>
              <a href="subject.html#195">[ subject ]</a>
              <a href="author.html#195">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://sourcerytools.com/cgi-bin/mailman/listinfo/arm-gnu">More information about the arm-gnu
mailing list</a><br>
</body></html>
