<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [arm-gnu] Compiler versions other than 2009q3-68 all fail??
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:arm-gnu%40codesourcery.com?Subject=Re%3A%20%5Barm-gnu%5D%20Compiler%20versions%20other%20than%202009q3-68%20all%20fail%3F%3F&In-Reply-To=%3C1328346533.2107.18.camel%40mehome%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000040.html">
   <LINK REL="Next"  HREF="000043.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[arm-gnu] Compiler versions other than 2009q3-68 all fail??</H1>
    <B>Sergei Poselenov</B> 
    <A HREF="mailto:arm-gnu%40codesourcery.com?Subject=Re%3A%20%5Barm-gnu%5D%20Compiler%20versions%20other%20than%202009q3-68%20all%20fail%3F%3F&In-Reply-To=%3C1328346533.2107.18.camel%40mehome%3E"
       TITLE="[arm-gnu] Compiler versions other than 2009q3-68 all fail??">sposelenov at emcraft.com
       </A><BR>
    <I>Sat Feb  4 09:08:52 UTC 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="000040.html">[arm-gnu] Compiler versions other than 2009q3-68 all fail??
</A></li>
        <LI>Next message: <A HREF="000043.html">[arm-gnu] Compiler versions other than 2009q3-68 all fail??
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42">[ date ]</a>
              <a href="thread.html#42">[ thread ]</a>
              <a href="subject.html#42">[ subject ]</a>
              <a href="author.html#42">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Chen,

Generally, such regression suggests some problems in the code (btw -
please consider to reduce the whole project to some easily-read example
which causes regression. It will help you to point down the problem).

I'd suggest the following:
 - Add &quot;-Wall&quot; to the compiler CFLAGS (if not already added) and address
all warnings.
 - Check that all references to the hardware registers in the source
code are not optimized out by the compiler (use &quot;volatile&quot; where
appropriate).
 - Check/compare the actual code generated by the toolchain (use
&quot;arm-non-eabi-objdump -d&quot;).

Regards,
Sergei

On Thu, 2012-02-02 at 19:50 -0600, <A HREF="http://sourcerytools.com/cgi-bin/mailman/listinfo/arm-gnu">chen at chinstruments.com</A> wrote:
&gt;<i> resend as plain text (no html or attachment)
</I>&gt;<i> 
</I>&gt;<i> ---------------------------- Original Message ----------------------------
</I>&gt;<i> Subject: Compiler versions other than 2009q3-68 all fail??
</I>&gt;<i> Date:    Thu, February 2, 2012 2:20 pm
</I>&gt;<i> To:      <A HREF="http://sourcerytools.com/cgi-bin/mailman/listinfo/arm-gnu">arm-gnu at codesourcery.com</A>
</I>&gt;<i> --------------------------------------------------------------------------
</I>&gt;<i> 
</I>&gt;<i> I have code (linked below) that only runs correctly when compiled only
</I>&gt;<i> with arm-none-eabi version 2009q3-68; the application fails when compiled
</I>&gt;<i> with *both newer and older versions* of arm-none-eabi.
</I>&gt;<i> 
</I>&gt;<i> The problems were observed on TI's AM1707 EVM Rev. H (ARM926EJ-S core). 
</I>&gt;<i> The code is a bare metal application that runs the EVM board as a generic
</I>&gt;<i> USB bulk device, with console output via serial port interrupts.  Using
</I>&gt;<i> the same code and EVM board, different behavior is obtained when using
</I>&gt;<i> different compiler versions (no internal compiler errors for any version):
</I>&gt;<i> 
</I>&gt;<i> Older CodeSourcery versions (2009q1-161 and older, through 2008)
</I>&gt;<i> ---------------------------
</I>&gt;<i>   *  Everything works fine when run from debugger, but...
</I>&gt;<i>   *  USB enumeration fails, but only when application is flashed to the board
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Newer CodeSourcery versions (2010q1-188 to 2011.09-69)
</I>&gt;<i> ---------------------------
</I>&gt;<i>   *  Serial port outputs as gibberish via interrupts (both from debugger
</I>&gt;<i> and when flashed)
</I>&gt;<i>   *  USB enumeration fails (both from debugger and when flashed)
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> CodeSourcery G++ Lite version 2009q3-68
</I>&gt;<i> ---------------------------------------
</I>&gt;<i>   *  Everything works correctly!
</I>&gt;<i> 
</I>&gt;<i>   *  Serial port output works correctly (both from debugger and when flashed)
</I>&gt;<i>   *  USB enumeration and data transfer work correctly (both from debugger
</I>&gt;<i> and when flashed)
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Source code + makefile + long description
</I>&gt;<i> &lt;<A HREF="http://e2e.ti.com/support/embedded/starterware/f/790/t/151682.aspx?PageIndex=2#584582">http://e2e.ti.com/support/embedded/starterware/f/790/t/151682.aspx?PageIndex=2#584582</A>&gt;
</I>&gt;<i> 
</I>&gt;<i> More on serial port regression
</I>&gt;<i> &lt;<A HREF="http://e2e.ti.com/support/embedded/starterware/f/790/t/160340.aspx">http://e2e.ti.com/support/embedded/starterware/f/790/t/160340.aspx</A>&gt;
</I>&gt;<i> 
</I>&gt;<i> Serial port only code (no USB)
</I>&gt;<i> &lt;<A HREF="http://e2e.ti.com/support/embedded/starterware/f/790/t/151682.aspx#570450">http://e2e.ti.com/support/embedded/starterware/f/790/t/151682.aspx#570450</A>&gt;
</I>&gt;<i> _______________________________________________
</I>&gt;<i> arm-gnu mailing list
</I>&gt;<i> <A HREF="http://sourcerytools.com/cgi-bin/mailman/listinfo/arm-gnu">arm-gnu at codesourcery.com</A>
</I>&gt;<i> <A HREF="http://sourcerytools.com/cgi-bin/mailman/listinfo/arm-gnu">http://sourcerytools.com/cgi-bin/mailman/listinfo/arm-gnu</A>
</I>


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000040.html">[arm-gnu] Compiler versions other than 2009q3-68 all fail??
</A></li>
	<LI>Next message: <A HREF="000043.html">[arm-gnu] Compiler versions other than 2009q3-68 all fail??
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42">[ date ]</a>
              <a href="thread.html#42">[ thread ]</a>
              <a href="subject.html#42">[ subject ]</a>
              <a href="author.html#42">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://sourcerytools.com/cgi-bin/mailman/listinfo/arm-gnu">More information about the arm-gnu
mailing list</a><br>
</body></html>
